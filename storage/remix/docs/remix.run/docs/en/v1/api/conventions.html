<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/><link rel="icon" href="../../../../favicon-light.1.png" type="image/png" media="(prefers-color-scheme: light)"/><link rel="icon" href="../../../../favicon-dark.1.png" type="image/png" media="(prefers-color-scheme: dark)"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;family=Source+Code+Pro:wght@400;600&amp;display=auto" rel="stylesheet"/><title>Remix | Conventions</title><meta name="description"/><link rel="preload" as="font" href="../../../../font/founders-grotesk-bold.woff2" crossorigin="anonymous"/><link rel="stylesheet" href="../../../../build/_assets/tailwind-XN5LJQWA.css"/><link rel="stylesheet" href="../../../../build/_assets/bailwind-QVFUVIGW.css"/><link rel="stylesheet" href="../../../../build/_assets/docs-TIR56M2J.css"/></head><body x-comp="Body" class="min-h-screen flex flex-col w-full overflow-x-hidden bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-200 undefined"><div class="lg:flex lg:h-full px-6"><div class="lg:hidden"><div class="absolute top-6 right-6"><a href="../../v1.html"><svg x-comp="Wordmark" height="24" viewBox="0 0 659 165" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Remix Logo</title><path fill-rule="evenodd" clip-rule="evenodd" d="M133.85 124.16C135.3 142.762 135.3 151.482 135.3 161H92.2283C92.2283 158.927 92.2653 157.03 92.3028 155.107C92.4195 149.128 92.5411 142.894 91.5717 130.304C90.2905 111.872 82.3473 107.776 67.7419 107.776H54.8021H0V74.24H69.7918C88.2407 74.24 97.4651 68.632 97.4651 53.784C97.4651 40.728 88.2407 32.816 69.7918 32.816H0V0H77.4788C119.245 0 140 19.712 140 51.2C140 74.752 125.395 90.112 105.665 92.672C122.32 96 132.057 105.472 133.85 124.16Z" fill="currentColor"></path><path d="M0 161V136H45.5416C53.1486 136 54.8003 141.638 54.8003 145V161H0Z" fill="currentColor"></path><path d="M654.54 47.1035H611.788L592.332 74.2395L573.388 47.1035H527.564L568.78 103.168L523.98 161.28H566.732L589.516 130.304L612.3 161.28H658.124L613.068 101.376L654.54 47.1035Z" fill="url(#paint0_linear)"></path><path d="M654.54 47.1035H611.788L592.332 74.2395L573.388 47.1035H527.564L568.78 103.168L523.98 161.28H566.732L589.516 130.304L612.3 161.28H658.124L613.068 101.376L654.54 47.1035Z" fill="currentColor"></path><path d="M229.43 120.576C225.59 129.536 218.422 133.376 207.158 133.376C194.614 133.376 184.374 126.72 183.35 112.64H263.478V101.12C263.478 70.1437 243.254 44.0317 205.11 44.0317C169.526 44.0317 142.902 69.8877 142.902 105.984C142.902 142.336 169.014 164.352 205.622 164.352C235.83 164.352 256.822 149.76 262.71 123.648L229.43 120.576ZM183.862 92.6717C185.398 81.9197 191.286 73.7277 204.598 73.7277C216.886 73.7277 223.542 82.4317 224.054 92.6717H183.862Z" fill="url(#paint1_linear)"></path><path d="M229.43 120.576C225.59 129.536 218.422 133.376 207.158 133.376C194.614 133.376 184.374 126.72 183.35 112.64H263.478V101.12C263.478 70.1437 243.254 44.0317 205.11 44.0317C169.526 44.0317 142.902 69.8877 142.902 105.984C142.902 142.336 169.014 164.352 205.622 164.352C235.83 164.352 256.822 149.76 262.71 123.648L229.43 120.576ZM183.862 92.6717C185.398 81.9197 191.286 73.7277 204.598 73.7277C216.886 73.7277 223.542 82.4317 224.054 92.6717H183.862Z" fill="currentColor"></path><path d="M385.256 66.5597C380.392 53.2477 369.896 44.0317 349.672 44.0317C332.52 44.0317 320.232 51.7117 314.088 64.2557V47.1037H272.616V161.28H314.088V105.216C314.088 88.0638 318.952 76.7997 332.52 76.7997C345.064 76.7997 348.136 84.9917 348.136 100.608V161.28H389.608V105.216C389.608 88.0638 394.216 76.7997 408.04 76.7997C420.584 76.7997 423.4 84.9917 423.4 100.608V161.28H464.872V89.5997C464.872 65.7917 455.656 44.0317 424.168 44.0317C404.968 44.0317 391.4 53.7597 385.256 66.5597Z" fill="url(#paint2_linear)"></path><path d="M385.256 66.5597C380.392 53.2477 369.896 44.0317 349.672 44.0317C332.52 44.0317 320.232 51.7117 314.088 64.2557V47.1037H272.616V161.28H314.088V105.216C314.088 88.0638 318.952 76.7997 332.52 76.7997C345.064 76.7997 348.136 84.9917 348.136 100.608V161.28H389.608V105.216C389.608 88.0638 394.216 76.7997 408.04 76.7997C420.584 76.7997 423.4 84.9917 423.4 100.608V161.28H464.872V89.5997C464.872 65.7917 455.656 44.0317 424.168 44.0317C404.968 44.0317 391.4 53.7597 385.256 66.5597Z" fill="currentColor"></path><path d="M478.436 47.104V161.28H519.908V47.104H478.436ZM478.18 36.352H520.164V0H478.18V36.352Z" fill="url(#paint3_linear)"></path><path d="M478.436 47.104V161.28H519.908V47.104H478.436ZM478.18 36.352H520.164V0H478.18V36.352Z" fill="currentColor"></path><defs><linearGradient id="paint0_linear" x1="591.052" y1="47.1035" x2="591.052" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint1_linear" x1="203.19" y1="44.0317" x2="203.19" y2="164.352" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint2_linear" x1="368.744" y1="44.0317" x2="368.744" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint3_linear" x1="499.172" y1="0" x2="499.172" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient></defs></svg></a></div><details><summary class="pb-4 pt-6 cursor-pointer">Docs Navigation</summary><div><nav class="md-nav py-6 text-d-p-sm font-medium"><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="1"><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading pt-0">Tutorials</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../tutorials/blog.html">Developer Blog</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../tutorials/jokes.html">Jokes App</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">API</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a aria-current="page" class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2 md-nav-item--active" href="conventions.html">Conventions</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="remix.html">Remix Package</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">Other API</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/dev.html">@remix-run/dev (CLI)</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/adapter.html">@remix-run/{adapter}</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/node.html">@remix-run/node</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/serve.html">@remix-run/serve</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/constraints.html">Module Constraints</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/react-router.html">React Router v6</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/fetch.html">Web Fetch API</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">Guides</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/accessibility.html">Accessibility</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/api-routes.html">API Routes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/data-writes.html">Data Writes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/deployment.html">Deployment</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/disabling-javascript.html">Disabling JavaScript</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/envvars.html">Environment Variables</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/errors.html">Error Handling</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/mdx.html">MDX</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/not-found.html">Not Found Handling</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/optimistic-ui.html">Optimistic UI</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/performance.html">Performance</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/philosophy.html">Philosophy</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/resource-routes.html">Resource Routes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/routing.html">Routing</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/styling.html">Styling</a></li></ul></li><li data-dir="" data-level="1"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading" href="../contributing.html">Contributing</a></li></ul></nav></div></details><hr class="mb-4"/></div><div class="flex-shrink-0 hidden lg:block"><div class="h-full max-h-screen overflow-x-hidden overflow-y-auto w-64 xl:w-80 2xl:w-96 sticky top-0 py-10 pl-6 pr-3 xl:pr-5 2xl:pr-6"><a href="../../v1.html"><svg x-comp="Wordmark" height="24" viewBox="0 0 659 165" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Remix Logo</title><path fill-rule="evenodd" clip-rule="evenodd" d="M133.85 124.16C135.3 142.762 135.3 151.482 135.3 161H92.2283C92.2283 158.927 92.2653 157.03 92.3028 155.107C92.4195 149.128 92.5411 142.894 91.5717 130.304C90.2905 111.872 82.3473 107.776 67.7419 107.776H54.8021H0V74.24H69.7918C88.2407 74.24 97.4651 68.632 97.4651 53.784C97.4651 40.728 88.2407 32.816 69.7918 32.816H0V0H77.4788C119.245 0 140 19.712 140 51.2C140 74.752 125.395 90.112 105.665 92.672C122.32 96 132.057 105.472 133.85 124.16Z" fill="currentColor"></path><path d="M0 161V136H45.5416C53.1486 136 54.8003 141.638 54.8003 145V161H0Z" fill="currentColor"></path><path d="M654.54 47.1035H611.788L592.332 74.2395L573.388 47.1035H527.564L568.78 103.168L523.98 161.28H566.732L589.516 130.304L612.3 161.28H658.124L613.068 101.376L654.54 47.1035Z" fill="url(#paint0_linear)"></path><path d="M654.54 47.1035H611.788L592.332 74.2395L573.388 47.1035H527.564L568.78 103.168L523.98 161.28H566.732L589.516 130.304L612.3 161.28H658.124L613.068 101.376L654.54 47.1035Z" fill="currentColor"></path><path d="M229.43 120.576C225.59 129.536 218.422 133.376 207.158 133.376C194.614 133.376 184.374 126.72 183.35 112.64H263.478V101.12C263.478 70.1437 243.254 44.0317 205.11 44.0317C169.526 44.0317 142.902 69.8877 142.902 105.984C142.902 142.336 169.014 164.352 205.622 164.352C235.83 164.352 256.822 149.76 262.71 123.648L229.43 120.576ZM183.862 92.6717C185.398 81.9197 191.286 73.7277 204.598 73.7277C216.886 73.7277 223.542 82.4317 224.054 92.6717H183.862Z" fill="url(#paint1_linear)"></path><path d="M229.43 120.576C225.59 129.536 218.422 133.376 207.158 133.376C194.614 133.376 184.374 126.72 183.35 112.64H263.478V101.12C263.478 70.1437 243.254 44.0317 205.11 44.0317C169.526 44.0317 142.902 69.8877 142.902 105.984C142.902 142.336 169.014 164.352 205.622 164.352C235.83 164.352 256.822 149.76 262.71 123.648L229.43 120.576ZM183.862 92.6717C185.398 81.9197 191.286 73.7277 204.598 73.7277C216.886 73.7277 223.542 82.4317 224.054 92.6717H183.862Z" fill="currentColor"></path><path d="M385.256 66.5597C380.392 53.2477 369.896 44.0317 349.672 44.0317C332.52 44.0317 320.232 51.7117 314.088 64.2557V47.1037H272.616V161.28H314.088V105.216C314.088 88.0638 318.952 76.7997 332.52 76.7997C345.064 76.7997 348.136 84.9917 348.136 100.608V161.28H389.608V105.216C389.608 88.0638 394.216 76.7997 408.04 76.7997C420.584 76.7997 423.4 84.9917 423.4 100.608V161.28H464.872V89.5997C464.872 65.7917 455.656 44.0317 424.168 44.0317C404.968 44.0317 391.4 53.7597 385.256 66.5597Z" fill="url(#paint2_linear)"></path><path d="M385.256 66.5597C380.392 53.2477 369.896 44.0317 349.672 44.0317C332.52 44.0317 320.232 51.7117 314.088 64.2557V47.1037H272.616V161.28H314.088V105.216C314.088 88.0638 318.952 76.7997 332.52 76.7997C345.064 76.7997 348.136 84.9917 348.136 100.608V161.28H389.608V105.216C389.608 88.0638 394.216 76.7997 408.04 76.7997C420.584 76.7997 423.4 84.9917 423.4 100.608V161.28H464.872V89.5997C464.872 65.7917 455.656 44.0317 424.168 44.0317C404.968 44.0317 391.4 53.7597 385.256 66.5597Z" fill="currentColor"></path><path d="M478.436 47.104V161.28H519.908V47.104H478.436ZM478.18 36.352H520.164V0H478.18V36.352Z" fill="url(#paint3_linear)"></path><path d="M478.436 47.104V161.28H519.908V47.104H478.436ZM478.18 36.352H520.164V0H478.18V36.352Z" fill="currentColor"></path><defs><linearGradient id="paint0_linear" x1="591.052" y1="47.1035" x2="591.052" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint1_linear" x1="203.19" y1="44.0317" x2="203.19" y2="164.352" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint2_linear" x1="368.744" y1="44.0317" x2="368.744" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint3_linear" x1="499.172" y1="0" x2="499.172" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient></defs></svg></a><div class="h-8"></div><nav class="md-nav"><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="1"><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading pt-0">Tutorials</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../tutorials/blog.html">Developer Blog</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../tutorials/jokes.html">Jokes App</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">API</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a aria-current="page" class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2 md-nav-item--active" href="conventions.html">Conventions</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="remix.html">Remix Package</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">Other API</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/dev.html">@remix-run/dev (CLI)</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/adapter.html">@remix-run/{adapter}</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/node.html">@remix-run/node</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/serve.html">@remix-run/serve</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/constraints.html">Module Constraints</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/react-router.html">React Router v6</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/fetch.html">Web Fetch API</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">Guides</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/accessibility.html">Accessibility</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/api-routes.html">API Routes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/data-writes.html">Data Writes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/deployment.html">Deployment</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/disabling-javascript.html">Disabling JavaScript</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/envvars.html">Environment Variables</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/errors.html">Error Handling</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/mdx.html">MDX</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/not-found.html">Not Found Handling</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/optimistic-ui.html">Optimistic UI</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/performance.html">Performance</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/philosophy.html">Philosophy</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/resource-routes.html">Resource Routes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/routing.html">Routing</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../guides/styling.html">Styling</a></li></ul></li><li data-dir="" data-level="1"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading" href="../contributing.html">Contributing</a></li></ul></nav></div></div><div class="lg:z-[1] flex-grow lg:h-full"><div class="py-6 md:py-8 lg:py-10 lg:pr-6 lg:pl-3 xl:pl-5 2xl:pl-6"><div><div class="markdown has-toc"><div class="md-toc-container"><div class="md-toc-nav" role="navigation"><ul class="toc">
<li>
<p><a href="conventions.html#conventions">Conventions</a></p>
<ul>
<li>
<p><a href="conventions.html#remixconfigjs">remix.config.js</a></p>
<ul>
<li><a href="conventions.html#appdirectory">appDirectory</a></li>
<li><a href="conventions.html#routes">routes</a></li>
<li><a href="conventions.html#browserbuilddirectory">browserBuildDirectory</a></li>
<li><a href="conventions.html#publicpath">publicPath</a></li>
<li><a href="conventions.html#serverbuilddirectory">serverBuildDirectory</a></li>
<li><a href="conventions.html#devserverport">devServerPort</a></li>
</ul>
</li>
<li>
<p><a href="conventions.html#file-name-conventions">File Name Conventions</a></p>
<ul>
<li><a href="conventions.html#special-files">Special Files</a></li>
<li><a href="conventions.html#route-filenames">Route Filenames</a></li>
<li><a href="conventions.html#escaping-special-characters">Escaping special characters</a></li>
</ul>
</li>
<li>
<p><a href="conventions.html#entry-files">Entry Files</a></p>
<ul>
<li><a href="conventions.html#entryclienttsx">entry.client.tsx</a></li>
<li><a href="conventions.html#entryservertsx">entry.server.tsx</a></li>
</ul>
</li>
<li>
<p><a href="conventions.html#route-module-api">Route Module API</a></p>
<ul>
<li>
<p><a href="conventions.html#default-export"><code>default</code> export</a></p>
</li>
<li>
<p><a href="conventions.html#loader"><code>loader</code></a></p>
<ul>
<li><a href="conventions.html#loader-params">loader <code>params</code></a></li>
<li><a href="conventions.html#loader-request">loader <code>request</code></a></li>
<li><a href="conventions.html#loader-context">loader <code>context</code></a></li>
<li><a href="conventions.html#returning-objects">Returning objects</a></li>
<li><a href="conventions.html#returning-response-instances">Returning Response Instances</a></li>
<li><a href="conventions.html#throwing-responses-in-loaders">Throwing Responses in Loaders</a></li>
</ul>
</li>
<li>
<p><a href="conventions.html#action"><code>action</code></a></p>
</li>
<li>
<p><a href="conventions.html#headers"><code>headers</code></a></p>
</li>
<li>
<p><a href="conventions.html#meta"><code>meta</code></a></p>
</li>
<li>
<p><a href="conventions.html#links"><code>links</code></a></p>
<ul>
<li><a href="conventions.html#htmllinkdescriptor"><code>HtmlLinkDescriptor</code></a></li>
<li><a href="conventions.html#htmlmetadescriptor">HtmlMetaDescriptor</a></li>
<li><a href="conventions.html#pagelinkdescriptor"><code>PageLinkDescriptor</code></a></li>
</ul>
</li>
<li>
<p><a href="conventions.html#catchboundary">CatchBoundary</a></p>
</li>
<li>
<p><a href="conventions.html#errorboundary">ErrorBoundary</a></p>
</li>
<li>
<p><a href="conventions.html#handle">handle</a></p>
</li>
<li>
<p><a href="conventions.html#unstable_shouldreload">unstable_shouldReload</a></p>
<ul>
<li><a href="conventions.html#never-reloading-the-root">Never reloading the root</a></li>
<li><a href="conventions.html#ignoring-search-params">Ignoring search params</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="conventions.html#asset-url-imports">Asset URL Imports</a></p>
</li>
</ul>
</li>
</ul></div><div class="md-prose"><h1 id="conventions"><a href="conventions.html#conventions" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conventions</h1><p>A lot of Remix APIs aren't imported from the <code>"remix"</code> package, but are instead conventions and exports from <em>your</em> application modules. When you <code>import from "remix"</code>, <em>you are calling Remix</em>, but these APIs are when <em>Remix calls your code</em>.</p><h2 id="remixconfigjs"><a href="conventions.html#remixconfigjs" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>remix.config.js</h2><p>This file has a few build and development configuration options, but does not actually run on your server.</p><div><pre data-filename="remix.config.js" data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0C)">module</span>.<span style="color: var(--base0C)">exports</span> <span style="color: var(--base0E)">=</span> {
</span><span class="codeblock-line" data-line-number="2">  appDirectory: "<span style="color: var(--base0B)">app</span>",
</span><span class="codeblock-line" data-line-number="3">  browserBuildDirectory: "<span style="color: var(--base0B)">public/build</span>",
</span><span class="codeblock-line" data-line-number="4">  devServerPort: <span style="color: var(--base09)">8002</span>,
</span><span class="codeblock-line" data-line-number="5">  publicPath: "<span style="color: var(--base0B)">/build/</span>",
</span><span class="codeblock-line" data-line-number="6">  serverBuildDirectory: "<span style="color: var(--base0B)">build</span>",
</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0D)">routes</span>(<span style="color: var(--base08)">defineRoutes</span>) {
</span><span class="codeblock-line" data-line-number="8">    <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">defineRoute</span>(<span style="color: var(--base08)">route</span> <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="9">      <span style="color: var(--base0D)">route</span>("<span style="color: var(--base0B)">/somewhere/cool/*</span>", "<span style="color: var(--base0B)">catchall.tsx</span>");
</span><span class="codeblock-line" data-line-number="10">    });
</span><span class="codeblock-line" data-line-number="11">  }
</span><span class="codeblock-line" data-line-number="12">};
</span></code></pre></div><h3 id="appdirectory"><a href="conventions.html#appdirectory" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>appDirectory</h3><p>The path to the <code>app</code> directory, relative to remix.config.js. Defaults to "app".</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base03)">// default</span>
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0C)">exports</span>.<span style="color: var(--base08)">appDirectory</span> <span style="color: var(--base0E)">=</span> "<span style="color: var(--base0B)">./app</span>";
</span><span class="codeblock-line" data-line-number="3">
</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base03)">// custom</span>
</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base0C)">exports</span>.<span style="color: var(--base08)">appDirectory</span> <span style="color: var(--base0E)">=</span> "<span style="color: var(--base0B)">./elsewhere</span>";
</span></code></pre></div><h3 id="routes"><a href="conventions.html#routes" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>routes</h3><p>A function for defining custom routes, in addition to those already defined
using the filesystem convention in <code>app/routes</code>. Both sets of routes will be merged.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0C)">exports</span>.<span style="color: var(--base0D)">routes</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> (<span style="color: var(--base08)">defineRoutes</span>) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base03)">// If you need to do async work, do it before calling `defineRoutes`, we use</span>
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base03)">// the call stack of `route` inside to set nesting.</span>
</span><span class="codeblock-line" data-line-number="4">
</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">defineRoutes</span>((<span style="color: var(--base08)">route</span>) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="6">    <span style="color: var(--base03)">// A common use for this is catchall routes.</span>
</span><span class="codeblock-line" data-line-number="7">    <span style="color: var(--base03)">// - The first argument is the React Router path to match against</span>
</span><span class="codeblock-line" data-line-number="8">    <span style="color: var(--base03)">// - The second is the relative filename of the route handler</span>
</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base0D)">route</span>("<span style="color: var(--base0B)">/some/path/*</span>", "<span style="color: var(--base0B)">catchall.tsx</span>")
</span><span class="codeblock-line" data-line-number="10">
</span><span class="codeblock-line" data-line-number="11">    <span style="color: var(--base03)">// if you want to nest routes, use the optional callback argument</span>
</span><span class="codeblock-line" data-line-number="12">    <span style="color: var(--base0D)">route</span>("<span style="color: var(--base0B)">some/:path</span>", "<span style="color: var(--base0B)">some/route/file.js</span>", () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="13">      <span style="color: var(--base03)">// - path is relative to parent path</span>
</span><span class="codeblock-line" data-line-number="14">      <span style="color: var(--base03)">// - filenames are still relative to the app directory</span>
</span><span class="codeblock-line" data-line-number="15">      <span style="color: var(--base0D)">route</span>("<span style="color: var(--base0B)">relative/path</span>", "<span style="color: var(--base0B)">some/other/file</span>")
</span><span class="codeblock-line" data-line-number="16">    });
</span><span class="codeblock-line" data-line-number="17">
</span><span class="codeblock-line" data-line-number="18">  }
</span><span class="codeblock-line" data-line-number="19">}
</span></code></pre></div><h3 id="browserbuilddirectory"><a href="conventions.html#browserbuilddirectory" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>browserBuildDirectory</h3><p>The path to the browser build, relative to remix.config.js. Defaults to "public/build". Should be deployed to static hosting.</p><h3 id="publicpath"><a href="conventions.html#publicpath" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>publicPath</h3><p>The URL prefix of the browser build with a trailing slash. Defaults to "/build/". This is the path the browser will use to find assets.</p><h3 id="serverbuilddirectory"><a href="conventions.html#serverbuilddirectory" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>serverBuildDirectory</h3><p>The path to the server build, relative to remix.config.js. Defaults to "build". This needs to be deployed to your server.</p><h3 id="devserverport"><a href="conventions.html#devserverport" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>devServerPort</h3><p>The port number to use for the dev server. Defaults to 8002.</p><h2 id="file-name-conventions"><a href="conventions.html#file-name-conventions" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>File Name Conventions</h2><p>There are a few conventions that Remix uses you should be aware of.</p><h3 id="special-files"><a href="conventions.html#special-files" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Special Files</h3><ul>
<li><strong><code>remix.config.js</code></strong>: Remix uses this file to know how to build your app for production and run it in development. This file is required.</li>
<li><strong><code>app/entry.server.{js,jsx,ts,tsx}</code></strong>: This is your entry into the server rendering piece of Remix. This file is required.</li>
<li><strong><code>app/entry.client.{js,jsx,ts,tsx}</code></strong>: This is your entry into the browser rendering/hydration piece of Remix. This file is required.</li>
</ul><h3 id="route-filenames"><a href="conventions.html#route-filenames" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Route Filenames</h3><ul>
<li>
<p><strong><code>app/root.tsx</code></strong>: This is your root layout, or "root route" (very sorry for those of you who pronounce those words the same way!). It works just like all other routes: you can export a <code>loader</code>, <code>action</code>, etc.</p>
</li>
<li>
<p><strong><code>app/routes/*.{js,jsx,ts,tsx,md,mdx}</code></strong>: Any files in the <code>app/routes/</code> directory will become routes in your application. Remix supports all of those extensions.</p>
</li>
<li>
<p><strong><code>app/routes/{folder}/*.tsx</code></strong>: Folders inside of routes will create nested URLs.</p>
</li>
<li>
<p><strong><code>app/routes/{folder}</code> with <code>app/routes/{folder}.tsx</code></strong>: When a route has the same name as a folder, it becomes a "layout route" for the child routes inside the folder. Render an <code>&#x3C;Outlet /></code> and the child routes will appear there. This is how you can have multiple levels of persistent layout nesting associated with URLs.</p>
</li>
<li>
<p><strong>Dots in route filesnames</strong>: Adding a <code>.</code> in a route file will create a nested URL, but not a nested layout. Flat files are flat layouts, nested files are nested layouts. The <code>.</code> allows you to create nested URLs without needing to create a bunch of layouts. For example: <code>app/routes/some.long.url.tsx</code> will create the URL <code>/some/long/url</code>.</p>
</li>
<li>
<p><strong><code>app/routes/index.tsx</code></strong>: Routes named "index" will render when the parent layout route's path is matched exactly.</p>
</li>
<li>
<p><strong><code>$param</code></strong>: The dollar sign denotes a dynamic segment of the URL. It will be parsed and passed to your loaders and routes.</p>
<p>For example: <code>app/routes/users/$userId.tsx</code> will match the following URLs: <code>users/123</code> and <code>users/abc</code> but not <code>users/123/abc</code> because that has too many segments. See the <Link to="../routing">routing guide</Link> for more information.</p>
<p>Some CLIs require you to escape the $ when creating files:</p>
<div><pre data-line-numbers="true" data-lang="bash" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">touch routes/<span style="color: var(--base0C)">\$</span>params.tsx
</span></code></pre></div>
<p>Params can be nested routes, just create a folder with the <code>$</code> in it.</p>
</li>
<li>
<p><strong><code>app/routes/files/$.tsx</code></strong>: To add a "splat" path (some people call this a "catchall") name the file simply <code>$.tsx</code>. It will create a route path pattern like <code>files/*</code>. You can also use this along with dot file names: <code>app/routes/files.$.tsx</code>.</p>
</li>
<li>
<p><strong><code>app/routes/__some-layout/some-path.tsx</code></strong>: Prefixing a folder with <code>__</code> will create a "layout route". Layout routes are routes that don't add anything to the URL for matching, but do add nested components in the tree for layouts. Make sure to also have <code>__some-layout.tsx</code> as well. For example, all of your marketing pages could share a layout in the route tree with <code>app/routes/__marketing.tsx</code> as the layout and then all of the child routes go in <code>app/routes/__marketing/products.tsx</code> and <code>app/routes/__marketing/buy.tsx</code>. The <code>__marketing.tsx</code> route won't add any segments to the URL, but it will render when it's child routes match.</p>
</li>
</ul><h3 id="escaping-special-characters"><a href="conventions.html#escaping-special-characters" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Escaping special characters</h3><p>Because some characters have special meaning, you must use our escaping syntax if you want those characters to actually appear in the route. For example, if I wanted to make a <a href="../../v1.0.4/guides/resource-routes.html">Resource Route</a> for a <code>/sitemap.xml</code>, I could name the file <code>app/routes/[sitemap.xml].tsx</code>. So you simply wrap any part of the filename with brackets and that will escape any special characters.</p><docs-info>
  Note, you could even do `app/routes/sitemap[.]xml.tsx` if you wanted to only wrap the part that needs to be escaped. It makes no difference. Choose the one you like best.
</docs-info><h2 id="entry-files"><a href="conventions.html#entry-files" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Entry Files</h2><h3 id="entryclienttsx"><a href="conventions.html#entryclienttsx" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>entry.client.tsx</h3><p>Remix uses <code>app/entry.client.tsx</code> as the entry point for the browser bundle. This module gives you full control over the "hydrate" step after JavaScript loads into the document.</p><p>Typically this module uses <code>ReactDOM.hydrate</code> to re-hydrate the markup that was already generated on the server in your <a href="https://remix.run/docs/en/v1.0.4/entry.server">server entry module</a>.</p><p>Here's a basic example:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">ReactDOM</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">react-dom</span>";
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">Remix</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">@remix-run/react/browser</span>";
</span><span class="codeblock-line" data-line-number="3">
</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base08)">ReactDOM</span>.<span style="color: var(--base0D)">hydrate</span>(&#x3C;<span style="color: var(--base0A)">Remix</span> />, <span style="color: var(--base08)">document</span>);
</span></code></pre></div><p>As you can see, you have full control over hydration. This is the first piece of code that runs in the browser. As you can see, you have full control here. You can initialize client side libraries, setup things like <code>window.history.scrollRestoration</code>, etc.</p><h3 id="entryservertsx"><a href="conventions.html#entryservertsx" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>entry.server.tsx</h3><p>Remix uses <code>app/entry.server.tsx</code> to generate the HTTP response when rendering on the server. The <code>default</code> export of this module is a function that lets you create the response, including HTTP status, headers, and HTML, giving you full control over the way the markup is generated and sent to the client.</p><p>This module should render the markup for the current page using a <code>&#x3C;RemixServer></code> element with the <code>context</code> and <code>url</code> for the current request. This markup will (optionally) be re-hydrated once JavaScript loads in the browser using the <a href="https://remix.run/docs/en/v1.0.4/api/%22../entry.client%22">browser entry module</a>.</p><p>You can also export an optional <code>handleDataRequest</code> function that will allow you to modify the response of a data request. These are the requests that do not render HTML, but rather return the loader and action data to the browser once client side hydration has occured.</p><p>Here's a basic example:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">ReactDOMServer</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">react-dom/server</span>";
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> {
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base08)">EntryContext</span>,
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base08)">HandleDataRequestFunction</span>
</span><span class="codeblock-line" data-line-number="5">} <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="6"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">RemixServer</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="7">
</span><span class="codeblock-line" data-line-number="8"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">handleRequest</span>(
</span><span class="codeblock-line" data-line-number="9">  <span style="color: var(--base08)">request</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">Request</span>,
</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base08)">responseStatusCode</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0C)">number</span>,
</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base08)">responseHeaders</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">Headers</span>,
</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base08)">remixContext</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">EntryContext</span>
</span><span class="codeblock-line" data-line-number="13">) {
</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">markup</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">ReactDOMServer</span>.<span style="color: var(--base0D)">renderToString</span>(
</span><span class="codeblock-line" data-line-number="15">    &#x3C;<span style="color: var(--base0A)">RemixServer</span> <span style="color: var(--base0D)">context</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">remixContext</span><span style="color: var(--base0F)">}</span> <span style="color: var(--base0D)">url</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">request</span>.<span style="color: var(--base08)">url</span><span style="color: var(--base0F)">}</span> />
</span><span class="codeblock-line" data-line-number="16">  );
</span><span class="codeblock-line" data-line-number="17">
</span><span class="codeblock-line" data-line-number="18">  <span style="color: var(--base08)">responseHeaders</span>.<span style="color: var(--base0D)">set</span>("<span style="color: var(--base0B)">Content-Type</span>", "<span style="color: var(--base0B)">text/html</span>");
</span><span class="codeblock-line" data-line-number="19">
</span><span class="codeblock-line" data-line-number="20">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">Response</span>("<span style="color: var(--base0B)">&#x3C;!DOCTYPE html></span>" <span style="color: var(--base0E)">+</span> <span style="color: var(--base08)">markup</span>, {
</span><span class="codeblock-line" data-line-number="21">    status: <span style="color: var(--base08)">responseStatusCode</span>,
</span><span class="codeblock-line" data-line-number="22">    headers: <span style="color: var(--base08)">responseHeaders</span>
</span><span class="codeblock-line" data-line-number="23">  });
</span><span class="codeblock-line" data-line-number="24">}
</span><span class="codeblock-line" data-line-number="25">
</span><span class="codeblock-line" data-line-number="26"><span style="color: var(--base03)">// this is an optional export</span>
</span><span class="codeblock-line" data-line-number="27"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">handleDataRequest</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">HandleDataRequestFunction</span> <span style="color: var(--base0E)">=</span> (
</span><span class="codeblock-line" data-line-number="28">  <span style="color: var(--base08)">response</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">Response</span>,
</span><span class="codeblock-line" data-line-number="29">  <span style="color: var(--base03)">// same args that get passed to the action or loader that was called</span>
</span><span class="codeblock-line" data-line-number="30">  { <span style="color: var(--base08)">request</span>, <span style="color: var(--base08)">params</span>, <span style="color: var(--base08)">context</span> }
</span><span class="codeblock-line" data-line-number="31">) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="32">  <span style="color: var(--base08)">response</span>.<span style="color: var(--base0D)">headers</span>.<span style="color: var(--base0D)">set</span>("<span style="color: var(--base0B)">x-custom</span>", "<span style="color: var(--base0B)">yay!</span>");
</span><span class="codeblock-line" data-line-number="33">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">response</span>;
</span><span class="codeblock-line" data-line-number="34">};
</span></code></pre></div><h2 id="route-module-api"><a href="conventions.html#route-module-api" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Route Module API</h2><p>A route in Remix is can used for many things. Usually they’re used for the user interface of your app, like a React component with server side lifecycle hooks. But they can also serve as generic routes for any kind of resource (like dynamic CSS or social images).</p><p>It's important to read <a href="https://remix.run/docs/en/v1.0.4/constraints/">Route Module Constraints</a>.</p><h3 id="default-export"><a href="conventions.html#default-export" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>default</code> export</h3><p>This is the component that will render when the route matches.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">SomeRouteComponent</span>() {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="4">      &#x3C;<span style="color: var(--base08)">h1</span>>Look ma!&#x3C;/<span style="color: var(--base08)">h1</span>>
</span><span class="codeblock-line" data-line-number="5">      &#x3C;<span style="color: var(--base08)">p</span>>I'm still using React after like 7 years.&#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="6">    &#x3C;/<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="7">  );
</span><span class="codeblock-line" data-line-number="8">}
</span></code></pre></div><h3 id="loader"><a href="conventions.html#loader" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>loader</code></h3><p>Each route can define a "loader" function that will be called on the server before rendering to provide data to the route.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> { ok: <span style="color: var(--base09)">true</span> };
</span><span class="codeblock-line" data-line-number="3">};
</span><span class="codeblock-line" data-line-number="4">
</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base03)">// Typescript</span>
</span><span class="codeblock-line" data-line-number="6"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">LoaderFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="7"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base0E)">return</span> { ok: <span style="color: var(--base09)">true</span> };
</span><span class="codeblock-line" data-line-number="9">};
</span></code></pre></div><p>This function is only ever run on the server. On the initial server render it will provide data to the HTML document. On navigations in the browser, Remix will call the function via <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"><code>fetch</code></a>. This means you can talk directly to your database, use server only API secrets, etc. Any code that isn't used to render the UI will be removed from the browser bundle.</p><p>Using the database ORM Prisma as an example:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-highlight="true" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">useLoaderData</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">prisma</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">../db</span>";
</span><span class="codeblock-line" data-line-number="3">
</span><span class="codeblock-line" data-highlight="true" data-line-number="4"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-highlight="true" data-line-number="5">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">prisma</span>.<span style="color: var(--base0D)">user</span>.<span style="color: var(--base0D)">findMany</span>();
</span><span class="codeblock-line" data-highlight="true" data-line-number="6">};
</span><span class="codeblock-line" data-line-number="7">
</span><span class="codeblock-line" data-line-number="8"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">Users</span>() {
</span><span class="codeblock-line" data-highlight="true" data-line-number="9">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">data</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useLoaderData</span>();
</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="11">    &#x3C;<span style="color: var(--base08)">ul</span>>
</span><span class="codeblock-line" data-line-number="12">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">data</span>.<span style="color: var(--base0D)">map</span>(<span style="color: var(--base08)">user</span> <span style="color: var(--base0D)">=></span> (
</span><span class="codeblock-line" data-line-number="13">        &#x3C;<span style="color: var(--base08)">li</span> <span style="color: var(--base0D)">key</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">user</span>.<span style="color: var(--base08)">id</span><span style="color: var(--base0F)">}</span>><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">user</span>.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">li</span>>
</span><span class="codeblock-line" data-line-number="14">      ))<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="15">    &#x3C;/<span style="color: var(--base08)">ul</span>>
</span><span class="codeblock-line" data-line-number="16">  );
</span><span class="codeblock-line" data-line-number="17">}
</span></code></pre></div><p>Because <code>prisma</code> is only used in the loader it will be removed from the browser bundle.</p><p>Remix polyfills the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Web Fetch API</a> on the server so you can use <code>fetch</code> inside of your loader as if you were in the browser.</p><h4 id="loader-params"><a href="conventions.html#loader-params" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>loader <code>params</code></h4><p>Route params are passed to your loader. If you have a loader at <code>data/invoices/$invoiceId.tsx</code> then Remix will parse out the <code>invoiceId</code> and pass it to your loader. This is useful for fetching data from an API or database.</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base03)">// if the user visits /invoices/123</span>
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> ({ <span style="color: var(--base08)">params</span> }) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">invoiceId</span>; <span style="color: var(--base03)">// "123"</span>
</span><span class="codeblock-line" data-line-number="4">};
</span></code></pre></div><h4 id="loader-request"><a href="conventions.html#loader-request" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>loader <code>request</code></h4><p>This is a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Fetch Request</a> instance with information about the request. You can read the MDN docs to see all of it's properties.</p><p>Most common cases are reading headers or the URL. You can also use this to read URL <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams">URLSearchParams</a> from the request like so:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> ({ <span style="color: var(--base08)">request</span> }) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base03)">// read a cookie</span>
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">cookie</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">headers</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">Cookie</span>");
</span><span class="codeblock-line" data-line-number="4">
</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base03)">// parse the search params</span>
</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">url</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">URL</span>(<span style="color: var(--base08)">request</span>.<span style="color: var(--base08)">url</span>);
</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">search</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">url</span>.<span style="color: var(--base0D)">searchParams</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">search</span>");
</span><span class="codeblock-line" data-line-number="8">};
</span></code></pre></div><h4 id="loader-context"><a href="conventions.html#loader-context" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>loader <code>context</code></h4><p>This is the context you passed in to your server adapter's <code>getLoadContext()</code> function. It's a way to bridge the gap between the adapter's request/response API with your Remix app.</p><p><docs-info>This API is an escape hatch, it’s uncommon to need it</docs-info></p><p>Say your express server (or your serverless function handler) looks something like this:</p><div><pre data-filename="some-express-server.js" data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0A)">const</span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base08)">createRequestHandler</span>
</span><span class="codeblock-line" data-line-number="3">} <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">require</span>("<span style="color: var(--base0B)">@remix-run/express</span>");
</span><span class="codeblock-line" data-line-number="4">
</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base08)">app</span>.<span style="color: var(--base0D)">all</span>(
</span><span class="codeblock-line" data-line-number="6">  "<span style="color: var(--base0B)">*</span>",
</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0D)">createRequestHandler</span>({
</span><span class="codeblock-line" data-line-number="8">    <span style="color: var(--base0D)">getLoadContext</span>(<span style="color: var(--base08)">req</span>, <span style="color: var(--base08)">res</span>) {
</span><span class="codeblock-line" data-line-number="9">      <span style="color: var(--base03)">// this becomes the loader context</span>
</span><span class="codeblock-line" data-line-number="10">      <span style="color: var(--base0E)">return</span> { expressUser: <span style="color: var(--base08)">req</span>.<span style="color: var(--base08)">user</span> };
</span><span class="codeblock-line" data-line-number="11">    }
</span><span class="codeblock-line" data-line-number="12">  })
</span><span class="codeblock-line" data-line-number="13">);
</span></code></pre></div><p>And then your loader can access it.</p><div><pre data-filename="routes/some-route.tsx" data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> ({ <span style="color: var(--base08)">context</span> }) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">let</span> { <span style="color: var(--base08)">expressUser</span> } <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">context</span>;
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base03)">// ...</span>
</span><span class="codeblock-line" data-line-number="4">};
</span></code></pre></div><h4 id="returning-objects"><a href="conventions.html#returning-objects" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Returning objects</h4><p>You can return plain JavaScript objects from your loaders that will be made available to your <a href="https://remix.run/docs/en/v1.0.4/api/%22../route-module%22">route modules</a>.</p><div><pre data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> { whatever: "<span style="color: var(--base0B)">you want</span>" };
</span><span class="codeblock-line" data-line-number="3">};
</span></code></pre></div><h4 id="returning-response-instances"><a href="conventions.html#returning-response-instances" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Returning Response Instances</h4><p>When you return a plain object, Remix turns it into a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">Fetch Response</a>. This means you can return them yourself, too.</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">users</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">db</span>.<span style="color: var(--base0D)">users</span>.<span style="color: var(--base0D)">findMany</span>();
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">body</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base09)">JSON</span>.<span style="color: var(--base0D)">stringify</span>(<span style="color: var(--base08)">users</span>);
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">Response</span>(<span style="color: var(--base08)">body</span>, {
</span><span class="codeblock-line" data-line-number="5">    headers: {
</span><span class="codeblock-line" data-line-number="6">      "<span style="color: var(--base0B)">Content-Type</span>": "<span style="color: var(--base0B)">application/json</span>"
</span><span class="codeblock-line" data-line-number="7">    }
</span><span class="codeblock-line" data-line-number="8">  });
</span><span class="codeblock-line" data-line-number="9">};
</span></code></pre></div><p>Remix provides helpers, like <code>json</code>, so you don't have to construct them yourself:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">json</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">users</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">fakeDb</span>.<span style="color: var(--base0D)">users</span>.<span style="color: var(--base0D)">findMany</span>();
</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">json</span>(<span style="color: var(--base08)">users</span>);
</span><span class="codeblock-line" data-line-number="6">};
</span></code></pre></div><p>Between these two examples you can see how <code>json</code> just does a little of work to make your loader a lot cleaner. You usually want to use the <code>json</code> helper when you're adding headers or a status code to your response:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">json</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">params</span> }) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">user</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">fakeDb</span>.<span style="color: var(--base0D)">project</span>.<span style="color: var(--base0D)">findOne</span>({
</span><span class="codeblock-line" data-line-number="5">    where: { id: <span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">id</span> }
</span><span class="codeblock-line" data-line-number="6">  });
</span><span class="codeblock-line" data-line-number="7">
</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base0E)">!</span><span style="color: var(--base08)">user</span>) {
</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">json</span>("<span style="color: var(--base0B)">Project not found</span>", { status: <span style="color: var(--base09)">404</span> });
</span><span class="codeblock-line" data-line-number="10">  }
</span><span class="codeblock-line" data-line-number="11">
</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">json</span>(<span style="color: var(--base08)">user</span>);
</span><span class="codeblock-line" data-line-number="13">};
</span></code></pre></div><p>See also:</p><ul>
<li>(<code>headers</code>)["#headers"]</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">MDN Response Docs</a></li>
</ul><h4 id="throwing-responses-in-loaders"><a href="conventions.html#throwing-responses-in-loaders" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Throwing Responses in Loaders</h4><p>Along with returning responses, you can also throw Response objects from your loaders, allowing you to break through the call stack and show an alternate UI with contextual data through the <code>CatchBoundary</code>.</p><p>Here is a full example showing how you can create utility functions that throw responses to stop code execution in the loader and move over to an alternative UI.</p><div><pre data-filename="app/db.ts" data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">json</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">ThrownResponse</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="3">
</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">type</span> <span style="color: var(--base0A)">InvoiceNotFoundResponse</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0A)">ThrownResponse</span>&#x3C;
</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base09)">404</span>,
</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0C)">string</span>
</span><span class="codeblock-line" data-line-number="7">>;
</span><span class="codeblock-line" data-line-number="8">
</span><span class="codeblock-line" data-line-number="9"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">getInvoice</span>(<span style="color: var(--base08)">id</span>, <span style="color: var(--base08)">user</span>) {
</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0E)">let</span> <span style="color: var(--base08)">invoice</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">db</span>.<span style="color: var(--base0D)">invoice</span>.<span style="color: var(--base0D)">find</span>({ where: { <span style="color: var(--base08)">id</span> } });
</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base08)">invoice</span> <span style="color: var(--base0E)">===</span> <span style="color: var(--base09)">null</span>) {
</span><span class="codeblock-line" data-line-number="12">    <span style="color: var(--base0E)">throw</span> <span style="color: var(--base0D)">json</span>("<span style="color: var(--base0B)">Not Found</span>", { status: <span style="color: var(--base09)">404</span> });
</span><span class="codeblock-line" data-line-number="13">  }
</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">invoice</span>;
</span><span class="codeblock-line" data-line-number="15">}
</span></code></pre></div><div><pre data-filename="app/http.ts" data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">getSession</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">./session</span>";
</span><span class="codeblock-line" data-line-number="3">
</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">requireUserSession</span>(<span style="color: var(--base08)">request</span>) {
</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">let</span> <span style="color: var(--base08)">session</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">getSession</span>(
</span><span class="codeblock-line" data-line-number="6">    <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">headers</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">cookie</span>")
</span><span class="codeblock-line" data-line-number="7">  );
</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base0E)">!</span><span style="color: var(--base08)">session</span>) {
</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base03)">// can throw our helpers like `redirect` and `json` because they</span>
</span><span class="codeblock-line" data-line-number="10">    <span style="color: var(--base03)">// return responses.</span>
</span><span class="codeblock-line" data-line-number="11">    <span style="color: var(--base0E)">throw</span> <span style="color: var(--base0D)">redirect</span>("<span style="color: var(--base0B)">/login</span>", <span style="color: var(--base09)">302</span>);
</span><span class="codeblock-line" data-line-number="12">  }
</span><span class="codeblock-line" data-line-number="13">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">session</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">user</span>");
</span><span class="codeblock-line" data-line-number="14">}
</span></code></pre></div><div><pre data-filename="app/routes/invoice/$invoiceId.tsx" data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">useCatch</span>, <span style="color: var(--base08)">useLoaderData</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">ThrownResponse</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="3">
</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">requireUserSession</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/http</span>";
</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">getInvoice</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/db</span>";
</span><span class="codeblock-line" data-line-number="6"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> {
</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base08)">Invoice</span>,
</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base08)">InvoiceNotFoundResponse</span>
</span><span class="codeblock-line" data-line-number="9">} <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/db</span>";
</span><span class="codeblock-line" data-line-number="10">
</span><span class="codeblock-line" data-line-number="11"><span style="color: var(--base0A)">type</span> <span style="color: var(--base0A)">InvoiceCatchData</span> <span style="color: var(--base0E)">=</span> {
</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base08)">invoiceOwnerEmail</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0C)">string</span>;
</span><span class="codeblock-line" data-line-number="13">};
</span><span class="codeblock-line" data-line-number="14">
</span><span class="codeblock-line" data-line-number="15"><span style="color: var(--base0A)">type</span> <span style="color: var(--base0A)">ThrownResponses</span> <span style="color: var(--base0E)">=</span>
</span><span class="codeblock-line" data-line-number="16">  <span style="color: var(--base0E)">|</span> <span style="color: var(--base0A)">InvoiceNotFoundResponse</span>
</span><span class="codeblock-line" data-line-number="17">  <span style="color: var(--base0E)">|</span> <span style="color: var(--base0A)">ThrownResponse</span>&#x3C;<span style="color: var(--base09)">401</span>, <span style="color: var(--base0A)">InvoiceCatchData</span>>;
</span><span class="codeblock-line" data-line-number="18">
</span><span class="codeblock-line" data-line-number="19"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">request</span>, <span style="color: var(--base08)">params</span> }) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="20">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">user</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">requireUserSession</span>(<span style="color: var(--base08)">request</span>);
</span><span class="codeblock-line" data-line-number="21">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">invoice</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">Invoice</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">getInvoice</span>(<span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">invoiceId</span>);
</span><span class="codeblock-line" data-line-number="22">
</span><span class="codeblock-line" data-line-number="23">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base0E)">!</span><span style="color: var(--base08)">invoice</span>.<span style="color: var(--base0D)">userIds</span>.<span style="color: var(--base0D)">includes</span>(<span style="color: var(--base08)">user</span>.<span style="color: var(--base08)">id</span>)) {
</span><span class="codeblock-line" data-line-number="24">    <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">data</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">InvoiceCatchData</span> <span style="color: var(--base0E)">=</span> {
</span><span class="codeblock-line" data-line-number="25">      invoiceOwnerEmail: <span style="color: var(--base08)">invoice</span>.<span style="color: var(--base0D)">owner</span>.<span style="color: var(--base08)">email</span>
</span><span class="codeblock-line" data-line-number="26">    };
</span><span class="codeblock-line" data-line-number="27">    <span style="color: var(--base0E)">throw</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">json</span>(<span style="color: var(--base08)">data</span>, { status: <span style="color: var(--base09)">401</span> });
</span><span class="codeblock-line" data-line-number="28">  }
</span><span class="codeblock-line" data-line-number="29">
</span><span class="codeblock-line" data-line-number="30">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">invoice</span>;
</span><span class="codeblock-line" data-line-number="31">};
</span><span class="codeblock-line" data-line-number="32">
</span><span class="codeblock-line" data-line-number="33"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">InvoiceRoute</span>() {
</span><span class="codeblock-line" data-line-number="34">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">invoice</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useLoaderData</span>&#x3C;<span style="color: var(--base0A)">Invoice</span>>();
</span><span class="codeblock-line" data-line-number="35">  <span style="color: var(--base0E)">return</span> &#x3C;<span style="color: var(--base0A)">InvoiceView</span> <span style="color: var(--base0D)">invoice</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">invoice</span><span style="color: var(--base0F)">}</span> />;
</span><span class="codeblock-line" data-line-number="36">}
</span><span class="codeblock-line" data-line-number="37">
</span><span class="codeblock-line" data-line-number="38"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">CatchBoundary</span>() {
</span><span class="codeblock-line" data-line-number="39">  <span style="color: var(--base03)">// this returns { status, statusText, data }</span>
</span><span class="codeblock-line" data-line-number="40">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">caught</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useCatch</span>&#x3C;<span style="color: var(--base0A)">ThrownResponses</span>>();
</span><span class="codeblock-line" data-line-number="41">
</span><span class="codeblock-line" data-line-number="42">  <span style="color: var(--base0E)">switch</span> (<span style="color: var(--base08)">caught</span>.<span style="color: var(--base08)">status</span>) {
</span><span class="codeblock-line" data-line-number="43">    <span style="color: var(--base0E)">case</span> <span style="color: var(--base09)">401</span>:
</span><span class="codeblock-line" data-line-number="44">      <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="45">        &#x3C;<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="46">          &#x3C;<span style="color: var(--base08)">p</span>>You don't have access to this invoice.&#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="47">          &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="48">            Contact <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">invoiceCatch</span>.<span style="color: var(--base0D)">data</span>.<span style="color: var(--base08)">invoiceOwnerEmail</span><span style="color: var(--base0F)">}</span> to
</span><span class="codeblock-line" data-line-number="49">            get access
</span><span class="codeblock-line" data-line-number="50">          &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="51">        &#x3C;/<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="52">      );
</span><span class="codeblock-line" data-line-number="53">    <span style="color: var(--base0E)">case</span> <span style="color: var(--base09)">404</span>:
</span><span class="codeblock-line" data-line-number="54">      <span style="color: var(--base0E)">return</span> &#x3C;<span style="color: var(--base08)">div</span>>Invoice not found!&#x3C;/<span style="color: var(--base08)">div</span>>;
</span><span class="codeblock-line" data-line-number="55">  }
</span><span class="codeblock-line" data-line-number="56">
</span><span class="codeblock-line" data-line-number="57">  <span style="color: var(--base03)">// You could also `throw new Error("Unknown status in catch boundary")`.</span>
</span><span class="codeblock-line" data-line-number="58">  <span style="color: var(--base03)">// This will be caught by the closest `ErrorBoundary`.</span>
</span><span class="codeblock-line" data-line-number="59">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="60">    &#x3C;<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="61">      Something went wrong: <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">invoiceCatch</span>.<span style="color: var(--base08)">status</span><span style="color: var(--base0F)">}{</span>"<span style="color: var(--base0B)"> </span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="62">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">invoiceCatch</span>.<span style="color: var(--base08)">statusText</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="63">    &#x3C;/<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="64">  );
</span><span class="codeblock-line" data-line-number="65">}
</span></code></pre></div><h3 id="action"><a href="conventions.html#action" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>action</code></h3><p>Like <code>loader</code>, action is a server only function to handle data mutations and other actions. If a non-GET request is made to your route (POST, PUT, PATCH, DELETE) then the action is called before the loaders.</p><p>Actions have the the very same API as loaders, the only difference is when they are called.</p><p>This enables you to co-locate everything about a data set in a single route module: the data read, the component that renders the data, and the data writes:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span>, <span style="color: var(--base08)">Form</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">fakeGetTodos</span>, <span style="color: var(--base08)">fakeCreateTodo</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/utils/db</span>";
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">TodoList</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/components/TodoList</span>";
</span><span class="codeblock-line" data-line-number="4">
</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">async</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">loader</span>() {
</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">fakeGetTodos</span>();
</span><span class="codeblock-line" data-line-number="7">}
</span><span class="codeblock-line" data-line-number="8">
</span><span class="codeblock-line" data-line-number="9"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">async</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">action</span>({ <span style="color: var(--base08)">request</span> }) {
</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">body</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">formData</span>();
</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">todo</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">fakeCreateTodo</span>({
</span><span class="codeblock-line" data-line-number="12">    title: <span style="color: var(--base08)">body</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">title</span>")
</span><span class="codeblock-line" data-line-number="13">  });
</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">redirect</span>(`<span style="color: var(--base0B)">/todos/</span>${<span style="color: var(--base08)">todo</span>.<span style="color: var(--base08)">id</span>}`);
</span><span class="codeblock-line" data-line-number="15">}
</span><span class="codeblock-line" data-line-number="16">
</span><span class="codeblock-line" data-line-number="17"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">Todos</span>() {
</span><span class="codeblock-line" data-line-number="18">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">data</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useLoaderData</span>();
</span><span class="codeblock-line" data-line-number="19">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="20">    &#x3C;<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="21">      &#x3C;<span style="color: var(--base0A)">TodoList</span> <span style="color: var(--base0D)">todos</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">data</span><span style="color: var(--base0F)">}</span> />
</span><span class="codeblock-line" data-line-number="22">      &#x3C;<span style="color: var(--base0A)">Form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>">
</span><span class="codeblock-line" data-line-number="23">        &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>" <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">title</span>" />
</span><span class="codeblock-line" data-line-number="24">        &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">Create Todo&#x3C;/<span style="color: var(--base08)">button</span>>
</span><span class="codeblock-line" data-line-number="25">      &#x3C;/<span style="color: var(--base0A)">Form</span>>
</span><span class="codeblock-line" data-line-number="26">    &#x3C;/<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="27">  );
</span><span class="codeblock-line" data-line-number="28">}
</span></code></pre></div><p>When a POST is made to a URL, multiple routes in your route hierarchy will match the URL. Unlike a GET to loaders, where all of them are called to build the UI, <em>only one action is called</em>.</p><p><docs-info>The route called will be the deepest matching route, unless the deepest matching route is an "index route". In this case, it will post to the parent route of the index (because they share the same URL, the parent wins).</docs-info></p><p>If you want to post to an index route use <code>?index</code> in the action: <code>&#x3C;Form action="/accounts?index" method="post" /></code></p><table>
<thead>
<tr>
<th>action url</th>
<th>route action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/accounts?index</code></td>
<td><code>routes/accounts/index.js</code></td>
</tr>
<tr>
<td><code>/accounts</code></td>
<td><code>routes/accounts.js</code></td>
</tr>
</tbody>
</table><p>Also note that forms without an action prop (<code>&#x3C;Form method="post"></code>) will automatically post to the same route within which they are rendered, so using the <code>?index</code> param to disambiguate between parent and index routes is only useful if you're posting to an index route from somewhere besides the index route itself. If you're posting from the index route to itself, or from the parent route to itselt, you don't need to define a <code>&#x3C;Form action></code> at all, just omit it: <code>&#x3C;Form method="post"></code>.</p><p>See also:</p><ul>
<li><a href="https://remix.run/docs/en/v1/remix/#form"><code>&#x3C;Form></code></a></li>
<li><a href="https://remix.run/docs/en/v1/remix/#form-action"><code>&#x3C;Form action></code></a></li>
</ul><h3 id="headers"><a href="conventions.html#headers" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>headers</code></h3><p>Each route can define it's own HTTP headers. One of the common headers is the <code>Cache-Control</code> header that indicates to browser and CDN caches where and for how long a page is able to be cached.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">headers</span>({ <span style="color: var(--base08)">loaderHeaders</span>, <span style="color: var(--base08)">parentHeaders</span> }) {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> {
</span><span class="codeblock-line" data-line-number="3">    "<span style="color: var(--base0B)">X-Stretchy-Pants</span>": "<span style="color: var(--base0B)">its for fun</span>",
</span><span class="codeblock-line" data-line-number="4">    "<span style="color: var(--base0B)">Cache-Control</span>": "<span style="color: var(--base0B)">max-age=300, s-maxage=3600</span>"
</span><span class="codeblock-line" data-line-number="5">  };
</span><span class="codeblock-line" data-line-number="6">}
</span></code></pre></div><p>Usually your data is a better indicator of your cache duration than your route module (data tends to be more dynamic than markup), so the loader's headers are passed in to <code>headers()</code> too:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">headers</span>({ <span style="color: var(--base08)">loaderHeaders</span> }) {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> {
</span><span class="codeblock-line" data-line-number="3">    "<span style="color: var(--base0B)">Cache-Control</span>": <span style="color: var(--base08)">loaderHeaders</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">Cache-Control</span>")
</span><span class="codeblock-line" data-line-number="4">  };
</span><span class="codeblock-line" data-line-number="5">}
</span></code></pre></div><p>Note: <code>loaderHeaders</code> is an instance of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers">Web Fetch API</a> <code>Headers</code> class.</p><p>Because Remix has nested routes, there's a battle of the headers to be won when nested routes match. In this case, the deepest route wins. Consider these files in the routes directory:</p><pre><code>├── users.tsx
└── users
    ├── $userId.tsx
    └── $userId
        └── profile.tsx
</code></pre><p>If we are looking at <code>/users/123/profile</code> then three routes are rendering:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base0A)">Users</span>>
</span><span class="codeblock-line" data-line-number="2">  &#x3C;<span style="color: var(--base0A)">UserId</span>>
</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base0A)">Profile</span> />
</span><span class="codeblock-line" data-line-number="4">  &#x3C;/<span style="color: var(--base0A)">UserId</span>>
</span><span class="codeblock-line" data-line-number="5">&#x3C;/<span style="color: var(--base0A)">Users</span>>
</span></code></pre></div><p>If all three define <code>headers</code>, the deepest module wins, in this case <code>profile.tsx</code>.</p><p>We don't want surprise headers in your responses, so it's your job to merge them if you'd like. Remix passes in the <code>parentHeaders</code> to your <code>headers</code> function. So <code>users.tsx</code> headers get passed to <code>$userId.tsx</code>, and then <code>$userId.tsx</code> headers are passed to <code>profile.tsx</code> headers.</p><p>That is all to say that Remix has given you a very large gun with which to shoot your foot. You need to be careful not to send a <code>Cache-Control</code> from a child route module that is more aggressive than a parent route. Here's some code that picks the least aggressive caching in these cases:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">parseCacheControl</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">parse-cache-control</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">headers</span>({ <span style="color: var(--base08)">loaderHeaders</span>, <span style="color: var(--base08)">parentHeaders</span> }) {
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">loaderCache</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">parseCacheControl</span>(
</span><span class="codeblock-line" data-line-number="5">    <span style="color: var(--base08)">loaderHeaders</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">Cache-Control</span>")
</span><span class="codeblock-line" data-line-number="6">  );
</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">parentCache</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">parseCacheControl</span>(
</span><span class="codeblock-line" data-line-number="8">    <span style="color: var(--base08)">parentHeaders</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">Cache-Control</span>")
</span><span class="codeblock-line" data-line-number="9">  );
</span><span class="codeblock-line" data-line-number="10">
</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base03)">// take the most conservative between the parent and loader, otherwise</span>
</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base03)">// we'll be too aggressive for one of them.</span>
</span><span class="codeblock-line" data-line-number="13">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">maxAge</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base09)">Math</span>.<span style="color: var(--base0D)">min</span>(
</span><span class="codeblock-line" data-line-number="14">    <span style="color: var(--base08)">loaderCache</span>["<span style="color: var(--base0B)">max-age</span>"],
</span><span class="codeblock-line" data-line-number="15">    <span style="color: var(--base08)">parentCache</span>["<span style="color: var(--base0B)">max-age</span>"]
</span><span class="codeblock-line" data-line-number="16">  );
</span><span class="codeblock-line" data-line-number="17">
</span><span class="codeblock-line" data-line-number="18">  <span style="color: var(--base0E)">return</span> {
</span><span class="codeblock-line" data-line-number="19">    "<span style="color: var(--base0B)">Cache-Control</span>": `<span style="color: var(--base0B)">max-age=</span>${<span style="color: var(--base08)">maxAge</span>}`
</span><span class="codeblock-line" data-line-number="20">  };
</span><span class="codeblock-line" data-line-number="21">}
</span></code></pre></div><p>All that said, you can avoid this entire problem by <em>not defining headers in parent routes</em> and only in leaf routes. Every layout that can be visited directly will likely have an "index route". If you only define headers on your leaf routes, not your parent routes, you will never have to worry about merging headers.</p><h3 id="meta"><a href="conventions.html#meta" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>meta</code></h3><p>The meta export will set meta tags for your html document. We highly recommend setting the title and description on every route besides layout routes (their index route will set the meta).</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">MetaFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">meta</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">MetaFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0E)">return</span> {
</span><span class="codeblock-line" data-line-number="5">    title: "<span style="color: var(--base0B)">Something cool</span>",
</span><span class="codeblock-line" data-line-number="6">    description:
</span><span class="codeblock-line" data-line-number="7">      "<span style="color: var(--base0B)">This becomes the nice preview on search results.</span>"
</span><span class="codeblock-line" data-line-number="8">  };
</span><span class="codeblock-line" data-line-number="9">};
</span></code></pre></div><p>There are a few special cases like <code>title</code> renders a <code>&#x3C;title></code> tag, <code>og:style</code> tags will render <code>&#x3C;meta property content></code>, the rest render <code>&#x3C;meta name={key} content={value}/></code>.</p><p>In the case of nested routes, the meta tags are merged automatically, so parent routes can add meta tags without the child routes needing to copy them.</p><h3 id="links"><a href="conventions.html#links" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>links</code></h3><p>The links function defines which <code>&#x3C;link></code> elements to add to the page when the user visits a route.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">LinksFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">links</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LinksFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0E)">return</span> [
</span><span class="codeblock-line" data-line-number="5">    {
</span><span class="codeblock-line" data-line-number="6">      rel: "<span style="color: var(--base0B)">icon</span>",
</span><span class="codeblock-line" data-line-number="7">      href: "<span style="color: var(--base0B)">/favicon.png</span>",
</span><span class="codeblock-line" data-line-number="8">      type: "<span style="color: var(--base0B)">image/png</span>"
</span><span class="codeblock-line" data-line-number="9">    },
</span><span class="codeblock-line" data-line-number="10">    {
</span><span class="codeblock-line" data-line-number="11">      rel: "<span style="color: var(--base0B)">stylesheet</span>",
</span><span class="codeblock-line" data-line-number="12">      href: "<span style="color: var(--base0B)">https://example.com/some/styles.css</span>"
</span><span class="codeblock-line" data-line-number="13">    },
</span><span class="codeblock-line" data-line-number="14">    { page: "<span style="color: var(--base0B)">/users/123</span>" },
</span><span class="codeblock-line" data-line-number="15">    {
</span><span class="codeblock-line" data-line-number="16">      rel: "<span style="color: var(--base0B)">preload</span>",
</span><span class="codeblock-line" data-line-number="17">      href: "<span style="color: var(--base0B)">/images/banner.jpg</span>",
</span><span class="codeblock-line" data-line-number="18">      as: "<span style="color: var(--base0B)">image</span>"
</span><span class="codeblock-line" data-line-number="19">    }
</span><span class="codeblock-line" data-line-number="20">  ];
</span><span class="codeblock-line" data-line-number="21">};
</span></code></pre></div><p>There are two types of link descriptors you can return:</p><h4 id="htmllinkdescriptor"><a href="conventions.html#htmllinkdescriptor" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>HtmlLinkDescriptor</code></h4><p>This is an object representation of a normal <code>&#x3C;link {...props} /></code> element. [View the MDN docs for the link API][link-tag].</p><p>The <code>links</code> export from a route should return an array of <code>HtmlLinkDescriptor</code> objects.</p><p>Examples:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">LinksFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">stylesHref</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">../styles/something.css</span>";
</span><span class="codeblock-line" data-line-number="3">
</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">links</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LinksFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> [
</span><span class="codeblock-line" data-line-number="6">    <span style="color: var(--base03)">// add a favicon</span>
</span><span class="codeblock-line" data-line-number="7">    {
</span><span class="codeblock-line" data-line-number="8">      rel: "<span style="color: var(--base0B)">icon</span>",
</span><span class="codeblock-line" data-line-number="9">      href: "<span style="color: var(--base0B)">/favicon.png</span>",
</span><span class="codeblock-line" data-line-number="10">      type: "<span style="color: var(--base0B)">image/png</span>"
</span><span class="codeblock-line" data-line-number="11">    },
</span><span class="codeblock-line" data-line-number="12">
</span><span class="codeblock-line" data-line-number="13">    <span style="color: var(--base03)">// add an external stylesheet</span>
</span><span class="codeblock-line" data-line-number="14">    {
</span><span class="codeblock-line" data-line-number="15">      rel: "<span style="color: var(--base0B)">stylesheet</span>",
</span><span class="codeblock-line" data-line-number="16">      href: "<span style="color: var(--base0B)">https://example.com/some/styles.css</span>",
</span><span class="codeblock-line" data-line-number="17">      crossOrigin: "<span style="color: var(--base0B)">true</span>"
</span><span class="codeblock-line" data-line-number="18">    },
</span><span class="codeblock-line" data-line-number="19">
</span><span class="codeblock-line" data-line-number="20">    <span style="color: var(--base03)">// add a local stylesheet, remix will fingerprint the file name for</span>
</span><span class="codeblock-line" data-line-number="21">    <span style="color: var(--base03)">// production caching</span>
</span><span class="codeblock-line" data-line-number="22">    { rel: "<span style="color: var(--base0B)">stylesheet</span>", href: <span style="color: var(--base08)">stylesHref</span> },
</span><span class="codeblock-line" data-line-number="23">
</span><span class="codeblock-line" data-line-number="24">    <span style="color: var(--base03)">// prefetch an image into the browser cache that the user is likely to see</span>
</span><span class="codeblock-line" data-line-number="25">    <span style="color: var(--base03)">// as they interact with this page, perhaps they click a button to reveal in</span>
</span><span class="codeblock-line" data-line-number="26">    <span style="color: var(--base03)">// a summary/details element</span>
</span><span class="codeblock-line" data-line-number="27">    {
</span><span class="codeblock-line" data-line-number="28">      rel: "<span style="color: var(--base0B)">prefetch</span>",
</span><span class="codeblock-line" data-line-number="29">      as: "<span style="color: var(--base0B)">image</span>",
</span><span class="codeblock-line" data-line-number="30">      href: "<span style="color: var(--base0B)">/img/bunny.jpg</span>"
</span><span class="codeblock-line" data-line-number="31">    },
</span><span class="codeblock-line" data-line-number="32">
</span><span class="codeblock-line" data-line-number="33">    <span style="color: var(--base03)">// only prefetch it if they're on a bigger screen</span>
</span><span class="codeblock-line" data-line-number="34">    {
</span><span class="codeblock-line" data-line-number="35">      rel: "<span style="color: var(--base0B)">prefetch</span>",
</span><span class="codeblock-line" data-line-number="36">      as: "<span style="color: var(--base0B)">image</span>",
</span><span class="codeblock-line" data-line-number="37">      href: "<span style="color: var(--base0B)">/img/bunny.jpg</span>",
</span><span class="codeblock-line" data-line-number="38">      media: "<span style="color: var(--base0B)">(min-width: 1000px)</span>"
</span><span class="codeblock-line" data-line-number="39">    }
</span><span class="codeblock-line" data-line-number="40">  ];
</span><span class="codeblock-line" data-line-number="41">};
</span></code></pre></div><h4 id="htmlmetadescriptor"><a href="conventions.html#htmlmetadescriptor" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>HtmlMetaDescriptor</h4><p>This is an object representation and abstraction of a <code>&#x3C;meta {...props} /></code> element and its attributes. <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta">View the MDN docs for the meta API</a>.</p><p>The <code>meta</code> export from a route should return a single <code>HtmlMetaDescriptor</code> object.</p><p>Almost every <code>meta</code> element takes a <code>name</code> and <code>content</code> attribute, with the exception of <a href="https://ogp.me/">OpenGraph tags</a> which use <code>property</code> instead of <code>name</code>. In either case, the attributes represent a key/value pair for each tag. Each pair in the <code>HtmlMetaDescriptor</code> object represents a separate <code>meta</code> element, and Remix maps each to the correct attributes for that tag.</p><p>The <code>meta</code> object can also hold a <code>title</code> reference which maps to the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/title">HTML <code>&#x3C;title></code> element</a></p><p>Examples:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">MetaFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">meta</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">MetaFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0E)">return</span> {
</span><span class="codeblock-line" data-line-number="5">    title: "<span style="color: var(--base0B)">Josie's Shake Shack</span>", <span style="color: var(--base03)">// &#x3C;title>Josie's Shake Shack&#x3C;/title></span>
</span><span class="codeblock-line" data-line-number="6">    description: "<span style="color: var(--base0B)">Delicious shakes</span>", <span style="color: var(--base03)">// &#x3C;meta name="description" content="Delicious shakes"></span>
</span><span class="codeblock-line" data-line-number="7">    "<span style="color: var(--base0B)">og:image</span>": "<span style="color: var(--base0B)">https://josiesshakeshack.com/logo.jpg</span>" <span style="color: var(--base03)">// &#x3C;meta property="og:image" content="https://josiesshakeshack.com/logo.jpg"></span>
</span><span class="codeblock-line" data-line-number="8">  };
</span><span class="codeblock-line" data-line-number="9">};
</span></code></pre></div><h4 id="pagelinkdescriptor"><a href="conventions.html#pagelinkdescriptor" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>PageLinkDescriptor</code></h4><p>These descriptors allow you to prefetch the resources for a page the user is likely to navigate to. While this API is useful, you might get more mileage out of <code>&#x3C;Link prefetch="render"></code> instead. But if you'd like, you can get the same behavior with this API.</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">links</span>() {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> [{ page: "<span style="color: var(--base0B)">/posts/public</span>" }];
</span><span class="codeblock-line" data-line-number="3">}
</span></code></pre></div><p>This load up the JavaScript modules, loader data, and the stylesheets (defined in the <code>links</code> exports of the next routes) into the browser cache before the user even navigates there.</p><p><docs-warning>Be careful with this feature. You don't want to download 10MB of JavaScript and data for pages the user probably won't ever visit.</docs-warning></p><h3 id="catchboundary"><a href="conventions.html#catchboundary" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>CatchBoundary</h3><p>A <code>CatchBoundary</code> is a React component that renders whenever an action or loader throws a <code>Response</code>.</p><p><strong>Note:</strong> We use the word "catch" to represent the codepath taken when a <code>Response</code> type is thrown; you thought about bailing from the "happy path". This is different from an uncaught error you did not expect to occur.</p><p>A Remix <code>CatchBoundary</code> component works just like a route component, but instead of <code>useLoaderData</code> you have access to <code>useCatch</code>. When a response is thrown in an action or loader, the <code>CatchBoundary</code> will be rendered in it's place, nested inside parent routes.</p><p>A <code>CatchBoundary</code> component has access to the status code and thrown response data through <code>useCatch</code>.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">useCatch</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">CatchBoundary</span>() {
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">caught</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useCatch</span>();
</span><span class="codeblock-line" data-line-number="5">
</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="7">    &#x3C;<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="8">      &#x3C;<span style="color: var(--base08)">h1</span>>Caught&#x3C;/<span style="color: var(--base08)">h1</span>>
</span><span class="codeblock-line" data-line-number="9">      &#x3C;<span style="color: var(--base08)">p</span>>Status: <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">caught</span>.<span style="color: var(--base08)">status</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="10">      &#x3C;<span style="color: var(--base08)">pre</span>>
</span><span class="codeblock-line" data-line-number="11">        &#x3C;<span style="color: var(--base08)">code</span>><span style="color: var(--base0F)">{</span><span style="color: var(--base09)">JSON</span>.<span style="color: var(--base0D)">stringify</span>(<span style="color: var(--base08)">caught</span>.<span style="color: var(--base08)">data</span>, <span style="color: var(--base09)">null</span>, <span style="color: var(--base09)">2</span>)<span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">code</span>>
</span><span class="codeblock-line" data-line-number="12">      &#x3C;/<span style="color: var(--base08)">pre</span>>
</span><span class="codeblock-line" data-line-number="13">    &#x3C;/<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="14">  );
</span><span class="codeblock-line" data-line-number="15">}
</span></code></pre></div><h3 id="errorboundary"><a href="conventions.html#errorboundary" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>ErrorBoundary</h3><p>An <code>ErrorBoundary</code> is a React component that renders whenever there is an error anywhere on the route, either during rendering or during data loading.</p><p><strong>Note:</strong> We use the word "error" to mean an uncaught exception; something you didn't anticipate happening. This is different from other types of "errors" that you are able to recover from easily, for example a 404 error where you can still show something in the user interface to indicate you weren't able to find some data.</p><p>A Remix <code>ErrorBoundary</code> component works just like normal React <a href="https://reactjs.org/docs/error-boundaries.html">error boundaries</a>, but with a few extra capabilities. When there is an error in your route component, the <code>ErrorBoundary</code> will be rendered in its place, nested inside any parent routes. <code>ErrorBoundary</code> components also render when there is an error in the <code>loader</code> or <code>action</code> functions for a route, so all errors for that route may be handled in one spot.</p><p>An <code>ErrorBoundary</code> component receives one prop: the <code>error</code> that occurred.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">ErrorBoundary</span>({ <span style="color: var(--base08)">error</span> }) {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="4">      &#x3C;<span style="color: var(--base08)">h1</span>>Error&#x3C;/<span style="color: var(--base08)">h1</span>>
</span><span class="codeblock-line" data-line-number="5">      &#x3C;<span style="color: var(--base08)">p</span>><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">error</span>.<span style="color: var(--base08)">message</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="6">      &#x3C;<span style="color: var(--base08)">p</span>>The stack trace is:&#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="7">      &#x3C;<span style="color: var(--base08)">pre</span>><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">error</span>.<span style="color: var(--base08)">stack</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">pre</span>>
</span><span class="codeblock-line" data-line-number="8">    &#x3C;/<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="9">  );
</span><span class="codeblock-line" data-line-number="10">}
</span></code></pre></div><h3 id="handle"><a href="conventions.html#handle" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>handle</h3><p>Exporting a handle allows you to create application conventions with the <code>useMatches()</code> hook. You can put whatever values you want on it:</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">handle</span> <span style="color: var(--base0E)">=</span> {
</span><span class="codeblock-line" data-line-number="2">  its: "<span style="color: var(--base0B)">all yours</span>"
</span><span class="codeblock-line" data-line-number="3">};
</span></code></pre></div><p>This is almost always used on conjunction with <code>useMatches</code>. To see what kinds of things you can do with it, refer to <a href="https://remix.run/docs/en/v1.0.4/remix/#usematches"><code>useMatches</code></a> for more information.</p><h3 id="unstable_shouldreload"><a href="conventions.html#unstable_shouldreload" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>unstable_shouldReload</h3><p><docs-warning>This API is unstable, we're confident in the use cases it solves but aren't sure about the API yet, it may change in the future.</docs-warning></p><p><docs-warning>This feature is an <i>additional</i> optimization. In general, Remix's design does a great job of only calling the loaders that the next page needs and ensuring your UI is in sync with your server. When you use this feature you risk your UI getting out of sync with your server. Use with caution!</docs-warning></p><p>This function lets apps optimize which routes should be reloaded on some client side transitions.</p><div><pre data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">ShouldReloadFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">let</span> <span style="color: var(--base0D)">unstable_shouldReload</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">ShouldReloadFunction</span> <span style="color: var(--base0E)">=</span> ({
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base03)">// same params that go to `loader` and `action`</span>
</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base08)">params</span>,
</span><span class="codeblock-line" data-line-number="6">
</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base03)">// a possible form submission that caused this to be reloaded</span>
</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base08)">submission</span>,
</span><span class="codeblock-line" data-line-number="9">
</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base03)">// the next URL being used to render this page</span>
</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base08)">url</span>,
</span><span class="codeblock-line" data-line-number="12">
</span><span class="codeblock-line" data-line-number="13">  <span style="color: var(--base03)">// the previous URL used to render this page</span>
</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base08)">prevUrl</span>
</span><span class="codeblock-line" data-line-number="15">}) <span style="color: var(--base0D)">=></span> <span style="color: var(--base09)">false</span>; <span style="color: var(--base03)">// or `true`;</span>
</span></code></pre></div><p>During client side transitions, Remix will optimize reloading of routes that are already rendering, like not reloading layout routes that aren't changing. In other cases, like form submissions or search param changes, Remix doesn't know which routes need to be reloaded so it reloads them all to be safe. This ensures data mutations from the submission or changes in the search params are reflected across the entire page.</p><p>This function lets apps further optimize by returning <code>false</code> when Remix is about to reload a route. There are three cases when Remix will reload a route and you have the opportunity to optimize:</p><ul>
<li>if the <code>url.search</code> changes (while the <code>url.pathname</code> is the same)</li>
<li>after actions are called</li>
<li>"refresh" link clicks (click link to same URL)</li>
</ul><p>Otherwise Remix will reload the route and you have no choice:</p><ul>
<li>A route matches the new URL that didn't match before</li>
<li>The <code>url.pathname</code> changed (including route params)</li>
</ul><p>Here are a couple of common use-cases:</p><h4 id="never-reloading-the-root"><a href="conventions.html#never-reloading-the-root" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Never reloading the root</h4><p>It's common for root loaders to return data that never changes, like environment variables to be sent to the client app. In these cases you never need the root loader to be called again. For this case, you can simply <code>return false</code>.</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> {
</span><span class="codeblock-line" data-line-number="3">    ENV: {
</span><span class="codeblock-line" data-line-number="4">      CLOUDINARY_ACCT: <span style="color: var(--base08)">process</span>.<span style="color: var(--base0D)">env</span>.<span style="color: var(--base08)">CLOUDINARY_ACCT</span>,
</span><span class="codeblock-line" data-line-number="5">      STRIPE_PUBLIC_KEY: <span style="color: var(--base08)">process</span>.<span style="color: var(--base0D)">env</span>.<span style="color: var(--base08)">STRIPE_PUBLIC_KEY</span>
</span><span class="codeblock-line" data-line-number="6">    }
</span><span class="codeblock-line" data-line-number="7">  };
</span><span class="codeblock-line" data-line-number="8">};
</span><span class="codeblock-line" data-line-number="9">
</span><span class="codeblock-line" data-highlight="true" data-line-number="10"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">unstable_shouldReload</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> <span style="color: var(--base09)">false</span>;
</span></code></pre></div><p>With this in place, Remix will no longer make a request to your root loader for any reason, not after form submissions, not after search param changes, etc.</p><h4 id="ignoring-search-params"><a href="conventions.html#ignoring-search-params" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Ignoring search params</h4><p>Another common case is when you've got nested routes and a child component has a feature that uses the search params in the URL, like a search page or some tabs with state you want to keep in the search params.</p><p>Consider these routes:</p><pre><code>└── $projectId.tsx
    └── activity.tsx
</code></pre><p>And lets say the UI looks something like this:</p><pre><code>┌──────────────────────────────┐
│    Project: Design Revamp    │
├────────┬─────────┬───────────┤
│  Tasks │ Collabs │ >ACTIVITY │
├────────┴─────────┴───────────┤
│  Search: _____________       │
│                              │
│  - Ryan added an image       │
│                              │
│  - Michael commented         │
│                              │
└──────────────────────────────┘
</code></pre><p>The <code>$activity.tsx</code> loader can use the search params to filter the list, so visiting a URL like <code>/projects/design-revamp/activity?search=image</code> could filter the list of results. Maybe it looks something like this:</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">loader</span>({ <span style="color: var(--base08)">request</span>, <span style="color: var(--base08)">params</span> }) {
</span><span class="codeblock-line" data-highlight="true" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">url</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">URLSearchParams</span>(<span style="color: var(--base08)">request</span>.<span style="color: var(--base08)">url</span>);
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">exampleDb</span>.<span style="color: var(--base0D)">activity</span>.<span style="color: var(--base0D)">findAll</span>({
</span><span class="codeblock-line" data-line-number="4">    where: {
</span><span class="codeblock-line" data-line-number="5">      projectId: <span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">projectId</span>,
</span><span class="codeblock-line" data-line-number="6">      name: {
</span><span class="codeblock-line" data-highlight="true" data-line-number="7">        contains: <span style="color: var(--base08)">url</span>.<span style="color: var(--base0D)">searchParams</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">search</span>")
</span><span class="codeblock-line" data-line-number="8">      }
</span><span class="codeblock-line" data-line-number="9">    }
</span><span class="codeblock-line" data-line-number="10">  });
</span><span class="codeblock-line" data-line-number="11">}
</span></code></pre></div><p>This is great for the activity route, but Remix doesn't know if the parent loader, <code>$projectId.tsx</code> <em>also</em> cares about the search params. That's why Remix does the safest thing and reloads all the routes on the page when the search params change.</p><p>In this UI, that's wasted bandwidth for the user, your server, and your database because <code>$projectId.tsx</code> doesn't use the search params. Consider that our loader for <code>$projectId.tsx</code> looks something like this:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">loader</span>({ <span style="color: var(--base08)">params</span> }) {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">fakedb</span>.<span style="color: var(--base0D)">findProject</span>(<span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">projectId</span>);
</span><span class="codeblock-line" data-line-number="3">}
</span></code></pre></div><p>We want this loader to be called only if the project has had an update, so we can make this really simple and just say to reload if there is a non-GET submission:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">unstable_shouldReload</span>({ <span style="color: var(--base08)">submission</span> }) {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">submission</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> <span style="color: var(--base08)">submission</span>.<span style="color: var(--base08)">method</span> <span style="color: var(--base0E)">!==</span> "<span style="color: var(--base0B)">GET</span>";
</span><span class="codeblock-line" data-line-number="3">}
</span></code></pre></div><p>Now if the child route causes the search params to change, this route will no longer be reloaded because there was no submission.</p><p><docs-info>When you want to optimize a loader, instead of thinking about the thing causing the reload (search params), think only about the loader's requirements that you're optimizing.</docs-info></p><p>You may want to get more granular and reload only for submissions to this project:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">unstable_shouldReload</span>({
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base08)">params</span>,
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base08)">submission</span>
</span><span class="codeblock-line" data-line-number="4">}) {
</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="6">    <span style="color: var(--base08)">submission</span> <span style="color: var(--base0E)">&#x26;&#x26;</span>
</span><span class="codeblock-line" data-line-number="7">    <span style="color: var(--base08)">submission</span>.<span style="color: var(--base08)">action</span> <span style="color: var(--base0E)">===</span> `<span style="color: var(--base0B)">/projects/</span>${<span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">projectId</span>}`
</span><span class="codeblock-line" data-line-number="8">  );
</span><span class="codeblock-line" data-line-number="9">}
</span></code></pre></div><p>You need to be very careful here, though. That project (or its nested relationships) may be updated by other actions and your app will get out of sync if you don't also consider them.</p><h2 id="asset-url-imports"><a href="conventions.html#asset-url-imports" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Asset URL Imports</h2><p>Any files inside the <code>app</code> folder can be imported into your modules. Remix will:</p><ol>
<li>Copy the file to your browser build directory</li>
<li>Fingerprint the file for long-term caching</li>
<li>Return the public URL to your module to be used while rendering</li>
</ol><p>It's most common for stylesheets, but can used for anything.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base03)">// root.tsx</span>
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">LinksFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">styles</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">./styles/app.css</span>";
</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">banner</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">./images/banner.jpg</span>";
</span><span class="codeblock-line" data-line-number="5">
</span><span class="codeblock-line" data-line-number="6"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">links</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LinksFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0E)">return</span> [{ rel: "<span style="color: var(--base0B)">stylesheet</span>", href: <span style="color: var(--base08)">styles</span> }];
</span><span class="codeblock-line" data-line-number="8">};
</span><span class="codeblock-line" data-line-number="9">
</span><span class="codeblock-line" data-line-number="10"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">Page</span>() {
</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="12">    &#x3C;<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="13">      &#x3C;<span style="color: var(--base08)">h1</span>>Some Page&#x3C;/<span style="color: var(--base08)">h1</span>>
</span><span class="codeblock-line" data-line-number="14">      &#x3C;<span style="color: var(--base08)">img</span> <span style="color: var(--base0D)">src</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">banner</span><span style="color: var(--base0F)">}</span> />
</span><span class="codeblock-line" data-line-number="15">    &#x3C;/<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="16">  );
</span><span class="codeblock-line" data-line-number="17">}
</span></code></pre></div></div></div>
</div><div class="h-[90vh]"></div></div></div></div></div><script>
          if (!window.history.state || !window.history.state.key) {
            window.history.replaceState({ key: Math.random().toString(32).slice(2) }, null);
          }
          let STORAGE_KEY = "positions";
          try {
            let positions = JSON.parse(sessionStorage.getItem("positions") ?? '{}')
            let storedY = positions[window.history.state.key];
            if (typeof storedY === 'number') {
              window.scrollTo(0, storedY)
            }
          } catch(error) {
            console.error(error)
            sessionStorage.removeItem(STORAGE_KEY)
          }
        </script><link rel="modulepreload" href="../../../../build/_shared/chunk-N3KPM2EV.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-YTGA4KPU.js"/><link rel="modulepreload" href="../../../../build/root-63J2OI5O.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-GWT4HVMK.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-WV7HFGSM.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-43DMIVRF.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-AYAFUZYC.js"/><link rel="modulepreload" href="../../../../build/routes/docs/$lang.$version-WDGSSTHQ.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-CXMLCDHV.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-TEGZ72RU.js"/><link rel="modulepreload" href="../../../../build/routes/docs/$lang.$version/$-XTVJBAXD.js"/><script>window.__remixContext = {'matches':[{'params':{'lang':'en','version':'v1','*':'api/conventions'},'pathname':'/','route':{'id':'root','path':'','module':'/build/root-63J2OI5O.js','hasAction':false,'hasLoader':true,'hasCatchBoundary':true,'hasErrorBoundary':true}},{'params':{'lang':'en','version':'v1','*':'api/conventions'},'pathname':'/docs/en/v1','route':{'id':'routes/docs/$lang.$version','parentId':'root','path':'docs/:lang/:version','module':'/build/routes/docs/$lang.$version-WDGSSTHQ.js','imports':['/build/_shared/chunk-GWT4HVMK.js','/build/_shared/chunk-WV7HFGSM.js','/build/_shared/chunk-43DMIVRF.js','/build/_shared/chunk-AYAFUZYC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false}},{'params':{'lang':'en','version':'v1','*':'api/conventions'},'pathname':'/docs/en/v1/api/conventions','route':{'id':'routes/docs/$lang.$version/$','parentId':'routes/docs/$lang.$version','path':'*','module':'/build/routes/docs/$lang.$version/$-XTVJBAXD.js','imports':['/build/_shared/chunk-CXMLCDHV.js','/build/_shared/chunk-TEGZ72RU.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false}}],'componentDidCatchEmulator':{'trackBoundaries':true,'trackCatchBoundaries':true,'catchBoundaryRouteId':'root','renderBoundaryRouteId':null,'loaderBoundaryRouteId':'root','error':undefined,'catch':undefined},'routeData':{'root':{'noIndex':false},'routes/docs/$lang.$version':[{'slug':'/api','title':'API','hasContent':false,'order':3,'disabled':false,'children':[{'slug':'/api/conventions','title':'Conventions','hasContent':true,'order':1,'disabled':false,'children':[]},{'slug':'/api/remix','title':'Remix Package','hasContent':true,'order':2,'disabled':false,'children':[]}]},{'slug':'/contributing','title':'Contributing','hasContent':true,'order':6,'disabled':false,'children':[]},{'slug':'/guides','title':'Guides','hasContent':false,'order':5,'disabled':false,'children':[{'slug':'/guides/accessibility','title':'Accessibility','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/api-routes','title':'API Routes','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/data-writes','title':'Data Writes','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/deployment','title':'Deployment','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/disabling-javascript','title':'Disabling JavaScript','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/envvars','title':'Environment Variables','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/errors','title':'Error Handling','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/mdx','title':'MDX','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/not-found','title':'Not Found Handling','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/optimistic-ui','title':'Optimistic UI','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/performance','title':'Performance','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/philosophy','title':'Philosophy','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/resource-routes','title':'Resource Routes','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/routing','title':'Routing','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/styling','title':'Styling','hasContent':true,'order':null,'disabled':false,'children':[]}]},{'slug':'/other-api','title':'Other API','hasContent':false,'order':4,'disabled':false,'children':[{'slug':'/other-api/adapter','title':'@remix-run/{adapter}','hasContent':true,'order':2,'disabled':false,'children':[]},{'slug':'/other-api/constraints','title':'Module Constraints','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/other-api/dev','title':'@remix-run/dev (CLI)','hasContent':true,'order':1,'disabled':false,'children':[]},{'slug':'/other-api/fetch','title':'Web Fetch API','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/other-api/node','title':'@remix-run/node','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/other-api/react-router','title':'React Router v6','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/other-api/serve','title':'@remix-run/serve','hasContent':true,'order':null,'disabled':false,'children':[]}]},{'slug':'/tutorials','title':'Tutorials','hasContent':false,'order':2,'disabled':false,'children':[{'slug':'/tutorials/blog','title':'Developer Blog','hasContent':true,'order':1,'disabled':false,'children':[]},{'slug':'/tutorials/jokes','title':'Jokes App','hasContent':true,'order':2,'disabled':false,'children':[]}]}],'routes/docs/$lang.$version/$':{'id':'ckwdu8npe0004f0ez7bypf3g0','filePath':'/api/conventions.md','md':'\n# Conventions\n\nA lot of Remix APIs aren\'t imported from the `"remix"` package, but are instead conventions and exports from _your_ application modules. When you `import from "remix"`, _you are calling Remix_, but these APIs are when _Remix calls your code_.\n\n## remix.config.js\n\nThis file has a few build and development configuration options, but does not actually run on your server.\n\n```tsx filename=remix.config.js\nmodule.exports = {\n  appDirectory: "app",\n  browserBuildDirectory: "public/build",\n  devServerPort: 8002,\n  publicPath: "/build/",\n  serverBuildDirectory: "build",\n  routes(defineRoutes) {\n    return defineRoute(route => {\n      route("/somewhere/cool/*", "catchall.tsx");\n    });\n  }\n};\n```\n\n### appDirectory\n\nThe path to the `app` directory, relative to remix.config.js. Defaults to "app".\n\n```js\n// default\nexports.appDirectory = "./app";\n\n// custom\nexports.appDirectory = "./elsewhere";\n```\n\n### routes\n\nA function for defining custom routes, in addition to those already defined\nusing the filesystem convention in `app/routes`. Both sets of routes will be merged.\n\n```tsx\nexports.routes = async (defineRoutes) => {\n  // If you need to do async work, do it before calling `defineRoutes`, we use\n  // the call stack of `route` inside to set nesting.\n\n  return defineRoutes((route) => {\n    // A common use for this is catchall routes.\n    // - The first argument is the React Router path to match against\n    // - The second is the relative filename of the route handler\n    route("/some/path/*", "catchall.tsx")\n\n    // if you want to nest routes, use the optional callback argument\n    route("some/:path", "some/route/file.js", () => {\n      // - path is relative to parent path\n      // - filenames are still relative to the app directory\n      route("relative/path", "some/other/file")\n    });\n\n  }\n}\n```\n\n### browserBuildDirectory\n\nThe path to the browser build, relative to remix.config.js. Defaults to "public/build". Should be deployed to static hosting.\n\n### publicPath\n\nThe URL prefix of the browser build with a trailing slash. Defaults to "/build/". This is the path the browser will use to find assets.\n\n### serverBuildDirectory\n\nThe path to the server build, relative to remix.config.js. Defaults to "build". This needs to be deployed to your server.\n\n### devServerPort\n\nThe port number to use for the dev server. Defaults to 8002.\n\n## File Name Conventions\n\nThere are a few conventions that Remix uses you should be aware of.\n\n### Special Files\n\n- **`remix.config.js`**: Remix uses this file to know how to build your app for production and run it in development. This file is required.\n- **`app/entry.server.{js,jsx,ts,tsx}`**: This is your entry into the server rendering piece of Remix. This file is required.\n- **`app/entry.client.{js,jsx,ts,tsx}`**: This is your entry into the browser rendering/hydration piece of Remix. This file is required.\n\n### Route Filenames\n\n- **`app/root.tsx`**: This is your root layout, or "root route" (very sorry for those of you who pronounce those words the same way!). It works just like all other routes: you can export a `loader`, `action`, etc.\n- **`app/routes/*.{js,jsx,ts,tsx,md,mdx}`**: Any files in the `app/routes/` directory will become routes in your application. Remix supports all of those extensions.\n- **`app/routes/{folder}/*.tsx`**: Folders inside of routes will create nested URLs.\n- **`app/routes/{folder}` with `app/routes/{folder}.tsx`**: When a route has the same name as a folder, it becomes a "layout route" for the child routes inside the folder. Render an `<Outlet />` and the child routes will appear there. This is how you can have multiple levels of persistent layout nesting associated with URLs.\n- **Dots in route filesnames**: Adding a `.` in a route file will create a nested URL, but not a nested layout. Flat files are flat layouts, nested files are nested layouts. The `.` allows you to create nested URLs without needing to create a bunch of layouts. For example: `app/routes/some.long.url.tsx` will create the URL `/some/long/url`.\n- **`app/routes/index.tsx`**: Routes named "index" will render when the parent layout route\'s path is matched exactly.\n- **`$param`**: The dollar sign denotes a dynamic segment of the URL. It will be parsed and passed to your loaders and routes.\n\n  For example: `app/routes/users/$userId.tsx` will match the following URLs: `users/123` and `users/abc` but not `users/123/abc` because that has too many segments. See the <Link to="../routing">routing guide</Link> for more information.\n\n  Some CLIs require you to escape the \\$ when creating files:\n\n  ```bash\n  touch routes/\\$params.tsx\n  ```\n\n  Params can be nested routes, just create a folder with the `$` in it.\n\n- **`app/routes/files/$.tsx`**: To add a "splat" path (some people call this a "catchall") name the file simply `$.tsx`. It will create a route path pattern like `files/*`. You can also use this along with dot file names: `app/routes/files.$.tsx`.\n\n- **`app/routes/__some-layout/some-path.tsx`**: Prefixing a folder with `__` will create a "layout route". Layout routes are routes that don\'t add anything to the URL for matching, but do add nested components in the tree for layouts. Make sure to also have `__some-layout.tsx` as well. For example, all of your marketing pages could share a layout in the route tree with `app/routes/__marketing.tsx` as the layout and then all of the child routes go in `app/routes/__marketing/products.tsx` and `app/routes/__marketing/buy.tsx`. The `__marketing.tsx` route won\'t add any segments to the URL, but it will render when it\'s child routes match.\n\n### Escaping special characters\n\nBecause some characters have special meaning, you must use our escaping syntax if you want those characters to actually appear in the route. For example, if I wanted to make a [Resource Route](../guides/resource-routes) for a `/sitemap.xml`, I could name the file `app/routes/[sitemap.xml].tsx`. So you simply wrap any part of the filename with brackets and that will escape any special characters.\n\n<docs-info>\n  Note, you could even do `app/routes/sitemap[.]xml.tsx` if you wanted to only wrap the part that needs to be escaped. It makes no difference. Choose the one you like best.\n</docs-info>\n\n## Entry Files\n\n### entry.client.tsx\n\nRemix uses `app/entry.client.tsx` as the entry point for the browser bundle. This module gives you full control over the "hydrate" step after JavaScript loads into the document.\n\nTypically this module uses `ReactDOM.hydrate` to re-hydrate the markup that was already generated on the server in your [server entry module](../entry.server).\n\nHere\'s a basic example:\n\n```tsx\nimport ReactDOM from "react-dom";\nimport Remix from "@remix-run/react/browser";\n\nReactDOM.hydrate(<Remix />, document);\n```\n\nAs you can see, you have full control over hydration. This is the first piece of code that runs in the browser. As you can see, you have full control here. You can initialize client side libraries, setup things like `window.history.scrollRestoration`, etc.\n\n### entry.server.tsx\n\nRemix uses `app/entry.server.tsx` to generate the HTTP response when rendering on the server. The `default` export of this module is a function that lets you create the response, including HTTP status, headers, and HTML, giving you full control over the way the markup is generated and sent to the client.\n\nThis module should render the markup for the current page using a `<RemixServer>` element with the `context` and `url` for the current request. This markup will (optionally) be re-hydrated once JavaScript loads in the browser using the [browser entry module]("../entry.client").\n\nYou can also export an optional `handleDataRequest` function that will allow you to modify the response of a data request. These are the requests that do not render HTML, but rather return the loader and action data to the browser once client side hydration has occured.\n\nHere\'s a basic example:\n\n```tsx\nimport ReactDOMServer from "react-dom/server";\nimport type {\n  EntryContext,\n  HandleDataRequestFunction\n} from "remix";\nimport { RemixServer } from "remix";\n\nexport default function handleRequest(\n  request: Request,\n  responseStatusCode: number,\n  responseHeaders: Headers,\n  remixContext: EntryContext\n) {\n  let markup = ReactDOMServer.renderToString(\n    <RemixServer context={remixContext} url={request.url} />\n  );\n\n  responseHeaders.set("Content-Type", "text/html");\n\n  return new Response("<!DOCTYPE html>" + markup, {\n    status: responseStatusCode,\n    headers: responseHeaders\n  });\n}\n\n// this is an optional export\nexport let handleDataRequest: HandleDataRequestFunction = (\n  response: Response,\n  // same args that get passed to the action or loader that was called\n  { request, params, context }\n) => {\n  response.headers.set("x-custom", "yay!");\n  return response;\n};\n```\n\n## Route Module API\n\nA route in Remix is can used for many things. Usually they\u2019re used for the user interface of your app, like a React component with server side lifecycle hooks. But they can also serve as generic routes for any kind of resource (like dynamic CSS or social images).\n\nIt\'s important to read [Route Module Constraints](../constraints/).\n\n### `default` export\n\nThis is the component that will render when the route matches.\n\n```tsx\nexport default function SomeRouteComponent() {\n  return (\n    <div>\n      <h1>Look ma!</h1>\n      <p>I\'m still using React after like 7 years.</p>\n    </div>\n  );\n}\n```\n\n### `loader`\n\nEach route can define a "loader" function that will be called on the server before rendering to provide data to the route.\n\n```tsx\nexport let loader = async () => {\n  return { ok: true };\n};\n\n// Typescript\nimport type { LoaderFunction } from "remix";\nexport let loader: LoaderFunction = async () => {\n  return { ok: true };\n};\n```\n\nThis function is only ever run on the server. On the initial server render it will provide data to the HTML document. On navigations in the browser, Remix will call the function via [`fetch`][fetch]. This means you can talk directly to your database, use server only API secrets, etc. Any code that isn\'t used to render the UI will be removed from the browser bundle.\n\nUsing the database ORM Prisma as an example:\n\n```tsx [1,4-6,9]\nimport { useLoaderData } from "remix";\nimport { prisma } from "../db";\n\nexport let loader = async () => {\n  return prisma.user.findMany();\n};\n\nexport default function Users() {\n  let data = useLoaderData();\n  return (\n    <ul>\n      {data.map(user => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  );\n}\n```\n\nBecause `prisma` is only used in the loader it will be removed from the browser bundle.\n\nRemix polyfills the [Web Fetch API][fetch] on the server so you can use `fetch` inside of your loader as if you were in the browser.\n\n#### loader `params`\n\nRoute params are passed to your loader. If you have a loader at `data/invoices/$invoiceId.tsx` then Remix will parse out the `invoiceId` and pass it to your loader. This is useful for fetching data from an API or database.\n\n```js\n// if the user visits /invoices/123\nexport let loader: LoaderFunction = ({ params }) => {\n  params.invoiceId; // "123"\n};\n```\n\n#### loader `request`\n\nThis is a [Fetch Request][request] instance with information about the request. You can read the MDN docs to see all of it\'s properties.\n\nMost common cases are reading headers or the URL. You can also use this to read URL [URLSearchParams][urlsearchparams] from the request like so:\n\n```tsx\nexport let loader: LoaderFunction = ({ request }) => {\n  // read a cookie\n  let cookie = request.headers.get("Cookie");\n\n  // parse the search params\n  let url = new URL(request.url);\n  let search = url.searchParams.get("search");\n};\n```\n\n#### loader `context`\n\nThis is the context you passed in to your server adapter\'s `getLoadContext()` function. It\'s a way to bridge the gap between the adapter\'s request/response API with your Remix app.\n\n<docs-info>This API is an escape hatch, it\u2019s uncommon to need it</docs-info>\n\nSay your express server (or your serverless function handler) looks something like this:\n\n```js filename=some-express-server.js\nconst {\n  createRequestHandler\n} = require("@remix-run/express");\n\napp.all(\n  "*",\n  createRequestHandler({\n    getLoadContext(req, res) {\n      // this becomes the loader context\n      return { expressUser: req.user };\n    }\n  })\n);\n```\n\nAnd then your loader can access it.\n\n```ts filename=routes/some-route.tsx\nexport let loader: LoaderFunction = ({ context }) => {\n  let { expressUser } = context;\n  // ...\n};\n```\n\n#### Returning objects\n\nYou can return plain JavaScript objects from your loaders that will be made available to your [route modules]("../route-module").\n\n```ts\nexport let loader = async () => {\n  return { whatever: "you want" };\n};\n```\n\n#### Returning Response Instances\n\nWhen you return a plain object, Remix turns it into a [Fetch Response][response]. This means you can return them yourself, too.\n\n```js\nexport let loader: LoaderFunction = async () => {\n  let users = await db.users.findMany();\n  let body = JSON.stringify(users);\n  return new Response(body, {\n    headers: {\n      "Content-Type": "application/json"\n    }\n  });\n};\n```\n\nRemix provides helpers, like `json`, so you don\'t have to construct them yourself:\n\n```tsx\nimport { json } from "remix";\n\nexport let loader: LoaderFunction = async () => {\n  let users = await fakeDb.users.findMany();\n  return json(users);\n};\n```\n\nBetween these two examples you can see how `json` just does a little of work to make your loader a lot cleaner. You usually want to use the `json` helper when you\'re adding headers or a status code to your response:\n\n```tsx\nimport { json } from "remix";\n\nexport let loader: LoaderFunction = async ({ params }) => {\n  let user = await fakeDb.project.findOne({\n    where: { id: params.id }\n  });\n\n  if (!user) {\n    return json("Project not found", { status: 404 });\n  }\n\n  return json(user);\n};\n```\n\nSee also:\n\n- (`headers`)["#headers"]\n- [MDN Response Docs][response]\n\n#### Throwing Responses in Loaders\n\nAlong with returning responses, you can also throw Response objects from your loaders, allowing you to break through the call stack and show an alternate UI with contextual data through the `CatchBoundary`.\n\nHere is a full example showing how you can create utility functions that throw responses to stop code execution in the loader and move over to an alternative UI.\n\n```ts filename=app/db.ts\nimport { json } from "remix";\nimport type { ThrownResponse } from "remix";\n\nexport type InvoiceNotFoundResponse = ThrownResponse<\n  404,\n  string\n>;\n\nexport function getInvoice(id, user) {\n  let invoice = db.invoice.find({ where: { id } });\n  if (invoice === null) {\n    throw json("Not Found", { status: 404 });\n  }\n  return invoice;\n}\n```\n\n```ts filename=app/http.ts\nimport { redirect } from "remix";\nimport { getSession } from "./session";\n\nfunction requireUserSession(request) {\n  let session = await getSession(\n    request.headers.get("cookie")\n  );\n  if (!session) {\n    // can throw our helpers like `redirect` and `json` because they\n    // return responses.\n    throw redirect("/login", 302);\n  }\n  return session.get("user");\n}\n```\n\n```tsx filename=app/routes/invoice/$invoiceId.tsx\nimport { useCatch, useLoaderData } from "remix";\nimport type { ThrownResponse } from "remix";\n\nimport { requireUserSession } from "~/http";\nimport { getInvoice } from "~/db";\nimport type {\n  Invoice,\n  InvoiceNotFoundResponse\n} from "~/db";\n\ntype InvoiceCatchData = {\n  invoiceOwnerEmail: string;\n};\n\ntype ThrownResponses =\n  | InvoiceNotFoundResponse\n  | ThrownResponse<401, InvoiceCatchData>;\n\nexport let loader = async ({ request, params }) => {\n  let user = await requireUserSession(request);\n  let invoice: Invoice = getInvoice(params.invoiceId);\n\n  if (!invoice.userIds.includes(user.id)) {\n    let data: InvoiceCatchData = {\n      invoiceOwnerEmail: invoice.owner.email\n    };\n    throw new json(data, { status: 401 });\n  }\n\n  return invoice;\n};\n\nexport default function InvoiceRoute() {\n  let invoice = useLoaderData<Invoice>();\n  return <InvoiceView invoice={invoice} />;\n}\n\nexport function CatchBoundary() {\n  // this returns { status, statusText, data }\n  let caught = useCatch<ThrownResponses>();\n\n  switch (caught.status) {\n    case 401:\n      return (\n        <div>\n          <p>You don\'t have access to this invoice.</p>\n          <p>\n            Contact {invoiceCatch.data.invoiceOwnerEmail} to\n            get access\n          </p>\n        </div>\n      );\n    case 404:\n      return <div>Invoice not found!</div>;\n  }\n\n  // You could also `throw new Error("Unknown status in catch boundary")`.\n  // This will be caught by the closest `ErrorBoundary`.\n  return (\n    <div>\n      Something went wrong: {invoiceCatch.status}{" "}\n      {invoiceCatch.statusText}\n    </div>\n  );\n}\n```\n\n### `action`\n\nLike `loader`, action is a server only function to handle data mutations and other actions. If a non-GET request is made to your route (POST, PUT, PATCH, DELETE) then the action is called before the loaders.\n\nActions have the the very same API as loaders, the only difference is when they are called.\n\nThis enables you to co-locate everything about a data set in a single route module: the data read, the component that renders the data, and the data writes:\n\n```tsx\nimport { redirect, Form } from "remix";\nimport { fakeGetTodos, fakeCreateTodo } from "~/utils/db";\nimport { TodoList } from "~/components/TodoList";\n\nexport async function loader() {\n  return fakeGetTodos();\n}\n\nexport async function action({ request }) {\n  let body = await request.formData();\n  let todo = await fakeCreateTodo({\n    title: body.get("title")\n  });\n  return redirect(`/todos/${todo.id}`);\n}\n\nexport default function Todos() {\n  let data = useLoaderData();\n  return (\n    <div>\n      <TodoList todos={data} />\n      <Form method="post">\n        <input type="text" name="title" />\n        <button type="submit">Create Todo</button>\n      </Form>\n    </div>\n  );\n}\n```\n\nWhen a POST is made to a URL, multiple routes in your route hierarchy will match the URL. Unlike a GET to loaders, where all of them are called to build the UI, _only one action is called_.\n\n<docs-info>The route called will be the deepest matching route, unless the deepest matching route is an "index route". In this case, it will post to the parent route of the index (because they share the same URL, the parent wins).</docs-info>\n\nIf you want to post to an index route use `?index` in the action: `<Form action="https://remix.run/accounts?index" method="post" />`\n\n| action url        | route action               |\n| ----------------- | -------------------------- |\n| `/accounts?index` | `routes/accounts/index.js` |\n| `/accounts`       | `routes/accounts.js`       |\n\nAlso note that forms without an action prop (`<Form method="post">`) will automatically post to the same route within which they are rendered, so using the `?index` param to disambiguate between parent and index routes is only useful if you\'re posting to an index route from somewhere besides the index route itself. If you\'re posting from the index route to itself, or from the parent route to itselt, you don\'t need to define a `<Form "https://remix.run/docs/en/v1/api/action">` at all, just omit it: `<Form method="post">`.\n\nSee also:\n\n- [`<Form>`][form]\n- [`<Form "https://remix.run/docs/en/v1/api/action">`][form action]\n\n### `headers`\n\nEach route can define it\'s own HTTP headers. One of the common headers is the `Cache-Control` header that indicates to browser and CDN caches where and for how long a page is able to be cached.\n\n```tsx\nexport function headers({ loaderHeaders, parentHeaders }) {\n  return {\n    "X-Stretchy-Pants": "its for fun",\n    "Cache-Control": "max-age=300, s-maxage=3600"\n  };\n}\n```\n\nUsually your data is a better indicator of your cache duration than your route module (data tends to be more dynamic than markup), so the loader\'s headers are passed in to `headers()` too:\n\n```tsx\nexport function headers({ loaderHeaders }) {\n  return {\n    "Cache-Control": loaderHeaders.get("Cache-Control")\n  };\n}\n```\n\nNote: `loaderHeaders` is an instance of the [Web Fetch API][headers] `Headers` class.\n\nBecause Remix has nested routes, there\'s a battle of the headers to be won when nested routes match. In this case, the deepest route wins. Consider these files in the routes directory:\n\n```\n\u251C\u2500\u2500 users.tsx\n\u2514\u2500\u2500 users\n \xA0\xA0 \u251C\u2500\u2500 $userId.tsx\n \xA0\xA0 \u2514\u2500\u2500 $userId\n \xA0\xA0  \xA0\xA0 \u2514\u2500\u2500 profile.tsx\n```\n\nIf we are looking at `/users/123/profile` then three routes are rendering:\n\n```tsx\n<Users>\n  <UserId>\n    <Profile />\n  </UserId>\n</Users>\n```\n\nIf all three define `headers`, the deepest module wins, in this case `profile.tsx`.\n\nWe don\'t want surprise headers in your responses, so it\'s your job to merge them if you\'d like. Remix passes in the `parentHeaders` to your `headers` function. So `users.tsx` headers get passed to `$userId.tsx`, and then `$userId.tsx` headers are passed to `profile.tsx` headers.\n\nThat is all to say that Remix has given you a very large gun with which to shoot your foot. You need to be careful not to send a `Cache-Control` from a child route module that is more aggressive than a parent route. Here\'s some code that picks the least aggressive caching in these cases:\n\n```tsx\nimport parseCacheControl from "parse-cache-control";\n\nexport function headers({ loaderHeaders, parentHeaders }) {\n  let loaderCache = parseCacheControl(\n    loaderHeaders.get("Cache-Control")\n  );\n  let parentCache = parseCacheControl(\n    parentHeaders.get("Cache-Control")\n  );\n\n  // take the most conservative between the parent and loader, otherwise\n  // we\'ll be too aggressive for one of them.\n  let maxAge = Math.min(\n    loaderCache["max-age"],\n    parentCache["max-age"]\n  );\n\n  return {\n    "Cache-Control": `max-age=${maxAge}`\n  };\n}\n```\n\nAll that said, you can avoid this entire problem by _not defining headers in parent routes_ and only in leaf routes. Every layout that can be visited directly will likely have an "index route". If you only define headers on your leaf routes, not your parent routes, you will never have to worry about merging headers.\n\n### `meta`\n\nThe meta export will set meta tags for your html document. We highly recommend setting the title and description on every route besides layout routes (their index route will set the meta).\n\n```tsx\nimport type { MetaFunction } from "remix";\n\nexport let meta: MetaFunction = () => {\n  return {\n    title: "Something cool",\n    description:\n      "This becomes the nice preview on search results."\n  };\n};\n```\n\nThere are a few special cases like `title` renders a `<title>` tag, `og:style` tags will render `<meta property content>`, the rest render `<meta name={key} content={value}/>`.\n\nIn the case of nested routes, the meta tags are merged automatically, so parent routes can add meta tags without the child routes needing to copy them.\n\n### `links`\n\nThe links function defines which `<link>` elements to add to the page when the user visits a route.\n\n```tsx\nimport type { LinksFunction } from "remix";\n\nexport let links: LinksFunction = () => {\n  return [\n    {\n      rel: "icon",\n      href: "/favicon.png",\n      type: "image/png"\n    },\n    {\n      rel: "stylesheet",\n      href: "https://example.com/some/styles.css"\n    },\n    { page: "/users/123" },\n    {\n      rel: "preload",\n      href: "/images/banner.jpg",\n      as: "image"\n    }\n  ];\n};\n```\n\nThere are two types of link descriptors you can return:\n\n#### `HtmlLinkDescriptor`\n\nThis is an object representation of a normal `<link {...props} />` element. [View the MDN docs for the link API][link-tag].\n\nThe `links` export from a route should return an array of `HtmlLinkDescriptor` objects.\n\nExamples:\n\n```tsx\nimport type { LinksFunction } from "remix";\nimport stylesHref from "../styles/something.css";\n\nexport let links: LinksFunction = () => {\n  return [\n    // add a favicon\n    {\n      rel: "icon",\n      href: "/favicon.png",\n      type: "image/png"\n    },\n\n    // add an external stylesheet\n    {\n      rel: "stylesheet",\n      href: "https://example.com/some/styles.css",\n      crossOrigin: "true"\n    },\n\n    // add a local stylesheet, remix will fingerprint the file name for\n    // production caching\n    { rel: "stylesheet", href: stylesHref },\n\n    // prefetch an image into the browser cache that the user is likely to see\n    // as they interact with this page, perhaps they click a button to reveal in\n    // a summary/details element\n    {\n      rel: "prefetch",\n      as: "image",\n      href: "/img/bunny.jpg"\n    },\n\n    // only prefetch it if they\'re on a bigger screen\n    {\n      rel: "prefetch",\n      as: "image",\n      href: "/img/bunny.jpg",\n      media: "(min-width: 1000px)"\n    }\n  ];\n};\n```\n\n#### HtmlMetaDescriptor\n\nThis is an object representation and abstraction of a `<meta {...props} />` element and its attributes. [View the MDN docs for the meta API](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta).\n\nThe `meta` export from a route should return a single `HtmlMetaDescriptor` object.\n\nAlmost every `meta` element takes a `name` and `content` attribute, with the exception of [OpenGraph tags](https://ogp.me/) which use `property` instead of `name`. In either case, the attributes represent a key/value pair for each tag. Each pair in the `HtmlMetaDescriptor` object represents a separate `meta` element, and Remix maps each to the correct attributes for that tag.\n\nThe `meta` object can also hold a `title` reference which maps to the [HTML `<title>` element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/title)\n\nExamples:\n\n```tsx\nimport type { MetaFunction } from "remix";\n\nexport let meta: MetaFunction = () => {\n  return {\n    title: "Josie\'s Shake Shack", // <title>Josie\'s Shake Shack</title>\n    description: "Delicious shakes", // <meta name="description" content="Delicious shakes">\n    "og:image": "https://josiesshakeshack.com/logo.jpg" // <meta property="og:image" content="https://josiesshakeshack.com/logo.jpg">\n  };\n};\n```\n\n#### `PageLinkDescriptor`\n\nThese descriptors allow you to prefetch the resources for a page the user is likely to navigate to. While this API is useful, you might get more mileage out of `<Link prefetch="render">` instead. But if you\'d like, you can get the same behavior with this API.\n\n```js\nexport function links() {\n  return [{ page: "/posts/public" }];\n}\n```\n\nThis load up the JavaScript modules, loader data, and the stylesheets (defined in the `links` exports of the next routes) into the browser cache before the user even navigates there.\n\n<docs-warning>Be careful with this feature. You don\'t want to download 10MB of JavaScript and data for pages the user probably won\'t ever visit.</docs-warning>\n\n### CatchBoundary\n\nA `CatchBoundary` is a React component that renders whenever an action or loader throws a `Response`.\n\n**Note:** We use the word "catch" to represent the codepath taken when a `Response` type is thrown; you thought about bailing from the "happy path". This is different from an uncaught error you did not expect to occur.\n\nA Remix `CatchBoundary` component works just like a route component, but instead of `useLoaderData` you have access to `useCatch`. When a response is thrown in an action or loader, the `CatchBoundary` will be rendered in it\'s place, nested inside parent routes.\n\nA `CatchBoundary` component has access to the status code and thrown response data through `useCatch`.\n\n```tsx\nimport { useCatch } from "remix";\n\nexport function CatchBoundary() {\n  let caught = useCatch();\n\n  return (\n    <div>\n      <h1>Caught</h1>\n      <p>Status: {caught.status}</p>\n      <pre>\n        <code>{JSON.stringify(caught.data, null, 2)}</code>\n      </pre>\n    </div>\n  );\n}\n```\n\n### ErrorBoundary\n\nAn `ErrorBoundary` is a React component that renders whenever there is an error anywhere on the route, either during rendering or during data loading.\n\n**Note:** We use the word "error" to mean an uncaught exception; something you didn\'t anticipate happening. This is different from other types of "errors" that you are able to recover from easily, for example a 404 error where you can still show something in the user interface to indicate you weren\'t able to find some data.\n\nA Remix `ErrorBoundary` component works just like normal React [error boundaries](https://reactjs.org/docs/error-boundaries.html), but with a few extra capabilities. When there is an error in your route component, the `ErrorBoundary` will be rendered in its place, nested inside any parent routes. `ErrorBoundary` components also render when there is an error in the `loader` or `action` functions for a route, so all errors for that route may be handled in one spot.\n\nAn `ErrorBoundary` component receives one prop: the `error` that occurred.\n\n```tsx\nexport function ErrorBoundary({ error }) {\n  return (\n    <div>\n      <h1>Error</h1>\n      <p>{error.message}</p>\n      <p>The stack trace is:</p>\n      <pre>{error.stack}</pre>\n    </div>\n  );\n}\n```\n\n### handle\n\nExporting a handle allows you to create application conventions with the `useMatches()` hook. You can put whatever values you want on it:\n\n```js\nexport let handle = {\n  its: "all yours"\n};\n```\n\nThis is almost always used on conjunction with `useMatches`. To see what kinds of things you can do with it, refer to [`useMatches`](../remix/#usematches) for more information.\n\n### unstable_shouldReload\n\n<docs-warning>This API is unstable, we\'re confident in the use cases it solves but aren\'t sure about the API yet, it may change in the future.</docs-warning>\n\n<docs-warning>This feature is an <i>additional</i> optimization. In general, Remix\'s design does a great job of only calling the loaders that the next page needs and ensuring your UI is in sync with your server. When you use this feature you risk your UI getting out of sync with your server. Use with caution!</docs-warning>\n\nThis function lets apps optimize which routes should be reloaded on some client side transitions.\n\n```ts\nimport type { ShouldReloadFunction } from "remix";\n\nexport let unstable_shouldReload: ShouldReloadFunction = ({\n  // same params that go to `loader` and `action`\n  params,\n\n  // a possible form submission that caused this to be reloaded\n  submission,\n\n  // the next URL being used to render this page\n  url,\n\n  // the previous URL used to render this page\n  prevUrl\n}) => false; // or `true`;\n```\n\nDuring client side transitions, Remix will optimize reloading of routes that are already rendering, like not reloading layout routes that aren\'t changing. In other cases, like form submissions or search param changes, Remix doesn\'t know which routes need to be reloaded so it reloads them all to be safe. This ensures data mutations from the submission or changes in the search params are reflected across the entire page.\n\nThis function lets apps further optimize by returning `false` when Remix is about to reload a route. There are three cases when Remix will reload a route and you have the opportunity to optimize:\n\n- if the `url.search` changes (while the `url.pathname` is the same)\n- after actions are called\n- "refresh" link clicks (click link to same URL)\n\nOtherwise Remix will reload the route and you have no choice:\n\n- A route matches the new URL that didn\'t match before\n- The `url.pathname` changed (including route params)\n\nHere are a couple of common use-cases:\n\n#### Never reloading the root\n\nIt\'s common for root loaders to return data that never changes, like environment variables to be sent to the client app. In these cases you never need the root loader to be called again. For this case, you can simply `return false`.\n\n```js [10]\nexport let loader = () => {\n  return {\n    ENV: {\n      CLOUDINARY_ACCT: process.env.CLOUDINARY_ACCT,\n      STRIPE_PUBLIC_KEY: process.env.STRIPE_PUBLIC_KEY\n    }\n  };\n};\n\nexport let unstable_shouldReload = () => false;\n```\n\nWith this in place, Remix will no longer make a request to your root loader for any reason, not after form submissions, not after search param changes, etc.\n\n#### Ignoring search params\n\nAnother common case is when you\'ve got nested routes and a child component has a feature that uses the search params in the URL, like a search page or some tabs with state you want to keep in the search params.\n\nConsider these routes:\n\n```\n\u2514\u2500\u2500 $projectId.tsx\n    \u2514\u2500\u2500 activity.tsx\n```\n\nAnd lets say the UI looks something like this:\n\n```\n\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    Project: Design Revamp    \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Tasks \u2502 Collabs \u2502 >ACTIVITY \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Search: _____________       \u2502\n\u2502                              \u2502\n\u2502  - Ryan added an image       \u2502\n\u2502                              \u2502\n\u2502  - Michael commented         \u2502\n\u2502                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\nThe `$activity.tsx` loader can use the search params to filter the list, so visiting a URL like `/projects/design-revamp/activity?search=image` could filter the list of results. Maybe it looks something like this:\n\n```js [2,7]\nexport function loader({ request, params }) {\n  let url = new URLSearchParams(request.url);\n  return exampleDb.activity.findAll({\n    where: {\n      projectId: params.projectId,\n      name: {\n        contains: url.searchParams.get("search")\n      }\n    }\n  });\n}\n```\n\nThis is great for the activity route, but Remix doesn\'t know if the parent loader, `$projectId.tsx` _also_ cares about the search params. That\'s why Remix does the safest thing and reloads all the routes on the page when the search params change.\n\nIn this UI, that\'s wasted bandwidth for the user, your server, and your database because `$projectId.tsx` doesn\'t use the search params. Consider that our loader for `$projectId.tsx` looks something like this:\n\n```tsx\nexport function loader({ params }) {\n  return fakedb.findProject(params.projectId);\n}\n```\n\nWe want this loader to be called only if the project has had an update, so we can make this really simple and just say to reload if there is a non-GET submission:\n\n```tsx\nexport function unstable_shouldReload({ submission }) {\n  return submission && submission.method !== "GET";\n}\n```\n\nNow if the child route causes the search params to change, this route will no longer be reloaded because there was no submission.\n\n<docs-info>When you want to optimize a loader, instead of thinking about the thing causing the reload (search params), think only about the loader\'s requirements that you\'re optimizing.</docs-info>\n\nYou may want to get more granular and reload only for submissions to this project:\n\n```tsx\nexport function unstable_shouldReload({\n  params,\n  submission\n}) {\n  return (\n    submission &&\n    submission.action === `/projects/${params.projectId}`\n  );\n}\n```\n\nYou need to be very careful here, though. That project (or its nested relationships) may be updated by other actions and your app will get out of sync if you don\'t also consider them.\n\n## Asset URL Imports\n\nAny files inside the `app` folder can be imported into your modules. Remix will:\n\n1. Copy the file to your browser build directory\n2. Fingerprint the file for long-term caching\n3. Return the public URL to your module to be used while rendering\n\nIt\'s most common for stylesheets, but can used for anything.\n\n```tsx\n// root.tsx\nimport type { LinksFunction } from "remix";\nimport styles from "./styles/app.css";\nimport banner from "./images/banner.jpg";\n\nexport let links: LinksFunction = () => {\n  return [{ rel: "stylesheet", href: styles }];\n};\n\nexport default function Page() {\n  return (\n    <div>\n      <h1>Some Page</h1>\n      <img src="https://remix.run/docs/en/v1/api/{banner}" />\n    </div>\n  );\n}\n```\n\n[fetch]: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\n[request]: https://developer.mozilla.org/en-US/docs/Web/API/Request\n[response]: https://developer.mozilla.org/en-US/docs/Web/API/Response\n[headers]: https://developer.mozilla.org/en-US/docs/Web/API/Headers\n[urlsearchparams]: https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams\n[form]: ../remix/#form\n[form action]: ../remix/#form-action\n[link tag]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link\n','html':'<div class="md-toc-container"><div class="md-toc-nav" role="navigation"><ul class="toc">\n<li>\n<p><a href="conventions.html#conventions">Conventions</a></p>\n<ul>\n<li>\n<p><a href="conventions.html#remixconfigjs">remix.config.js</a></p>\n<ul>\n<li><a href="conventions.html#appdirectory">appDirectory</a></li>\n<li><a href="conventions.html#routes">routes</a></li>\n<li><a href="conventions.html#browserbuilddirectory">browserBuildDirectory</a></li>\n<li><a href="conventions.html#publicpath">publicPath</a></li>\n<li><a href="conventions.html#serverbuilddirectory">serverBuildDirectory</a></li>\n<li><a href="conventions.html#devserverport">devServerPort</a></li>\n</ul>\n</li>\n<li>\n<p><a href="conventions.html#file-name-conventions">File Name Conventions</a></p>\n<ul>\n<li><a href="conventions.html#special-files">Special Files</a></li>\n<li><a href="conventions.html#route-filenames">Route Filenames</a></li>\n<li><a href="conventions.html#escaping-special-characters">Escaping special characters</a></li>\n</ul>\n</li>\n<li>\n<p><a href="conventions.html#entry-files">Entry Files</a></p>\n<ul>\n<li><a href="conventions.html#entryclienttsx">entry.client.tsx</a></li>\n<li><a href="conventions.html#entryservertsx">entry.server.tsx</a></li>\n</ul>\n</li>\n<li>\n<p><a href="conventions.html#route-module-api">Route Module API</a></p>\n<ul>\n<li>\n<p><a href="conventions.html#default-export"><code>default</code> export</a></p>\n</li>\n<li>\n<p><a href="conventions.html#loader"><code>loader</code></a></p>\n<ul>\n<li><a href="conventions.html#loader-params">loader <code>params</code></a></li>\n<li><a href="conventions.html#loader-request">loader <code>request</code></a></li>\n<li><a href="conventions.html#loader-context">loader <code>context</code></a></li>\n<li><a href="conventions.html#returning-objects">Returning objects</a></li>\n<li><a href="conventions.html#returning-response-instances">Returning Response Instances</a></li>\n<li><a href="conventions.html#throwing-responses-in-loaders">Throwing Responses in Loaders</a></li>\n</ul>\n</li>\n<li>\n<p><a href="conventions.html#action"><code>action</code></a></p>\n</li>\n<li>\n<p><a href="conventions.html#headers"><code>headers</code></a></p>\n</li>\n<li>\n<p><a href="conventions.html#meta"><code>meta</code></a></p>\n</li>\n<li>\n<p><a href="conventions.html#links"><code>links</code></a></p>\n<ul>\n<li><a href="conventions.html#htmllinkdescriptor"><code>HtmlLinkDescriptor</code></a></li>\n<li><a href="conventions.html#htmlmetadescriptor">HtmlMetaDescriptor</a></li>\n<li><a href="conventions.html#pagelinkdescriptor"><code>PageLinkDescriptor</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href="conventions.html#catchboundary">CatchBoundary</a></p>\n</li>\n<li>\n<p><a href="conventions.html#errorboundary">ErrorBoundary</a></p>\n</li>\n<li>\n<p><a href="conventions.html#handle">handle</a></p>\n</li>\n<li>\n<p><a href="conventions.html#unstable_shouldreload">unstable_shouldReload</a></p>\n<ul>\n<li><a href="conventions.html#never-reloading-the-root">Never reloading the root</a></li>\n<li><a href="conventions.html#ignoring-search-params">Ignoring search params</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href="conventions.html#asset-url-imports">Asset URL Imports</a></p>\n</li>\n</ul>\n</li>\n</ul></div><div class="md-prose"><h1 id="conventions"><a href="conventions.html#conventions" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conventions</h1><p>A lot of Remix APIs aren\'t imported from the <code>"remix"</code> package, but are instead conventions and exports from <em>your</em> application modules. When you <code>import from "remix"</code>, <em>you are calling Remix</em>, but these APIs are when <em>Remix calls your code</em>.</p><h2 id="remixconfigjs"><a href="conventions.html#remixconfigjs" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>remix.config.js</h2><p>This file has a few build and development configuration options, but does not actually run on your server.</p><div><pre data-filename="remix.config.js" data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0C)">module</span>.<span style="color: var(--base0C)">exports</span> <span style="color: var(--base0E)">=</span> {\n</span><span class="codeblock-line" data-line-number="2">  appDirectory: "<span style="color: var(--base0B)">app</span>",\n</span><span class="codeblock-line" data-line-number="3">  browserBuildDirectory: "<span style="color: var(--base0B)">public/build</span>",\n</span><span class="codeblock-line" data-line-number="4">  devServerPort: <span style="color: var(--base09)">8002</span>,\n</span><span class="codeblock-line" data-line-number="5">  publicPath: "<span style="color: var(--base0B)">/build/</span>",\n</span><span class="codeblock-line" data-line-number="6">  serverBuildDirectory: "<span style="color: var(--base0B)">build</span>",\n</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0D)">routes</span>(<span style="color: var(--base08)">defineRoutes</span>) {\n</span><span class="codeblock-line" data-line-number="8">    <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">defineRoute</span>(<span style="color: var(--base08)">route</span> <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="9">      <span style="color: var(--base0D)">route</span>("<span style="color: var(--base0B)">/somewhere/cool/*</span>", "<span style="color: var(--base0B)">catchall.tsx</span>");\n</span><span class="codeblock-line" data-line-number="10">    });\n</span><span class="codeblock-line" data-line-number="11">  }\n</span><span class="codeblock-line" data-line-number="12">};\n</span></code></pre></div><h3 id="appdirectory"><a href="conventions.html#appdirectory" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>appDirectory</h3><p>The path to the <code>app</code> directory, relative to remix.config.js. Defaults to "app".</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base03)">// default</span>\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0C)">exports</span>.<span style="color: var(--base08)">appDirectory</span> <span style="color: var(--base0E)">=</span> "<span style="color: var(--base0B)">./app</span>";\n</span><span class="codeblock-line" data-line-number="3">\n</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base03)">// custom</span>\n</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base0C)">exports</span>.<span style="color: var(--base08)">appDirectory</span> <span style="color: var(--base0E)">=</span> "<span style="color: var(--base0B)">./elsewhere</span>";\n</span></code></pre></div><h3 id="routes"><a href="conventions.html#routes" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>routes</h3><p>A function for defining custom routes, in addition to those already defined\nusing the filesystem convention in <code>app/routes</code>. Both sets of routes will be merged.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0C)">exports</span>.<span style="color: var(--base0D)">routes</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> (<span style="color: var(--base08)">defineRoutes</span>) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base03)">// If you need to do async work, do it before calling `defineRoutes`, we use</span>\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base03)">// the call stack of `route` inside to set nesting.</span>\n</span><span class="codeblock-line" data-line-number="4">\n</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">defineRoutes</span>((<span style="color: var(--base08)">route</span>) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="6">    <span style="color: var(--base03)">// A common use for this is catchall routes.</span>\n</span><span class="codeblock-line" data-line-number="7">    <span style="color: var(--base03)">// - The first argument is the React Router path to match against</span>\n</span><span class="codeblock-line" data-line-number="8">    <span style="color: var(--base03)">// - The second is the relative filename of the route handler</span>\n</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base0D)">route</span>("<span style="color: var(--base0B)">/some/path/*</span>", "<span style="color: var(--base0B)">catchall.tsx</span>")\n</span><span class="codeblock-line" data-line-number="10">\n</span><span class="codeblock-line" data-line-number="11">    <span style="color: var(--base03)">// if you want to nest routes, use the optional callback argument</span>\n</span><span class="codeblock-line" data-line-number="12">    <span style="color: var(--base0D)">route</span>("<span style="color: var(--base0B)">some/:path</span>", "<span style="color: var(--base0B)">some/route/file.js</span>", () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="13">      <span style="color: var(--base03)">// - path is relative to parent path</span>\n</span><span class="codeblock-line" data-line-number="14">      <span style="color: var(--base03)">// - filenames are still relative to the app directory</span>\n</span><span class="codeblock-line" data-line-number="15">      <span style="color: var(--base0D)">route</span>("<span style="color: var(--base0B)">relative/path</span>", "<span style="color: var(--base0B)">some/other/file</span>")\n</span><span class="codeblock-line" data-line-number="16">    });\n</span><span class="codeblock-line" data-line-number="17">\n</span><span class="codeblock-line" data-line-number="18">  }\n</span><span class="codeblock-line" data-line-number="19">}\n</span></code></pre></div><h3 id="browserbuilddirectory"><a href="conventions.html#browserbuilddirectory" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>browserBuildDirectory</h3><p>The path to the browser build, relative to remix.config.js. Defaults to "public/build". Should be deployed to static hosting.</p><h3 id="publicpath"><a href="conventions.html#publicpath" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>publicPath</h3><p>The URL prefix of the browser build with a trailing slash. Defaults to "/build/". This is the path the browser will use to find assets.</p><h3 id="serverbuilddirectory"><a href="conventions.html#serverbuilddirectory" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>serverBuildDirectory</h3><p>The path to the server build, relative to remix.config.js. Defaults to "build". This needs to be deployed to your server.</p><h3 id="devserverport"><a href="conventions.html#devserverport" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>devServerPort</h3><p>The port number to use for the dev server. Defaults to 8002.</p><h2 id="file-name-conventions"><a href="conventions.html#file-name-conventions" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>File Name Conventions</h2><p>There are a few conventions that Remix uses you should be aware of.</p><h3 id="special-files"><a href="conventions.html#special-files" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Special Files</h3><ul>\n<li><strong><code>remix.config.js</code></strong>: Remix uses this file to know how to build your app for production and run it in development. This file is required.</li>\n<li><strong><code>app/entry.server.{js,jsx,ts,tsx}</code></strong>: This is your entry into the server rendering piece of Remix. This file is required.</li>\n<li><strong><code>app/entry.client.{js,jsx,ts,tsx}</code></strong>: This is your entry into the browser rendering/hydration piece of Remix. This file is required.</li>\n</ul><h3 id="route-filenames"><a href="conventions.html#route-filenames" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Route Filenames</h3><ul>\n<li>\n<p><strong><code>app/root.tsx</code></strong>: This is your root layout, or "root route" (very sorry for those of you who pronounce those words the same way!). It works just like all other routes: you can export a <code>loader</code>, <code>action</code>, etc.</p>\n</li>\n<li>\n<p><strong><code>app/routes/*.{js,jsx,ts,tsx,md,mdx}</code></strong>: Any files in the <code>app/routes/</code> directory will become routes in your application. Remix supports all of those extensions.</p>\n</li>\n<li>\n<p><strong><code>app/routes/{folder}/*.tsx</code></strong>: Folders inside of routes will create nested URLs.</p>\n</li>\n<li>\n<p><strong><code>app/routes/{folder}</code> with <code>app/routes/{folder}.tsx</code></strong>: When a route has the same name as a folder, it becomes a "layout route" for the child routes inside the folder. Render an <code>&#x3C;Outlet /></code> and the child routes will appear there. This is how you can have multiple levels of persistent layout nesting associated with URLs.</p>\n</li>\n<li>\n<p><strong>Dots in route filesnames</strong>: Adding a <code>.</code> in a route file will create a nested URL, but not a nested layout. Flat files are flat layouts, nested files are nested layouts. The <code>.</code> allows you to create nested URLs without needing to create a bunch of layouts. For example: <code>app/routes/some.long.url.tsx</code> will create the URL <code>/some/long/url</code>.</p>\n</li>\n<li>\n<p><strong><code>app/routes/index.tsx</code></strong>: Routes named "index" will render when the parent layout route\'s path is matched exactly.</p>\n</li>\n<li>\n<p><strong><code>$param</code></strong>: The dollar sign denotes a dynamic segment of the URL. It will be parsed and passed to your loaders and routes.</p>\n<p>For example: <code>app/routes/users/$userId.tsx</code> will match the following URLs: <code>users/123</code> and <code>users/abc</code> but not <code>users/123/abc</code> because that has too many segments. See the <Link to="../routing">routing guide</Link> for more information.</p>\n<p>Some CLIs require you to escape the $ when creating files:</p>\n<div><pre data-line-numbers="true" data-lang="bash" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">touch routes/<span style="color: var(--base0C)">\\$</span>params.tsx\n</span></code></pre></div>\n<p>Params can be nested routes, just create a folder with the <code>$</code> in it.</p>\n</li>\n<li>\n<p><strong><code>app/routes/files/$.tsx</code></strong>: To add a "splat" path (some people call this a "catchall") name the file simply <code>$.tsx</code>. It will create a route path pattern like <code>files/*</code>. You can also use this along with dot file names: <code>app/routes/files.$.tsx</code>.</p>\n</li>\n<li>\n<p><strong><code>app/routes/__some-layout/some-path.tsx</code></strong>: Prefixing a folder with <code>__</code> will create a "layout route". Layout routes are routes that don\'t add anything to the URL for matching, but do add nested components in the tree for layouts. Make sure to also have <code>__some-layout.tsx</code> as well. For example, all of your marketing pages could share a layout in the route tree with <code>app/routes/__marketing.tsx</code> as the layout and then all of the child routes go in <code>app/routes/__marketing/products.tsx</code> and <code>app/routes/__marketing/buy.tsx</code>. The <code>__marketing.tsx</code> route won\'t add any segments to the URL, but it will render when it\'s child routes match.</p>\n</li>\n</ul><h3 id="escaping-special-characters"><a href="conventions.html#escaping-special-characters" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Escaping special characters</h3><p>Because some characters have special meaning, you must use our escaping syntax if you want those characters to actually appear in the route. For example, if I wanted to make a <a href="../../v1.0.4/guides/resource-routes.html">Resource Route</a> for a <code>/sitemap.xml</code>, I could name the file <code>app/routes/[sitemap.xml].tsx</code>. So you simply wrap any part of the filename with brackets and that will escape any special characters.</p><docs-info>\n  Note, you could even do `app/routes/sitemap[.]xml.tsx` if you wanted to only wrap the part that needs to be escaped. It makes no difference. Choose the one you like best.\n</docs-info><h2 id="entry-files"><a href="conventions.html#entry-files" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Entry Files</h2><h3 id="entryclienttsx"><a href="conventions.html#entryclienttsx" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>entry.client.tsx</h3><p>Remix uses <code>app/entry.client.tsx</code> as the entry point for the browser bundle. This module gives you full control over the "hydrate" step after JavaScript loads into the document.</p><p>Typically this module uses <code>ReactDOM.hydrate</code> to re-hydrate the markup that was already generated on the server in your <a href="https://remix.run/docs/en/v1.0.4/entry.server">server entry module</a>.</p><p>Here\'s a basic example:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">ReactDOM</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">react-dom</span>";\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">Remix</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">@remix-run/react/browser</span>";\n</span><span class="codeblock-line" data-line-number="3">\n</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base08)">ReactDOM</span>.<span style="color: var(--base0D)">hydrate</span>(&#x3C;<span style="color: var(--base0A)">Remix</span> />, <span style="color: var(--base08)">document</span>);\n</span></code></pre></div><p>As you can see, you have full control over hydration. This is the first piece of code that runs in the browser. As you can see, you have full control here. You can initialize client side libraries, setup things like <code>window.history.scrollRestoration</code>, etc.</p><h3 id="entryservertsx"><a href="conventions.html#entryservertsx" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>entry.server.tsx</h3><p>Remix uses <code>app/entry.server.tsx</code> to generate the HTTP response when rendering on the server. The <code>default</code> export of this module is a function that lets you create the response, including HTTP status, headers, and HTML, giving you full control over the way the markup is generated and sent to the client.</p><p>This module should render the markup for the current page using a <code>&#x3C;RemixServer></code> element with the <code>context</code> and <code>url</code> for the current request. This markup will (optionally) be re-hydrated once JavaScript loads in the browser using the <a href="https://remix.run/docs/en/v1.0.4/api/%22../entry.client%22">browser entry module</a>.</p><p>You can also export an optional <code>handleDataRequest</code> function that will allow you to modify the response of a data request. These are the requests that do not render HTML, but rather return the loader and action data to the browser once client side hydration has occured.</p><p>Here\'s a basic example:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">ReactDOMServer</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">react-dom/server</span>";\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> {\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base08)">EntryContext</span>,\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base08)">HandleDataRequestFunction</span>\n</span><span class="codeblock-line" data-line-number="5">} <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="6"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">RemixServer</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="7">\n</span><span class="codeblock-line" data-line-number="8"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">handleRequest</span>(\n</span><span class="codeblock-line" data-line-number="9">  <span style="color: var(--base08)">request</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">Request</span>,\n</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base08)">responseStatusCode</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0C)">number</span>,\n</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base08)">responseHeaders</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">Headers</span>,\n</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base08)">remixContext</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">EntryContext</span>\n</span><span class="codeblock-line" data-line-number="13">) {\n</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">markup</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">ReactDOMServer</span>.<span style="color: var(--base0D)">renderToString</span>(\n</span><span class="codeblock-line" data-line-number="15">    &#x3C;<span style="color: var(--base0A)">RemixServer</span> <span style="color: var(--base0D)">context</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">remixContext</span><span style="color: var(--base0F)">}</span> <span style="color: var(--base0D)">url</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">request</span>.<span style="color: var(--base08)">url</span><span style="color: var(--base0F)">}</span> />\n</span><span class="codeblock-line" data-line-number="16">  );\n</span><span class="codeblock-line" data-line-number="17">\n</span><span class="codeblock-line" data-line-number="18">  <span style="color: var(--base08)">responseHeaders</span>.<span style="color: var(--base0D)">set</span>("<span style="color: var(--base0B)">Content-Type</span>", "<span style="color: var(--base0B)">text/html</span>");\n</span><span class="codeblock-line" data-line-number="19">\n</span><span class="codeblock-line" data-line-number="20">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">Response</span>("<span style="color: var(--base0B)">&#x3C;!DOCTYPE html></span>" <span style="color: var(--base0E)">+</span> <span style="color: var(--base08)">markup</span>, {\n</span><span class="codeblock-line" data-line-number="21">    status: <span style="color: var(--base08)">responseStatusCode</span>,\n</span><span class="codeblock-line" data-line-number="22">    headers: <span style="color: var(--base08)">responseHeaders</span>\n</span><span class="codeblock-line" data-line-number="23">  });\n</span><span class="codeblock-line" data-line-number="24">}\n</span><span class="codeblock-line" data-line-number="25">\n</span><span class="codeblock-line" data-line-number="26"><span style="color: var(--base03)">// this is an optional export</span>\n</span><span class="codeblock-line" data-line-number="27"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">handleDataRequest</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">HandleDataRequestFunction</span> <span style="color: var(--base0E)">=</span> (\n</span><span class="codeblock-line" data-line-number="28">  <span style="color: var(--base08)">response</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">Response</span>,\n</span><span class="codeblock-line" data-line-number="29">  <span style="color: var(--base03)">// same args that get passed to the action or loader that was called</span>\n</span><span class="codeblock-line" data-line-number="30">  { <span style="color: var(--base08)">request</span>, <span style="color: var(--base08)">params</span>, <span style="color: var(--base08)">context</span> }\n</span><span class="codeblock-line" data-line-number="31">) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="32">  <span style="color: var(--base08)">response</span>.<span style="color: var(--base0D)">headers</span>.<span style="color: var(--base0D)">set</span>("<span style="color: var(--base0B)">x-custom</span>", "<span style="color: var(--base0B)">yay!</span>");\n</span><span class="codeblock-line" data-line-number="33">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">response</span>;\n</span><span class="codeblock-line" data-line-number="34">};\n</span></code></pre></div><h2 id="route-module-api"><a href="conventions.html#route-module-api" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Route Module API</h2><p>A route in Remix is can used for many things. Usually they\u2019re used for the user interface of your app, like a React component with server side lifecycle hooks. But they can also serve as generic routes for any kind of resource (like dynamic CSS or social images).</p><p>It\'s important to read <a href="https://remix.run/docs/en/v1.0.4/constraints/">Route Module Constraints</a>.</p><h3 id="default-export"><a href="conventions.html#default-export" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>default</code> export</h3><p>This is the component that will render when the route matches.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">SomeRouteComponent</span>() {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="4">      &#x3C;<span style="color: var(--base08)">h1</span>>Look ma!&#x3C;/<span style="color: var(--base08)">h1</span>>\n</span><span class="codeblock-line" data-line-number="5">      &#x3C;<span style="color: var(--base08)">p</span>>I\'m still using React after like 7 years.&#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="6">    &#x3C;/<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="7">  );\n</span><span class="codeblock-line" data-line-number="8">}\n</span></code></pre></div><h3 id="loader"><a href="conventions.html#loader" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>loader</code></h3><p>Each route can define a "loader" function that will be called on the server before rendering to provide data to the route.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> { ok: <span style="color: var(--base09)">true</span> };\n</span><span class="codeblock-line" data-line-number="3">};\n</span><span class="codeblock-line" data-line-number="4">\n</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base03)">// Typescript</span>\n</span><span class="codeblock-line" data-line-number="6"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">LoaderFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="7"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base0E)">return</span> { ok: <span style="color: var(--base09)">true</span> };\n</span><span class="codeblock-line" data-line-number="9">};\n</span></code></pre></div><p>This function is only ever run on the server. On the initial server render it will provide data to the HTML document. On navigations in the browser, Remix will call the function via <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API"><code>fetch</code></a>. This means you can talk directly to your database, use server only API secrets, etc. Any code that isn\'t used to render the UI will be removed from the browser bundle.</p><p>Using the database ORM Prisma as an example:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-highlight="true" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">useLoaderData</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">prisma</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">../db</span>";\n</span><span class="codeblock-line" data-line-number="3">\n</span><span class="codeblock-line" data-highlight="true" data-line-number="4"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-highlight="true" data-line-number="5">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">prisma</span>.<span style="color: var(--base0D)">user</span>.<span style="color: var(--base0D)">findMany</span>();\n</span><span class="codeblock-line" data-highlight="true" data-line-number="6">};\n</span><span class="codeblock-line" data-line-number="7">\n</span><span class="codeblock-line" data-line-number="8"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">Users</span>() {\n</span><span class="codeblock-line" data-highlight="true" data-line-number="9">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">data</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useLoaderData</span>();\n</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="11">    &#x3C;<span style="color: var(--base08)">ul</span>>\n</span><span class="codeblock-line" data-line-number="12">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">data</span>.<span style="color: var(--base0D)">map</span>(<span style="color: var(--base08)">user</span> <span style="color: var(--base0D)">=></span> (\n</span><span class="codeblock-line" data-line-number="13">        &#x3C;<span style="color: var(--base08)">li</span> <span style="color: var(--base0D)">key</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">user</span>.<span style="color: var(--base08)">id</span><span style="color: var(--base0F)">}</span>><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">user</span>.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">li</span>>\n</span><span class="codeblock-line" data-line-number="14">      ))<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="15">    &#x3C;/<span style="color: var(--base08)">ul</span>>\n</span><span class="codeblock-line" data-line-number="16">  );\n</span><span class="codeblock-line" data-line-number="17">}\n</span></code></pre></div><p>Because <code>prisma</code> is only used in the loader it will be removed from the browser bundle.</p><p>Remix polyfills the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Web Fetch API</a> on the server so you can use <code>fetch</code> inside of your loader as if you were in the browser.</p><h4 id="loader-params"><a href="conventions.html#loader-params" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>loader <code>params</code></h4><p>Route params are passed to your loader. If you have a loader at <code>data/invoices/$invoiceId.tsx</code> then Remix will parse out the <code>invoiceId</code> and pass it to your loader. This is useful for fetching data from an API or database.</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base03)">// if the user visits /invoices/123</span>\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> ({ <span style="color: var(--base08)">params</span> }) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">invoiceId</span>; <span style="color: var(--base03)">// "123"</span>\n</span><span class="codeblock-line" data-line-number="4">};\n</span></code></pre></div><h4 id="loader-request"><a href="conventions.html#loader-request" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>loader <code>request</code></h4><p>This is a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request">Fetch Request</a> instance with information about the request. You can read the MDN docs to see all of it\'s properties.</p><p>Most common cases are reading headers or the URL. You can also use this to read URL <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams">URLSearchParams</a> from the request like so:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> ({ <span style="color: var(--base08)">request</span> }) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base03)">// read a cookie</span>\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">cookie</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">headers</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">Cookie</span>");\n</span><span class="codeblock-line" data-line-number="4">\n</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base03)">// parse the search params</span>\n</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">url</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">URL</span>(<span style="color: var(--base08)">request</span>.<span style="color: var(--base08)">url</span>);\n</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">search</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">url</span>.<span style="color: var(--base0D)">searchParams</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">search</span>");\n</span><span class="codeblock-line" data-line-number="8">};\n</span></code></pre></div><h4 id="loader-context"><a href="conventions.html#loader-context" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>loader <code>context</code></h4><p>This is the context you passed in to your server adapter\'s <code>getLoadContext()</code> function. It\'s a way to bridge the gap between the adapter\'s request/response API with your Remix app.</p><p><docs-info>This API is an escape hatch, it\u2019s uncommon to need it</docs-info></p><p>Say your express server (or your serverless function handler) looks something like this:</p><div><pre data-filename="some-express-server.js" data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0A)">const</span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base08)">createRequestHandler</span>\n</span><span class="codeblock-line" data-line-number="3">} <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">require</span>("<span style="color: var(--base0B)">@remix-run/express</span>");\n</span><span class="codeblock-line" data-line-number="4">\n</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base08)">app</span>.<span style="color: var(--base0D)">all</span>(\n</span><span class="codeblock-line" data-line-number="6">  "<span style="color: var(--base0B)">*</span>",\n</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0D)">createRequestHandler</span>({\n</span><span class="codeblock-line" data-line-number="8">    <span style="color: var(--base0D)">getLoadContext</span>(<span style="color: var(--base08)">req</span>, <span style="color: var(--base08)">res</span>) {\n</span><span class="codeblock-line" data-line-number="9">      <span style="color: var(--base03)">// this becomes the loader context</span>\n</span><span class="codeblock-line" data-line-number="10">      <span style="color: var(--base0E)">return</span> { expressUser: <span style="color: var(--base08)">req</span>.<span style="color: var(--base08)">user</span> };\n</span><span class="codeblock-line" data-line-number="11">    }\n</span><span class="codeblock-line" data-line-number="12">  })\n</span><span class="codeblock-line" data-line-number="13">);\n</span></code></pre></div><p>And then your loader can access it.</p><div><pre data-filename="routes/some-route.tsx" data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> ({ <span style="color: var(--base08)">context</span> }) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">let</span> { <span style="color: var(--base08)">expressUser</span> } <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">context</span>;\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base03)">// ...</span>\n</span><span class="codeblock-line" data-line-number="4">};\n</span></code></pre></div><h4 id="returning-objects"><a href="conventions.html#returning-objects" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Returning objects</h4><p>You can return plain JavaScript objects from your loaders that will be made available to your <a href="https://remix.run/docs/en/v1.0.4/api/%22../route-module%22">route modules</a>.</p><div><pre data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> { whatever: "<span style="color: var(--base0B)">you want</span>" };\n</span><span class="codeblock-line" data-line-number="3">};\n</span></code></pre></div><h4 id="returning-response-instances"><a href="conventions.html#returning-response-instances" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Returning Response Instances</h4><p>When you return a plain object, Remix turns it into a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">Fetch Response</a>. This means you can return them yourself, too.</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">users</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">db</span>.<span style="color: var(--base0D)">users</span>.<span style="color: var(--base0D)">findMany</span>();\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">body</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base09)">JSON</span>.<span style="color: var(--base0D)">stringify</span>(<span style="color: var(--base08)">users</span>);\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">Response</span>(<span style="color: var(--base08)">body</span>, {\n</span><span class="codeblock-line" data-line-number="5">    headers: {\n</span><span class="codeblock-line" data-line-number="6">      "<span style="color: var(--base0B)">Content-Type</span>": "<span style="color: var(--base0B)">application/json</span>"\n</span><span class="codeblock-line" data-line-number="7">    }\n</span><span class="codeblock-line" data-line-number="8">  });\n</span><span class="codeblock-line" data-line-number="9">};\n</span></code></pre></div><p>Remix provides helpers, like <code>json</code>, so you don\'t have to construct them yourself:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">json</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">users</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">fakeDb</span>.<span style="color: var(--base0D)">users</span>.<span style="color: var(--base0D)">findMany</span>();\n</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">json</span>(<span style="color: var(--base08)">users</span>);\n</span><span class="codeblock-line" data-line-number="6">};\n</span></code></pre></div><p>Between these two examples you can see how <code>json</code> just does a little of work to make your loader a lot cleaner. You usually want to use the <code>json</code> helper when you\'re adding headers or a status code to your response:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">json</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LoaderFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">params</span> }) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">user</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">fakeDb</span>.<span style="color: var(--base0D)">project</span>.<span style="color: var(--base0D)">findOne</span>({\n</span><span class="codeblock-line" data-line-number="5">    where: { id: <span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">id</span> }\n</span><span class="codeblock-line" data-line-number="6">  });\n</span><span class="codeblock-line" data-line-number="7">\n</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base0E)">!</span><span style="color: var(--base08)">user</span>) {\n</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">json</span>("<span style="color: var(--base0B)">Project not found</span>", { status: <span style="color: var(--base09)">404</span> });\n</span><span class="codeblock-line" data-line-number="10">  }\n</span><span class="codeblock-line" data-line-number="11">\n</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">json</span>(<span style="color: var(--base08)">user</span>);\n</span><span class="codeblock-line" data-line-number="13">};\n</span></code></pre></div><p>See also:</p><ul>\n<li>(<code>headers</code>)["#headers"]</li>\n<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">MDN Response Docs</a></li>\n</ul><h4 id="throwing-responses-in-loaders"><a href="conventions.html#throwing-responses-in-loaders" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Throwing Responses in Loaders</h4><p>Along with returning responses, you can also throw Response objects from your loaders, allowing you to break through the call stack and show an alternate UI with contextual data through the <code>CatchBoundary</code>.</p><p>Here is a full example showing how you can create utility functions that throw responses to stop code execution in the loader and move over to an alternative UI.</p><div><pre data-filename="app/db.ts" data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">json</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">ThrownResponse</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="3">\n</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">type</span> <span style="color: var(--base0A)">InvoiceNotFoundResponse</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0A)">ThrownResponse</span>&#x3C;\n</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base09)">404</span>,\n</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0C)">string</span>\n</span><span class="codeblock-line" data-line-number="7">>;\n</span><span class="codeblock-line" data-line-number="8">\n</span><span class="codeblock-line" data-line-number="9"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">getInvoice</span>(<span style="color: var(--base08)">id</span>, <span style="color: var(--base08)">user</span>) {\n</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0E)">let</span> <span style="color: var(--base08)">invoice</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base08)">db</span>.<span style="color: var(--base0D)">invoice</span>.<span style="color: var(--base0D)">find</span>({ where: { <span style="color: var(--base08)">id</span> } });\n</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base08)">invoice</span> <span style="color: var(--base0E)">===</span> <span style="color: var(--base09)">null</span>) {\n</span><span class="codeblock-line" data-line-number="12">    <span style="color: var(--base0E)">throw</span> <span style="color: var(--base0D)">json</span>("<span style="color: var(--base0B)">Not Found</span>", { status: <span style="color: var(--base09)">404</span> });\n</span><span class="codeblock-line" data-line-number="13">  }\n</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">invoice</span>;\n</span><span class="codeblock-line" data-line-number="15">}\n</span></code></pre></div><div><pre data-filename="app/http.ts" data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">getSession</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">./session</span>";\n</span><span class="codeblock-line" data-line-number="3">\n</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">requireUserSession</span>(<span style="color: var(--base08)">request</span>) {\n</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">let</span> <span style="color: var(--base08)">session</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">getSession</span>(\n</span><span class="codeblock-line" data-line-number="6">    <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">headers</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">cookie</span>")\n</span><span class="codeblock-line" data-line-number="7">  );\n</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base0E)">!</span><span style="color: var(--base08)">session</span>) {\n</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base03)">// can throw our helpers like `redirect` and `json` because they</span>\n</span><span class="codeblock-line" data-line-number="10">    <span style="color: var(--base03)">// return responses.</span>\n</span><span class="codeblock-line" data-line-number="11">    <span style="color: var(--base0E)">throw</span> <span style="color: var(--base0D)">redirect</span>("<span style="color: var(--base0B)">/login</span>", <span style="color: var(--base09)">302</span>);\n</span><span class="codeblock-line" data-line-number="12">  }\n</span><span class="codeblock-line" data-line-number="13">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">session</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">user</span>");\n</span><span class="codeblock-line" data-line-number="14">}\n</span></code></pre></div><div><pre data-filename="app/routes/invoice/$invoiceId.tsx" data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">useCatch</span>, <span style="color: var(--base08)">useLoaderData</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">ThrownResponse</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="3">\n</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">requireUserSession</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/http</span>";\n</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">getInvoice</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/db</span>";\n</span><span class="codeblock-line" data-line-number="6"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> {\n</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base08)">Invoice</span>,\n</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base08)">InvoiceNotFoundResponse</span>\n</span><span class="codeblock-line" data-line-number="9">} <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/db</span>";\n</span><span class="codeblock-line" data-line-number="10">\n</span><span class="codeblock-line" data-line-number="11"><span style="color: var(--base0A)">type</span> <span style="color: var(--base0A)">InvoiceCatchData</span> <span style="color: var(--base0E)">=</span> {\n</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base08)">invoiceOwnerEmail</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0C)">string</span>;\n</span><span class="codeblock-line" data-line-number="13">};\n</span><span class="codeblock-line" data-line-number="14">\n</span><span class="codeblock-line" data-line-number="15"><span style="color: var(--base0A)">type</span> <span style="color: var(--base0A)">ThrownResponses</span> <span style="color: var(--base0E)">=</span>\n</span><span class="codeblock-line" data-line-number="16">  <span style="color: var(--base0E)">|</span> <span style="color: var(--base0A)">InvoiceNotFoundResponse</span>\n</span><span class="codeblock-line" data-line-number="17">  <span style="color: var(--base0E)">|</span> <span style="color: var(--base0A)">ThrownResponse</span>&#x3C;<span style="color: var(--base09)">401</span>, <span style="color: var(--base0A)">InvoiceCatchData</span>>;\n</span><span class="codeblock-line" data-line-number="18">\n</span><span class="codeblock-line" data-line-number="19"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">request</span>, <span style="color: var(--base08)">params</span> }) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="20">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">user</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">requireUserSession</span>(<span style="color: var(--base08)">request</span>);\n</span><span class="codeblock-line" data-line-number="21">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">invoice</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">Invoice</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">getInvoice</span>(<span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">invoiceId</span>);\n</span><span class="codeblock-line" data-line-number="22">\n</span><span class="codeblock-line" data-line-number="23">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base0E)">!</span><span style="color: var(--base08)">invoice</span>.<span style="color: var(--base0D)">userIds</span>.<span style="color: var(--base0D)">includes</span>(<span style="color: var(--base08)">user</span>.<span style="color: var(--base08)">id</span>)) {\n</span><span class="codeblock-line" data-line-number="24">    <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">data</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">InvoiceCatchData</span> <span style="color: var(--base0E)">=</span> {\n</span><span class="codeblock-line" data-line-number="25">      invoiceOwnerEmail: <span style="color: var(--base08)">invoice</span>.<span style="color: var(--base0D)">owner</span>.<span style="color: var(--base08)">email</span>\n</span><span class="codeblock-line" data-line-number="26">    };\n</span><span class="codeblock-line" data-line-number="27">    <span style="color: var(--base0E)">throw</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">json</span>(<span style="color: var(--base08)">data</span>, { status: <span style="color: var(--base09)">401</span> });\n</span><span class="codeblock-line" data-line-number="28">  }\n</span><span class="codeblock-line" data-line-number="29">\n</span><span class="codeblock-line" data-line-number="30">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">invoice</span>;\n</span><span class="codeblock-line" data-line-number="31">};\n</span><span class="codeblock-line" data-line-number="32">\n</span><span class="codeblock-line" data-line-number="33"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">InvoiceRoute</span>() {\n</span><span class="codeblock-line" data-line-number="34">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">invoice</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useLoaderData</span>&#x3C;<span style="color: var(--base0A)">Invoice</span>>();\n</span><span class="codeblock-line" data-line-number="35">  <span style="color: var(--base0E)">return</span> &#x3C;<span style="color: var(--base0A)">InvoiceView</span> <span style="color: var(--base0D)">invoice</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">invoice</span><span style="color: var(--base0F)">}</span> />;\n</span><span class="codeblock-line" data-line-number="36">}\n</span><span class="codeblock-line" data-line-number="37">\n</span><span class="codeblock-line" data-line-number="38"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">CatchBoundary</span>() {\n</span><span class="codeblock-line" data-line-number="39">  <span style="color: var(--base03)">// this returns { status, statusText, data }</span>\n</span><span class="codeblock-line" data-line-number="40">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">caught</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useCatch</span>&#x3C;<span style="color: var(--base0A)">ThrownResponses</span>>();\n</span><span class="codeblock-line" data-line-number="41">\n</span><span class="codeblock-line" data-line-number="42">  <span style="color: var(--base0E)">switch</span> (<span style="color: var(--base08)">caught</span>.<span style="color: var(--base08)">status</span>) {\n</span><span class="codeblock-line" data-line-number="43">    <span style="color: var(--base0E)">case</span> <span style="color: var(--base09)">401</span>:\n</span><span class="codeblock-line" data-line-number="44">      <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="45">        &#x3C;<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="46">          &#x3C;<span style="color: var(--base08)">p</span>>You don\'t have access to this invoice.&#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="47">          &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="48">            Contact <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">invoiceCatch</span>.<span style="color: var(--base0D)">data</span>.<span style="color: var(--base08)">invoiceOwnerEmail</span><span style="color: var(--base0F)">}</span> to\n</span><span class="codeblock-line" data-line-number="49">            get access\n</span><span class="codeblock-line" data-line-number="50">          &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="51">        &#x3C;/<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="52">      );\n</span><span class="codeblock-line" data-line-number="53">    <span style="color: var(--base0E)">case</span> <span style="color: var(--base09)">404</span>:\n</span><span class="codeblock-line" data-line-number="54">      <span style="color: var(--base0E)">return</span> &#x3C;<span style="color: var(--base08)">div</span>>Invoice not found!&#x3C;/<span style="color: var(--base08)">div</span>>;\n</span><span class="codeblock-line" data-line-number="55">  }\n</span><span class="codeblock-line" data-line-number="56">\n</span><span class="codeblock-line" data-line-number="57">  <span style="color: var(--base03)">// You could also `throw new Error("Unknown status in catch boundary")`.</span>\n</span><span class="codeblock-line" data-line-number="58">  <span style="color: var(--base03)">// This will be caught by the closest `ErrorBoundary`.</span>\n</span><span class="codeblock-line" data-line-number="59">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="60">    &#x3C;<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="61">      Something went wrong: <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">invoiceCatch</span>.<span style="color: var(--base08)">status</span><span style="color: var(--base0F)">}{</span>"<span style="color: var(--base0B)"> </span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="62">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">invoiceCatch</span>.<span style="color: var(--base08)">statusText</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="63">    &#x3C;/<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="64">  );\n</span><span class="codeblock-line" data-line-number="65">}\n</span></code></pre></div><h3 id="action"><a href="conventions.html#action" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>action</code></h3><p>Like <code>loader</code>, action is a server only function to handle data mutations and other actions. If a non-GET request is made to your route (POST, PUT, PATCH, DELETE) then the action is called before the loaders.</p><p>Actions have the the very same API as loaders, the only difference is when they are called.</p><p>This enables you to co-locate everything about a data set in a single route module: the data read, the component that renders the data, and the data writes:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span>, <span style="color: var(--base08)">Form</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">fakeGetTodos</span>, <span style="color: var(--base08)">fakeCreateTodo</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/utils/db</span>";\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">TodoList</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">~/components/TodoList</span>";\n</span><span class="codeblock-line" data-line-number="4">\n</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">async</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">loader</span>() {\n</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">fakeGetTodos</span>();\n</span><span class="codeblock-line" data-line-number="7">}\n</span><span class="codeblock-line" data-line-number="8">\n</span><span class="codeblock-line" data-line-number="9"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">async</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">action</span>({ <span style="color: var(--base08)">request</span> }) {\n</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">body</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">formData</span>();\n</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">todo</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">fakeCreateTodo</span>({\n</span><span class="codeblock-line" data-line-number="12">    title: <span style="color: var(--base08)">body</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">title</span>")\n</span><span class="codeblock-line" data-line-number="13">  });\n</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">redirect</span>(`<span style="color: var(--base0B)">/todos/</span>${<span style="color: var(--base08)">todo</span>.<span style="color: var(--base08)">id</span>}`);\n</span><span class="codeblock-line" data-line-number="15">}\n</span><span class="codeblock-line" data-line-number="16">\n</span><span class="codeblock-line" data-line-number="17"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">Todos</span>() {\n</span><span class="codeblock-line" data-line-number="18">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">data</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useLoaderData</span>();\n</span><span class="codeblock-line" data-line-number="19">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="20">    &#x3C;<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="21">      &#x3C;<span style="color: var(--base0A)">TodoList</span> <span style="color: var(--base0D)">todos</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">data</span><span style="color: var(--base0F)">}</span> />\n</span><span class="codeblock-line" data-line-number="22">      &#x3C;<span style="color: var(--base0A)">Form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>">\n</span><span class="codeblock-line" data-line-number="23">        &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>" <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">title</span>" />\n</span><span class="codeblock-line" data-line-number="24">        &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">Create Todo&#x3C;/<span style="color: var(--base08)">button</span>>\n</span><span class="codeblock-line" data-line-number="25">      &#x3C;/<span style="color: var(--base0A)">Form</span>>\n</span><span class="codeblock-line" data-line-number="26">    &#x3C;/<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="27">  );\n</span><span class="codeblock-line" data-line-number="28">}\n</span></code></pre></div><p>When a POST is made to a URL, multiple routes in your route hierarchy will match the URL. Unlike a GET to loaders, where all of them are called to build the UI, <em>only one action is called</em>.</p><p><docs-info>The route called will be the deepest matching route, unless the deepest matching route is an "index route". In this case, it will post to the parent route of the index (because they share the same URL, the parent wins).</docs-info></p><p>If you want to post to an index route use <code>?index</code> in the action: <code>&#x3C;Form action="/accounts?index" method="post" /></code></p><table>\n<thead>\n<tr>\n<th>action url</th>\n<th>route action</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>/accounts?index</code></td>\n<td><code>routes/accounts/index.js</code></td>\n</tr>\n<tr>\n<td><code>/accounts</code></td>\n<td><code>routes/accounts.js</code></td>\n</tr>\n</tbody>\n</table><p>Also note that forms without an action prop (<code>&#x3C;Form method="post"></code>) will automatically post to the same route within which they are rendered, so using the <code>?index</code> param to disambiguate between parent and index routes is only useful if you\'re posting to an index route from somewhere besides the index route itself. If you\'re posting from the index route to itself, or from the parent route to itselt, you don\'t need to define a <code>&#x3C;Form action></code> at all, just omit it: <code>&#x3C;Form method="post"></code>.</p><p>See also:</p><ul>\n<li><a href="https://remix.run/docs/en/v1/remix/#form"><code>&#x3C;Form></code></a></li>\n<li><a href="https://remix.run/docs/en/v1/remix/#form-action"><code>&#x3C;Form action></code></a></li>\n</ul><h3 id="headers"><a href="conventions.html#headers" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>headers</code></h3><p>Each route can define it\'s own HTTP headers. One of the common headers is the <code>Cache-Control</code> header that indicates to browser and CDN caches where and for how long a page is able to be cached.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">headers</span>({ <span style="color: var(--base08)">loaderHeaders</span>, <span style="color: var(--base08)">parentHeaders</span> }) {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> {\n</span><span class="codeblock-line" data-line-number="3">    "<span style="color: var(--base0B)">X-Stretchy-Pants</span>": "<span style="color: var(--base0B)">its for fun</span>",\n</span><span class="codeblock-line" data-line-number="4">    "<span style="color: var(--base0B)">Cache-Control</span>": "<span style="color: var(--base0B)">max-age=300, s-maxage=3600</span>"\n</span><span class="codeblock-line" data-line-number="5">  };\n</span><span class="codeblock-line" data-line-number="6">}\n</span></code></pre></div><p>Usually your data is a better indicator of your cache duration than your route module (data tends to be more dynamic than markup), so the loader\'s headers are passed in to <code>headers()</code> too:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">headers</span>({ <span style="color: var(--base08)">loaderHeaders</span> }) {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> {\n</span><span class="codeblock-line" data-line-number="3">    "<span style="color: var(--base0B)">Cache-Control</span>": <span style="color: var(--base08)">loaderHeaders</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">Cache-Control</span>")\n</span><span class="codeblock-line" data-line-number="4">  };\n</span><span class="codeblock-line" data-line-number="5">}\n</span></code></pre></div><p>Note: <code>loaderHeaders</code> is an instance of the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Headers">Web Fetch API</a> <code>Headers</code> class.</p><p>Because Remix has nested routes, there\'s a battle of the headers to be won when nested routes match. In this case, the deepest route wins. Consider these files in the routes directory:</p><pre><code>\u251C\u2500\u2500 users.tsx\n\u2514\u2500\u2500 users\n \xA0\xA0 \u251C\u2500\u2500 $userId.tsx\n \xA0\xA0 \u2514\u2500\u2500 $userId\n \xA0\xA0  \xA0\xA0 \u2514\u2500\u2500 profile.tsx\n</code></pre><p>If we are looking at <code>/users/123/profile</code> then three routes are rendering:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base0A)">Users</span>>\n</span><span class="codeblock-line" data-line-number="2">  &#x3C;<span style="color: var(--base0A)">UserId</span>>\n</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base0A)">Profile</span> />\n</span><span class="codeblock-line" data-line-number="4">  &#x3C;/<span style="color: var(--base0A)">UserId</span>>\n</span><span class="codeblock-line" data-line-number="5">&#x3C;/<span style="color: var(--base0A)">Users</span>>\n</span></code></pre></div><p>If all three define <code>headers</code>, the deepest module wins, in this case <code>profile.tsx</code>.</p><p>We don\'t want surprise headers in your responses, so it\'s your job to merge them if you\'d like. Remix passes in the <code>parentHeaders</code> to your <code>headers</code> function. So <code>users.tsx</code> headers get passed to <code>$userId.tsx</code>, and then <code>$userId.tsx</code> headers are passed to <code>profile.tsx</code> headers.</p><p>That is all to say that Remix has given you a very large gun with which to shoot your foot. You need to be careful not to send a <code>Cache-Control</code> from a child route module that is more aggressive than a parent route. Here\'s some code that picks the least aggressive caching in these cases:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">parseCacheControl</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">parse-cache-control</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">headers</span>({ <span style="color: var(--base08)">loaderHeaders</span>, <span style="color: var(--base08)">parentHeaders</span> }) {\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">loaderCache</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">parseCacheControl</span>(\n</span><span class="codeblock-line" data-line-number="5">    <span style="color: var(--base08)">loaderHeaders</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">Cache-Control</span>")\n</span><span class="codeblock-line" data-line-number="6">  );\n</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">parentCache</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">parseCacheControl</span>(\n</span><span class="codeblock-line" data-line-number="8">    <span style="color: var(--base08)">parentHeaders</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">Cache-Control</span>")\n</span><span class="codeblock-line" data-line-number="9">  );\n</span><span class="codeblock-line" data-line-number="10">\n</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base03)">// take the most conservative between the parent and loader, otherwise</span>\n</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base03)">// we\'ll be too aggressive for one of them.</span>\n</span><span class="codeblock-line" data-line-number="13">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">maxAge</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base09)">Math</span>.<span style="color: var(--base0D)">min</span>(\n</span><span class="codeblock-line" data-line-number="14">    <span style="color: var(--base08)">loaderCache</span>["<span style="color: var(--base0B)">max-age</span>"],\n</span><span class="codeblock-line" data-line-number="15">    <span style="color: var(--base08)">parentCache</span>["<span style="color: var(--base0B)">max-age</span>"]\n</span><span class="codeblock-line" data-line-number="16">  );\n</span><span class="codeblock-line" data-line-number="17">\n</span><span class="codeblock-line" data-line-number="18">  <span style="color: var(--base0E)">return</span> {\n</span><span class="codeblock-line" data-line-number="19">    "<span style="color: var(--base0B)">Cache-Control</span>": `<span style="color: var(--base0B)">max-age=</span>${<span style="color: var(--base08)">maxAge</span>}`\n</span><span class="codeblock-line" data-line-number="20">  };\n</span><span class="codeblock-line" data-line-number="21">}\n</span></code></pre></div><p>All that said, you can avoid this entire problem by <em>not defining headers in parent routes</em> and only in leaf routes. Every layout that can be visited directly will likely have an "index route". If you only define headers on your leaf routes, not your parent routes, you will never have to worry about merging headers.</p><h3 id="meta"><a href="conventions.html#meta" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>meta</code></h3><p>The meta export will set meta tags for your html document. We highly recommend setting the title and description on every route besides layout routes (their index route will set the meta).</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">MetaFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">meta</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">MetaFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0E)">return</span> {\n</span><span class="codeblock-line" data-line-number="5">    title: "<span style="color: var(--base0B)">Something cool</span>",\n</span><span class="codeblock-line" data-line-number="6">    description:\n</span><span class="codeblock-line" data-line-number="7">      "<span style="color: var(--base0B)">This becomes the nice preview on search results.</span>"\n</span><span class="codeblock-line" data-line-number="8">  };\n</span><span class="codeblock-line" data-line-number="9">};\n</span></code></pre></div><p>There are a few special cases like <code>title</code> renders a <code>&#x3C;title></code> tag, <code>og:style</code> tags will render <code>&#x3C;meta property content></code>, the rest render <code>&#x3C;meta name={key} content={value}/></code>.</p><p>In the case of nested routes, the meta tags are merged automatically, so parent routes can add meta tags without the child routes needing to copy them.</p><h3 id="links"><a href="conventions.html#links" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>links</code></h3><p>The links function defines which <code>&#x3C;link></code> elements to add to the page when the user visits a route.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">LinksFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">links</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LinksFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0E)">return</span> [\n</span><span class="codeblock-line" data-line-number="5">    {\n</span><span class="codeblock-line" data-line-number="6">      rel: "<span style="color: var(--base0B)">icon</span>",\n</span><span class="codeblock-line" data-line-number="7">      href: "<span style="color: var(--base0B)">/favicon.png</span>",\n</span><span class="codeblock-line" data-line-number="8">      type: "<span style="color: var(--base0B)">image/png</span>"\n</span><span class="codeblock-line" data-line-number="9">    },\n</span><span class="codeblock-line" data-line-number="10">    {\n</span><span class="codeblock-line" data-line-number="11">      rel: "<span style="color: var(--base0B)">stylesheet</span>",\n</span><span class="codeblock-line" data-line-number="12">      href: "<span style="color: var(--base0B)">https://example.com/some/styles.css</span>"\n</span><span class="codeblock-line" data-line-number="13">    },\n</span><span class="codeblock-line" data-line-number="14">    { page: "<span style="color: var(--base0B)">/users/123</span>" },\n</span><span class="codeblock-line" data-line-number="15">    {\n</span><span class="codeblock-line" data-line-number="16">      rel: "<span style="color: var(--base0B)">preload</span>",\n</span><span class="codeblock-line" data-line-number="17">      href: "<span style="color: var(--base0B)">/images/banner.jpg</span>",\n</span><span class="codeblock-line" data-line-number="18">      as: "<span style="color: var(--base0B)">image</span>"\n</span><span class="codeblock-line" data-line-number="19">    }\n</span><span class="codeblock-line" data-line-number="20">  ];\n</span><span class="codeblock-line" data-line-number="21">};\n</span></code></pre></div><p>There are two types of link descriptors you can return:</p><h4 id="htmllinkdescriptor"><a href="conventions.html#htmllinkdescriptor" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>HtmlLinkDescriptor</code></h4><p>This is an object representation of a normal <code>&#x3C;link {...props} /></code> element. [View the MDN docs for the link API][link-tag].</p><p>The <code>links</code> export from a route should return an array of <code>HtmlLinkDescriptor</code> objects.</p><p>Examples:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">LinksFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">stylesHref</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">../styles/something.css</span>";\n</span><span class="codeblock-line" data-line-number="3">\n</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">links</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LinksFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> [\n</span><span class="codeblock-line" data-line-number="6">    <span style="color: var(--base03)">// add a favicon</span>\n</span><span class="codeblock-line" data-line-number="7">    {\n</span><span class="codeblock-line" data-line-number="8">      rel: "<span style="color: var(--base0B)">icon</span>",\n</span><span class="codeblock-line" data-line-number="9">      href: "<span style="color: var(--base0B)">/favicon.png</span>",\n</span><span class="codeblock-line" data-line-number="10">      type: "<span style="color: var(--base0B)">image/png</span>"\n</span><span class="codeblock-line" data-line-number="11">    },\n</span><span class="codeblock-line" data-line-number="12">\n</span><span class="codeblock-line" data-line-number="13">    <span style="color: var(--base03)">// add an external stylesheet</span>\n</span><span class="codeblock-line" data-line-number="14">    {\n</span><span class="codeblock-line" data-line-number="15">      rel: "<span style="color: var(--base0B)">stylesheet</span>",\n</span><span class="codeblock-line" data-line-number="16">      href: "<span style="color: var(--base0B)">https://example.com/some/styles.css</span>",\n</span><span class="codeblock-line" data-line-number="17">      crossOrigin: "<span style="color: var(--base0B)">true</span>"\n</span><span class="codeblock-line" data-line-number="18">    },\n</span><span class="codeblock-line" data-line-number="19">\n</span><span class="codeblock-line" data-line-number="20">    <span style="color: var(--base03)">// add a local stylesheet, remix will fingerprint the file name for</span>\n</span><span class="codeblock-line" data-line-number="21">    <span style="color: var(--base03)">// production caching</span>\n</span><span class="codeblock-line" data-line-number="22">    { rel: "<span style="color: var(--base0B)">stylesheet</span>", href: <span style="color: var(--base08)">stylesHref</span> },\n</span><span class="codeblock-line" data-line-number="23">\n</span><span class="codeblock-line" data-line-number="24">    <span style="color: var(--base03)">// prefetch an image into the browser cache that the user is likely to see</span>\n</span><span class="codeblock-line" data-line-number="25">    <span style="color: var(--base03)">// as they interact with this page, perhaps they click a button to reveal in</span>\n</span><span class="codeblock-line" data-line-number="26">    <span style="color: var(--base03)">// a summary/details element</span>\n</span><span class="codeblock-line" data-line-number="27">    {\n</span><span class="codeblock-line" data-line-number="28">      rel: "<span style="color: var(--base0B)">prefetch</span>",\n</span><span class="codeblock-line" data-line-number="29">      as: "<span style="color: var(--base0B)">image</span>",\n</span><span class="codeblock-line" data-line-number="30">      href: "<span style="color: var(--base0B)">/img/bunny.jpg</span>"\n</span><span class="codeblock-line" data-line-number="31">    },\n</span><span class="codeblock-line" data-line-number="32">\n</span><span class="codeblock-line" data-line-number="33">    <span style="color: var(--base03)">// only prefetch it if they\'re on a bigger screen</span>\n</span><span class="codeblock-line" data-line-number="34">    {\n</span><span class="codeblock-line" data-line-number="35">      rel: "<span style="color: var(--base0B)">prefetch</span>",\n</span><span class="codeblock-line" data-line-number="36">      as: "<span style="color: var(--base0B)">image</span>",\n</span><span class="codeblock-line" data-line-number="37">      href: "<span style="color: var(--base0B)">/img/bunny.jpg</span>",\n</span><span class="codeblock-line" data-line-number="38">      media: "<span style="color: var(--base0B)">(min-width: 1000px)</span>"\n</span><span class="codeblock-line" data-line-number="39">    }\n</span><span class="codeblock-line" data-line-number="40">  ];\n</span><span class="codeblock-line" data-line-number="41">};\n</span></code></pre></div><h4 id="htmlmetadescriptor"><a href="conventions.html#htmlmetadescriptor" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>HtmlMetaDescriptor</h4><p>This is an object representation and abstraction of a <code>&#x3C;meta {...props} /></code> element and its attributes. <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta">View the MDN docs for the meta API</a>.</p><p>The <code>meta</code> export from a route should return a single <code>HtmlMetaDescriptor</code> object.</p><p>Almost every <code>meta</code> element takes a <code>name</code> and <code>content</code> attribute, with the exception of <a href="https://ogp.me/">OpenGraph tags</a> which use <code>property</code> instead of <code>name</code>. In either case, the attributes represent a key/value pair for each tag. Each pair in the <code>HtmlMetaDescriptor</code> object represents a separate <code>meta</code> element, and Remix maps each to the correct attributes for that tag.</p><p>The <code>meta</code> object can also hold a <code>title</code> reference which maps to the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/title">HTML <code>&#x3C;title></code> element</a></p><p>Examples:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">MetaFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">meta</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">MetaFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0E)">return</span> {\n</span><span class="codeblock-line" data-line-number="5">    title: "<span style="color: var(--base0B)">Josie\'s Shake Shack</span>", <span style="color: var(--base03)">// &#x3C;title>Josie\'s Shake Shack&#x3C;/title></span>\n</span><span class="codeblock-line" data-line-number="6">    description: "<span style="color: var(--base0B)">Delicious shakes</span>", <span style="color: var(--base03)">// &#x3C;meta name="description" content="Delicious shakes"></span>\n</span><span class="codeblock-line" data-line-number="7">    "<span style="color: var(--base0B)">og:image</span>": "<span style="color: var(--base0B)">https://josiesshakeshack.com/logo.jpg</span>" <span style="color: var(--base03)">// &#x3C;meta property="og:image" content="https://josiesshakeshack.com/logo.jpg"></span>\n</span><span class="codeblock-line" data-line-number="8">  };\n</span><span class="codeblock-line" data-line-number="9">};\n</span></code></pre></div><h4 id="pagelinkdescriptor"><a href="conventions.html#pagelinkdescriptor" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a><code>PageLinkDescriptor</code></h4><p>These descriptors allow you to prefetch the resources for a page the user is likely to navigate to. While this API is useful, you might get more mileage out of <code>&#x3C;Link prefetch="render"></code> instead. But if you\'d like, you can get the same behavior with this API.</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">links</span>() {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> [{ page: "<span style="color: var(--base0B)">/posts/public</span>" }];\n</span><span class="codeblock-line" data-line-number="3">}\n</span></code></pre></div><p>This load up the JavaScript modules, loader data, and the stylesheets (defined in the <code>links</code> exports of the next routes) into the browser cache before the user even navigates there.</p><p><docs-warning>Be careful with this feature. You don\'t want to download 10MB of JavaScript and data for pages the user probably won\'t ever visit.</docs-warning></p><h3 id="catchboundary"><a href="conventions.html#catchboundary" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>CatchBoundary</h3><p>A <code>CatchBoundary</code> is a React component that renders whenever an action or loader throws a <code>Response</code>.</p><p><strong>Note:</strong> We use the word "catch" to represent the codepath taken when a <code>Response</code> type is thrown; you thought about bailing from the "happy path". This is different from an uncaught error you did not expect to occur.</p><p>A Remix <code>CatchBoundary</code> component works just like a route component, but instead of <code>useLoaderData</code> you have access to <code>useCatch</code>. When a response is thrown in an action or loader, the <code>CatchBoundary</code> will be rendered in it\'s place, nested inside parent routes.</p><p>A <code>CatchBoundary</code> component has access to the status code and thrown response data through <code>useCatch</code>.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">useCatch</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">CatchBoundary</span>() {\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">caught</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useCatch</span>();\n</span><span class="codeblock-line" data-line-number="5">\n</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="7">    &#x3C;<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="8">      &#x3C;<span style="color: var(--base08)">h1</span>>Caught&#x3C;/<span style="color: var(--base08)">h1</span>>\n</span><span class="codeblock-line" data-line-number="9">      &#x3C;<span style="color: var(--base08)">p</span>>Status: <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">caught</span>.<span style="color: var(--base08)">status</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="10">      &#x3C;<span style="color: var(--base08)">pre</span>>\n</span><span class="codeblock-line" data-line-number="11">        &#x3C;<span style="color: var(--base08)">code</span>><span style="color: var(--base0F)">{</span><span style="color: var(--base09)">JSON</span>.<span style="color: var(--base0D)">stringify</span>(<span style="color: var(--base08)">caught</span>.<span style="color: var(--base08)">data</span>, <span style="color: var(--base09)">null</span>, <span style="color: var(--base09)">2</span>)<span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">code</span>>\n</span><span class="codeblock-line" data-line-number="12">      &#x3C;/<span style="color: var(--base08)">pre</span>>\n</span><span class="codeblock-line" data-line-number="13">    &#x3C;/<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="14">  );\n</span><span class="codeblock-line" data-line-number="15">}\n</span></code></pre></div><h3 id="errorboundary"><a href="conventions.html#errorboundary" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>ErrorBoundary</h3><p>An <code>ErrorBoundary</code> is a React component that renders whenever there is an error anywhere on the route, either during rendering or during data loading.</p><p><strong>Note:</strong> We use the word "error" to mean an uncaught exception; something you didn\'t anticipate happening. This is different from other types of "errors" that you are able to recover from easily, for example a 404 error where you can still show something in the user interface to indicate you weren\'t able to find some data.</p><p>A Remix <code>ErrorBoundary</code> component works just like normal React <a href="https://reactjs.org/docs/error-boundaries.html">error boundaries</a>, but with a few extra capabilities. When there is an error in your route component, the <code>ErrorBoundary</code> will be rendered in its place, nested inside any parent routes. <code>ErrorBoundary</code> components also render when there is an error in the <code>loader</code> or <code>action</code> functions for a route, so all errors for that route may be handled in one spot.</p><p>An <code>ErrorBoundary</code> component receives one prop: the <code>error</code> that occurred.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">ErrorBoundary</span>({ <span style="color: var(--base08)">error</span> }) {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="4">      &#x3C;<span style="color: var(--base08)">h1</span>>Error&#x3C;/<span style="color: var(--base08)">h1</span>>\n</span><span class="codeblock-line" data-line-number="5">      &#x3C;<span style="color: var(--base08)">p</span>><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">error</span>.<span style="color: var(--base08)">message</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="6">      &#x3C;<span style="color: var(--base08)">p</span>>The stack trace is:&#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="7">      &#x3C;<span style="color: var(--base08)">pre</span>><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">error</span>.<span style="color: var(--base08)">stack</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base08)">pre</span>>\n</span><span class="codeblock-line" data-line-number="8">    &#x3C;/<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="9">  );\n</span><span class="codeblock-line" data-line-number="10">}\n</span></code></pre></div><h3 id="handle"><a href="conventions.html#handle" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>handle</h3><p>Exporting a handle allows you to create application conventions with the <code>useMatches()</code> hook. You can put whatever values you want on it:</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">handle</span> <span style="color: var(--base0E)">=</span> {\n</span><span class="codeblock-line" data-line-number="2">  its: "<span style="color: var(--base0B)">all yours</span>"\n</span><span class="codeblock-line" data-line-number="3">};\n</span></code></pre></div><p>This is almost always used on conjunction with <code>useMatches</code>. To see what kinds of things you can do with it, refer to <a href="https://remix.run/docs/en/v1.0.4/remix/#usematches"><code>useMatches</code></a> for more information.</p><h3 id="unstable_shouldreload"><a href="conventions.html#unstable_shouldreload" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>unstable_shouldReload</h3><p><docs-warning>This API is unstable, we\'re confident in the use cases it solves but aren\'t sure about the API yet, it may change in the future.</docs-warning></p><p><docs-warning>This feature is an <i>additional</i> optimization. In general, Remix\'s design does a great job of only calling the loaders that the next page needs and ensuring your UI is in sync with your server. When you use this feature you risk your UI getting out of sync with your server. Use with caution!</docs-warning></p><p>This function lets apps optimize which routes should be reloaded on some client side transitions.</p><div><pre data-line-numbers="true" data-lang="ts" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">ShouldReloadFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">let</span> <span style="color: var(--base0D)">unstable_shouldReload</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">ShouldReloadFunction</span> <span style="color: var(--base0E)">=</span> ({\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base03)">// same params that go to `loader` and `action`</span>\n</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base08)">params</span>,\n</span><span class="codeblock-line" data-line-number="6">\n</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base03)">// a possible form submission that caused this to be reloaded</span>\n</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base08)">submission</span>,\n</span><span class="codeblock-line" data-line-number="9">\n</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base03)">// the next URL being used to render this page</span>\n</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base08)">url</span>,\n</span><span class="codeblock-line" data-line-number="12">\n</span><span class="codeblock-line" data-line-number="13">  <span style="color: var(--base03)">// the previous URL used to render this page</span>\n</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base08)">prevUrl</span>\n</span><span class="codeblock-line" data-line-number="15">}) <span style="color: var(--base0D)">=></span> <span style="color: var(--base09)">false</span>; <span style="color: var(--base03)">// or `true`;</span>\n</span></code></pre></div><p>During client side transitions, Remix will optimize reloading of routes that are already rendering, like not reloading layout routes that aren\'t changing. In other cases, like form submissions or search param changes, Remix doesn\'t know which routes need to be reloaded so it reloads them all to be safe. This ensures data mutations from the submission or changes in the search params are reflected across the entire page.</p><p>This function lets apps further optimize by returning <code>false</code> when Remix is about to reload a route. There are three cases when Remix will reload a route and you have the opportunity to optimize:</p><ul>\n<li>if the <code>url.search</code> changes (while the <code>url.pathname</code> is the same)</li>\n<li>after actions are called</li>\n<li>"refresh" link clicks (click link to same URL)</li>\n</ul><p>Otherwise Remix will reload the route and you have no choice:</p><ul>\n<li>A route matches the new URL that didn\'t match before</li>\n<li>The <code>url.pathname</code> changed (including route params)</li>\n</ul><p>Here are a couple of common use-cases:</p><h4 id="never-reloading-the-root"><a href="conventions.html#never-reloading-the-root" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Never reloading the root</h4><p>It\'s common for root loaders to return data that never changes, like environment variables to be sent to the client app. In these cases you never need the root loader to be called again. For this case, you can simply <code>return false</code>.</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">loader</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> {\n</span><span class="codeblock-line" data-line-number="3">    ENV: {\n</span><span class="codeblock-line" data-line-number="4">      CLOUDINARY_ACCT: <span style="color: var(--base08)">process</span>.<span style="color: var(--base0D)">env</span>.<span style="color: var(--base08)">CLOUDINARY_ACCT</span>,\n</span><span class="codeblock-line" data-line-number="5">      STRIPE_PUBLIC_KEY: <span style="color: var(--base08)">process</span>.<span style="color: var(--base0D)">env</span>.<span style="color: var(--base08)">STRIPE_PUBLIC_KEY</span>\n</span><span class="codeblock-line" data-line-number="6">    }\n</span><span class="codeblock-line" data-line-number="7">  };\n</span><span class="codeblock-line" data-line-number="8">};\n</span><span class="codeblock-line" data-line-number="9">\n</span><span class="codeblock-line" data-highlight="true" data-line-number="10"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">unstable_shouldReload</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> <span style="color: var(--base09)">false</span>;\n</span></code></pre></div><p>With this in place, Remix will no longer make a request to your root loader for any reason, not after form submissions, not after search param changes, etc.</p><h4 id="ignoring-search-params"><a href="conventions.html#ignoring-search-params" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Ignoring search params</h4><p>Another common case is when you\'ve got nested routes and a child component has a feature that uses the search params in the URL, like a search page or some tabs with state you want to keep in the search params.</p><p>Consider these routes:</p><pre><code>\u2514\u2500\u2500 $projectId.tsx\n    \u2514\u2500\u2500 activity.tsx\n</code></pre><p>And lets say the UI looks something like this:</p><pre><code>\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    Project: Design Revamp    \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Tasks \u2502 Collabs \u2502 >ACTIVITY \u2502\n\u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Search: _____________       \u2502\n\u2502                              \u2502\n\u2502  - Ryan added an image       \u2502\n\u2502                              \u2502\n\u2502  - Michael commented         \u2502\n\u2502                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre><p>The <code>$activity.tsx</code> loader can use the search params to filter the list, so visiting a URL like <code>/projects/design-revamp/activity?search=image</code> could filter the list of results. Maybe it looks something like this:</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">loader</span>({ <span style="color: var(--base08)">request</span>, <span style="color: var(--base08)">params</span> }) {\n</span><span class="codeblock-line" data-highlight="true" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">url</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">new</span> <span style="color: var(--base0D)">URLSearchParams</span>(<span style="color: var(--base08)">request</span>.<span style="color: var(--base08)">url</span>);\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">exampleDb</span>.<span style="color: var(--base0D)">activity</span>.<span style="color: var(--base0D)">findAll</span>({\n</span><span class="codeblock-line" data-line-number="4">    where: {\n</span><span class="codeblock-line" data-line-number="5">      projectId: <span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">projectId</span>,\n</span><span class="codeblock-line" data-line-number="6">      name: {\n</span><span class="codeblock-line" data-highlight="true" data-line-number="7">        contains: <span style="color: var(--base08)">url</span>.<span style="color: var(--base0D)">searchParams</span>.<span style="color: var(--base0D)">get</span>("<span style="color: var(--base0B)">search</span>")\n</span><span class="codeblock-line" data-line-number="8">      }\n</span><span class="codeblock-line" data-line-number="9">    }\n</span><span class="codeblock-line" data-line-number="10">  });\n</span><span class="codeblock-line" data-line-number="11">}\n</span></code></pre></div><p>This is great for the activity route, but Remix doesn\'t know if the parent loader, <code>$projectId.tsx</code> <em>also</em> cares about the search params. That\'s why Remix does the safest thing and reloads all the routes on the page when the search params change.</p><p>In this UI, that\'s wasted bandwidth for the user, your server, and your database because <code>$projectId.tsx</code> doesn\'t use the search params. Consider that our loader for <code>$projectId.tsx</code> looks something like this:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">loader</span>({ <span style="color: var(--base08)">params</span> }) {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">fakedb</span>.<span style="color: var(--base0D)">findProject</span>(<span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">projectId</span>);\n</span><span class="codeblock-line" data-line-number="3">}\n</span></code></pre></div><p>We want this loader to be called only if the project has had an update, so we can make this really simple and just say to reload if there is a non-GET submission:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">unstable_shouldReload</span>({ <span style="color: var(--base08)">submission</span> }) {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base08)">submission</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> <span style="color: var(--base08)">submission</span>.<span style="color: var(--base08)">method</span> <span style="color: var(--base0E)">!==</span> "<span style="color: var(--base0B)">GET</span>";\n</span><span class="codeblock-line" data-line-number="3">}\n</span></code></pre></div><p>Now if the child route causes the search params to change, this route will no longer be reloaded because there was no submission.</p><p><docs-info>When you want to optimize a loader, instead of thinking about the thing causing the reload (search params), think only about the loader\'s requirements that you\'re optimizing.</docs-info></p><p>You may want to get more granular and reload only for submissions to this project:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">unstable_shouldReload</span>({\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base08)">params</span>,\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base08)">submission</span>\n</span><span class="codeblock-line" data-line-number="4">}) {\n</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="6">    <span style="color: var(--base08)">submission</span> <span style="color: var(--base0E)">&#x26;&#x26;</span>\n</span><span class="codeblock-line" data-line-number="7">    <span style="color: var(--base08)">submission</span>.<span style="color: var(--base08)">action</span> <span style="color: var(--base0E)">===</span> `<span style="color: var(--base0B)">/projects/</span>${<span style="color: var(--base08)">params</span>.<span style="color: var(--base08)">projectId</span>}`\n</span><span class="codeblock-line" data-line-number="8">  );\n</span><span class="codeblock-line" data-line-number="9">}\n</span></code></pre></div><p>You need to be very careful here, though. That project (or its nested relationships) may be updated by other actions and your app will get out of sync if you don\'t also consider them.</p><h2 id="asset-url-imports"><a href="conventions.html#asset-url-imports" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Asset URL Imports</h2><p>Any files inside the <code>app</code> folder can be imported into your modules. Remix will:</p><ol>\n<li>Copy the file to your browser build directory</li>\n<li>Fingerprint the file for long-term caching</li>\n<li>Return the public URL to your module to be used while rendering</li>\n</ol><p>It\'s most common for stylesheets, but can used for anything.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base03)">// root.tsx</span>\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">LinksFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">styles</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">./styles/app.css</span>";\n</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base0E)">import</span> <span style="color: var(--base08)">banner</span> <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">./images/banner.jpg</span>";\n</span><span class="codeblock-line" data-line-number="5">\n</span><span class="codeblock-line" data-line-number="6"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">links</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">LinksFunction</span> <span style="color: var(--base0E)">=</span> () <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="7">  <span style="color: var(--base0E)">return</span> [{ rel: "<span style="color: var(--base0B)">stylesheet</span>", href: <span style="color: var(--base08)">styles</span> }];\n</span><span class="codeblock-line" data-line-number="8">};\n</span><span class="codeblock-line" data-line-number="9">\n</span><span class="codeblock-line" data-line-number="10"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">Page</span>() {\n</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="12">    &#x3C;<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="13">      &#x3C;<span style="color: var(--base08)">h1</span>>Some Page&#x3C;/<span style="color: var(--base08)">h1</span>>\n</span><span class="codeblock-line" data-line-number="14">      &#x3C;<span style="color: var(--base08)">img</span> <span style="color: var(--base0D)">src</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">banner</span><span style="color: var(--base0F)">}</span> />\n</span><span class="codeblock-line" data-line-number="15">    &#x3C;/<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="16">  );\n</span><span class="codeblock-line" data-line-number="17">}\n</span></code></pre></div></div></div>\n','lang':'en','hasContent':true,'createdAt':'2021-11-24T18:06:09.410Z','updatedAt':'2021-11-24T18:06:09.411Z','title':'Conventions','order':1,'disabled':false,'siblingLinks':false,'published':null,'description':null,'hidden':false,'toc':true,'githubRefId':'refs/heads/main'}},'actionData':undefined};</script><script src="../../../../build/manifest-10D43C8B.js"></script><script type="module">import * as route0 from "/build/root-63J2OI5O.js";
import * as route1 from "/build/routes/docs/$lang.$version-WDGSSTHQ.js";
import * as route2 from "/build/routes/docs/$lang.$version/$-XTVJBAXD.js";
window.__remixRouteModules = {"root":route0,"routes/docs/$lang.$version":route1,"routes/docs/$lang.$version/$":route2};</script><script src="../../../../build/entry.client-42KZW6ZZ.js" type="module"></script></body></html>