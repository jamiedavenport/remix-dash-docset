<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/><link rel="icon" href="../../../../favicon-light.1.png" type="image/png" media="(prefers-color-scheme: light)"/><link rel="icon" href="../../../../favicon-dark.1.png" type="image/png" media="(prefers-color-scheme: dark)"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&amp;family=Source+Code+Pro:wght@400;600&amp;display=auto" rel="stylesheet"/><title>Remix | Data Writes</title><meta name="description"/><link rel="preload" as="font" href="../../../../font/founders-grotesk-bold.woff2" crossorigin="anonymous"/><link rel="stylesheet" href="../../../../build/_assets/tailwind-XN5LJQWA.css"/><link rel="stylesheet" href="../../../../build/_assets/bailwind-QVFUVIGW.css"/><link rel="stylesheet" href="../../../../build/_assets/docs-TIR56M2J.css"/></head><body x-comp="Body" class="min-h-screen flex flex-col w-full overflow-x-hidden bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-200 undefined"><div class="lg:flex lg:h-full px-6"><div class="lg:hidden"><div class="absolute top-6 right-6"><a href="../../v1.html"><svg x-comp="Wordmark" height="24" viewBox="0 0 659 165" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Remix Logo</title><path fill-rule="evenodd" clip-rule="evenodd" d="M133.85 124.16C135.3 142.762 135.3 151.482 135.3 161H92.2283C92.2283 158.927 92.2653 157.03 92.3028 155.107C92.4195 149.128 92.5411 142.894 91.5717 130.304C90.2905 111.872 82.3473 107.776 67.7419 107.776H54.8021H0V74.24H69.7918C88.2407 74.24 97.4651 68.632 97.4651 53.784C97.4651 40.728 88.2407 32.816 69.7918 32.816H0V0H77.4788C119.245 0 140 19.712 140 51.2C140 74.752 125.395 90.112 105.665 92.672C122.32 96 132.057 105.472 133.85 124.16Z" fill="currentColor"></path><path d="M0 161V136H45.5416C53.1486 136 54.8003 141.638 54.8003 145V161H0Z" fill="currentColor"></path><path d="M654.54 47.1035H611.788L592.332 74.2395L573.388 47.1035H527.564L568.78 103.168L523.98 161.28H566.732L589.516 130.304L612.3 161.28H658.124L613.068 101.376L654.54 47.1035Z" fill="url(#paint0_linear)"></path><path d="M654.54 47.1035H611.788L592.332 74.2395L573.388 47.1035H527.564L568.78 103.168L523.98 161.28H566.732L589.516 130.304L612.3 161.28H658.124L613.068 101.376L654.54 47.1035Z" fill="currentColor"></path><path d="M229.43 120.576C225.59 129.536 218.422 133.376 207.158 133.376C194.614 133.376 184.374 126.72 183.35 112.64H263.478V101.12C263.478 70.1437 243.254 44.0317 205.11 44.0317C169.526 44.0317 142.902 69.8877 142.902 105.984C142.902 142.336 169.014 164.352 205.622 164.352C235.83 164.352 256.822 149.76 262.71 123.648L229.43 120.576ZM183.862 92.6717C185.398 81.9197 191.286 73.7277 204.598 73.7277C216.886 73.7277 223.542 82.4317 224.054 92.6717H183.862Z" fill="url(#paint1_linear)"></path><path d="M229.43 120.576C225.59 129.536 218.422 133.376 207.158 133.376C194.614 133.376 184.374 126.72 183.35 112.64H263.478V101.12C263.478 70.1437 243.254 44.0317 205.11 44.0317C169.526 44.0317 142.902 69.8877 142.902 105.984C142.902 142.336 169.014 164.352 205.622 164.352C235.83 164.352 256.822 149.76 262.71 123.648L229.43 120.576ZM183.862 92.6717C185.398 81.9197 191.286 73.7277 204.598 73.7277C216.886 73.7277 223.542 82.4317 224.054 92.6717H183.862Z" fill="currentColor"></path><path d="M385.256 66.5597C380.392 53.2477 369.896 44.0317 349.672 44.0317C332.52 44.0317 320.232 51.7117 314.088 64.2557V47.1037H272.616V161.28H314.088V105.216C314.088 88.0638 318.952 76.7997 332.52 76.7997C345.064 76.7997 348.136 84.9917 348.136 100.608V161.28H389.608V105.216C389.608 88.0638 394.216 76.7997 408.04 76.7997C420.584 76.7997 423.4 84.9917 423.4 100.608V161.28H464.872V89.5997C464.872 65.7917 455.656 44.0317 424.168 44.0317C404.968 44.0317 391.4 53.7597 385.256 66.5597Z" fill="url(#paint2_linear)"></path><path d="M385.256 66.5597C380.392 53.2477 369.896 44.0317 349.672 44.0317C332.52 44.0317 320.232 51.7117 314.088 64.2557V47.1037H272.616V161.28H314.088V105.216C314.088 88.0638 318.952 76.7997 332.52 76.7997C345.064 76.7997 348.136 84.9917 348.136 100.608V161.28H389.608V105.216C389.608 88.0638 394.216 76.7997 408.04 76.7997C420.584 76.7997 423.4 84.9917 423.4 100.608V161.28H464.872V89.5997C464.872 65.7917 455.656 44.0317 424.168 44.0317C404.968 44.0317 391.4 53.7597 385.256 66.5597Z" fill="currentColor"></path><path d="M478.436 47.104V161.28H519.908V47.104H478.436ZM478.18 36.352H520.164V0H478.18V36.352Z" fill="url(#paint3_linear)"></path><path d="M478.436 47.104V161.28H519.908V47.104H478.436ZM478.18 36.352H520.164V0H478.18V36.352Z" fill="currentColor"></path><defs><linearGradient id="paint0_linear" x1="591.052" y1="47.1035" x2="591.052" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint1_linear" x1="203.19" y1="44.0317" x2="203.19" y2="164.352" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint2_linear" x1="368.744" y1="44.0317" x2="368.744" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint3_linear" x1="499.172" y1="0" x2="499.172" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient></defs></svg></a></div><details><summary class="pb-4 pt-6 cursor-pointer">Docs Navigation</summary><div><nav class="md-nav py-6 text-d-p-sm font-medium"><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="1"><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading pt-0">Tutorials</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../tutorials/blog.html">Developer Blog</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../tutorials/jokes.html">Jokes App</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">API</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../api/conventions.html">Conventions</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../api/remix.html">Remix Package</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">Other API</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/dev.html">@remix-run/dev (CLI)</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/adapter.html">@remix-run/{adapter}</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/node.html">@remix-run/node</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/serve.html">@remix-run/serve</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/constraints.html">Module Constraints</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/react-router.html">React Router v6</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/fetch.html">Web Fetch API</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">Guides</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="accessibility.html">Accessibility</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="api-routes.html">API Routes</a></li><li data-dir="" data-level="2"><a aria-current="page" class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2 md-nav-item--active" href="data-writes.html">Data Writes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="deployment.html">Deployment</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="disabling-javascript.html">Disabling JavaScript</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="envvars.html">Environment Variables</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="errors.html">Error Handling</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="mdx.html">MDX</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="not-found.html">Not Found Handling</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="optimistic-ui.html">Optimistic UI</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="performance.html">Performance</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="philosophy.html">Philosophy</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="resource-routes.html">Resource Routes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="routing.html">Routing</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="styling.html">Styling</a></li></ul></li><li data-dir="" data-level="1"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading" href="../contributing.html">Contributing</a></li></ul></nav></div></details><hr class="mb-4"/></div><div class="flex-shrink-0 hidden lg:block"><div class="h-full max-h-screen overflow-x-hidden overflow-y-auto w-64 xl:w-80 2xl:w-96 sticky top-0 py-10 pl-6 pr-3 xl:pr-5 2xl:pr-6"><a href="../../v1.html"><svg x-comp="Wordmark" height="24" viewBox="0 0 659 165" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Remix Logo</title><path fill-rule="evenodd" clip-rule="evenodd" d="M133.85 124.16C135.3 142.762 135.3 151.482 135.3 161H92.2283C92.2283 158.927 92.2653 157.03 92.3028 155.107C92.4195 149.128 92.5411 142.894 91.5717 130.304C90.2905 111.872 82.3473 107.776 67.7419 107.776H54.8021H0V74.24H69.7918C88.2407 74.24 97.4651 68.632 97.4651 53.784C97.4651 40.728 88.2407 32.816 69.7918 32.816H0V0H77.4788C119.245 0 140 19.712 140 51.2C140 74.752 125.395 90.112 105.665 92.672C122.32 96 132.057 105.472 133.85 124.16Z" fill="currentColor"></path><path d="M0 161V136H45.5416C53.1486 136 54.8003 141.638 54.8003 145V161H0Z" fill="currentColor"></path><path d="M654.54 47.1035H611.788L592.332 74.2395L573.388 47.1035H527.564L568.78 103.168L523.98 161.28H566.732L589.516 130.304L612.3 161.28H658.124L613.068 101.376L654.54 47.1035Z" fill="url(#paint0_linear)"></path><path d="M654.54 47.1035H611.788L592.332 74.2395L573.388 47.1035H527.564L568.78 103.168L523.98 161.28H566.732L589.516 130.304L612.3 161.28H658.124L613.068 101.376L654.54 47.1035Z" fill="currentColor"></path><path d="M229.43 120.576C225.59 129.536 218.422 133.376 207.158 133.376C194.614 133.376 184.374 126.72 183.35 112.64H263.478V101.12C263.478 70.1437 243.254 44.0317 205.11 44.0317C169.526 44.0317 142.902 69.8877 142.902 105.984C142.902 142.336 169.014 164.352 205.622 164.352C235.83 164.352 256.822 149.76 262.71 123.648L229.43 120.576ZM183.862 92.6717C185.398 81.9197 191.286 73.7277 204.598 73.7277C216.886 73.7277 223.542 82.4317 224.054 92.6717H183.862Z" fill="url(#paint1_linear)"></path><path d="M229.43 120.576C225.59 129.536 218.422 133.376 207.158 133.376C194.614 133.376 184.374 126.72 183.35 112.64H263.478V101.12C263.478 70.1437 243.254 44.0317 205.11 44.0317C169.526 44.0317 142.902 69.8877 142.902 105.984C142.902 142.336 169.014 164.352 205.622 164.352C235.83 164.352 256.822 149.76 262.71 123.648L229.43 120.576ZM183.862 92.6717C185.398 81.9197 191.286 73.7277 204.598 73.7277C216.886 73.7277 223.542 82.4317 224.054 92.6717H183.862Z" fill="currentColor"></path><path d="M385.256 66.5597C380.392 53.2477 369.896 44.0317 349.672 44.0317C332.52 44.0317 320.232 51.7117 314.088 64.2557V47.1037H272.616V161.28H314.088V105.216C314.088 88.0638 318.952 76.7997 332.52 76.7997C345.064 76.7997 348.136 84.9917 348.136 100.608V161.28H389.608V105.216C389.608 88.0638 394.216 76.7997 408.04 76.7997C420.584 76.7997 423.4 84.9917 423.4 100.608V161.28H464.872V89.5997C464.872 65.7917 455.656 44.0317 424.168 44.0317C404.968 44.0317 391.4 53.7597 385.256 66.5597Z" fill="url(#paint2_linear)"></path><path d="M385.256 66.5597C380.392 53.2477 369.896 44.0317 349.672 44.0317C332.52 44.0317 320.232 51.7117 314.088 64.2557V47.1037H272.616V161.28H314.088V105.216C314.088 88.0638 318.952 76.7997 332.52 76.7997C345.064 76.7997 348.136 84.9917 348.136 100.608V161.28H389.608V105.216C389.608 88.0638 394.216 76.7997 408.04 76.7997C420.584 76.7997 423.4 84.9917 423.4 100.608V161.28H464.872V89.5997C464.872 65.7917 455.656 44.0317 424.168 44.0317C404.968 44.0317 391.4 53.7597 385.256 66.5597Z" fill="currentColor"></path><path d="M478.436 47.104V161.28H519.908V47.104H478.436ZM478.18 36.352H520.164V0H478.18V36.352Z" fill="url(#paint3_linear)"></path><path d="M478.436 47.104V161.28H519.908V47.104H478.436ZM478.18 36.352H520.164V0H478.18V36.352Z" fill="currentColor"></path><defs><linearGradient id="paint0_linear" x1="591.052" y1="47.1035" x2="591.052" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint1_linear" x1="203.19" y1="44.0317" x2="203.19" y2="164.352" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint2_linear" x1="368.744" y1="44.0317" x2="368.744" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient><linearGradient id="paint3_linear" x1="499.172" y1="0" x2="499.172" y2="161.28" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor"></stop><stop offset="1" stop-color="currentColor" stop-opacity="0"></stop></linearGradient></defs></svg></a><div class="h-8"></div><nav class="md-nav"><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="1"><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading pt-0">Tutorials</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../tutorials/blog.html">Developer Blog</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../tutorials/jokes.html">Jokes App</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">API</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../api/conventions.html">Conventions</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../api/remix.html">Remix Package</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">Other API</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/dev.html">@remix-run/dev (CLI)</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/adapter.html">@remix-run/{adapter}</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/node.html">@remix-run/node</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/serve.html">@remix-run/serve</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/constraints.html">Module Constraints</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/react-router.html">React Router v6</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="../other-api/fetch.html">Web Fetch API</a></li></ul></li><li data-dir="" data-level="1"><span class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading">Guides</span><ul class="md-nav-list text-[color:var(--hue-0750)] mb-3" data-level="2"><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="accessibility.html">Accessibility</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="api-routes.html">API Routes</a></li><li data-dir="" data-level="2"><a aria-current="page" class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2 md-nav-item--active" href="data-writes.html">Data Writes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="deployment.html">Deployment</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="disabling-javascript.html">Disabling JavaScript</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="envvars.html">Environment Variables</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="errors.html">Error Handling</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="mdx.html">MDX</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="not-found.html">Not Found Handling</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="optimistic-ui.html">Optimistic UI</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="performance.html">Performance</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="philosophy.html">Philosophy</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="resource-routes.html">Resource Routes</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="routing.html">Routing</a></li><li data-dir="" data-level="2"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-2" href="styling.html">Styling</a></li></ul></li><li data-dir="" data-level="1"><a class="md-nav-item py-1 block text-m-p-sm lg:text-sm md-nav-item--level-1 md-nav-heading" href="../contributing.html">Contributing</a></li></ul></nav></div></div><div class="lg:z-[1] flex-grow lg:h-full"><div class="py-6 md:py-8 lg:py-10 lg:pr-6 lg:pl-3 xl:pl-5 2xl:pl-6"><div><div class="markdown has-toc"><div class="md-toc-container"><div class="md-toc-nav" role="navigation"><ul class="toc">
<li>
<p><a href="data-writes.html#data-writes">Data Writes</a></p>
<ul>
<li>
<p><a href="data-writes.html#plain-html-forms">Plain HTML Forms</a></p>
<ul>
<li><a href="data-writes.html#html-form-http-verbs">HTML Form HTTP Verbs</a></li>
<li><a href="data-writes.html#html-form-get">HTML Form GET</a></li>
<li><a href="data-writes.html#html-form-post">HTML Form POST</a></li>
</ul>
</li>
<li>
<p><a href="data-writes.html#remix-mutation-start-to-finish">Remix Mutation, Start to Finish</a></p>
<ul>
<li><a href="data-writes.html#building-the-form">Building the form</a></li>
<li><a href="data-writes.html#form-validation">Form Validation</a></li>
<li><a href="data-writes.html#graduate-to-form-and-add-pending-ui">Graduate to <code>&#x3C;Form></code> and add pending UI</a></li>
<li><a href="data-writes.html#animating-in-the-validation-errors">Animating in the Validation Errors</a></li>
<li><a href="data-writes.html#review">Review</a></li>
</ul>
</li>
<li>
<p><a href="data-writes.html#see-also">See also</a></p>
</li>
</ul>
</li>
</ul></div><div class="md-prose"><h1 id="data-writes"><a href="data-writes.html#data-writes" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Data Writes</h1><p>Data writes (some people call these mutations) in Remix are built on top of two fundamental web APIs: <code>&#x3C;form></code> and HTTP. We then use progressive enhancement to enable optimistic UI, loading indicators, and validation feedback--but the programming model is still built on HTML forms.</p><p>When the user submits a form, Remix will:</p><ol>
<li>Call the action for the form</li>
<li>Reload all of the data for all of the routes on the page</li>
</ol><p>Many times people reach for global state management libraries in React like redux, data libs like apollo, and fetch wrappers like React Query in order to help manage getting server state into your components and keeping the UI in sync with it when the user changes it. Remix's HTML based API replaces the majority of use cases for these tools. Remix knows how to load the data as well as how to revalidate it after it changes when you use standard HTML APIs.</p><p>There are a few ways to call an action and get the routes to revalidate:</p><ul>
<li><a href="../../v1.0.5/api/remix.html#form"><code>&#x3C;Form></code></a></li>
<li><a href="../../v1.0.5/api/remix.html#usesubmit"><code>useSubmit()</code></a></li>
<li><a href="../../v1.0.5/api/remix.html#usefetcher"><code>useFetcher()</code></a></li>
</ul><p>This guide only covers <code>&#x3C;Form></code>. We suggest you read the docs for the other two after this guide to get a sense of how to use them. Most of this guide applies to <code>useSubmit</code> but <code>useFetcher</code> is a bit different.</p><h2 id="plain-html-forms"><a href="data-writes.html#plain-html-forms" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Plain HTML Forms</h2><p>After teaching workshops with our company <a href="https://reacttraining.com">React Training</a> for years, we've learned that a lot of newer web developers (through no fault of their own) don't actually know how <code>&#x3C;form></code> works!</p><p>Since Remix <code>&#x3C;Form></code> works identically to <code>&#x3C;form></code> (with a couple extra goodies for optimistic UI etc.), we're going to brush up on plain ol' HTML forms, so you can learn both HTML and Remix at the same time.</p><h3 id="html-form-http-verbs"><a href="data-writes.html#html-form-http-verbs" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>HTML Form HTTP Verbs</h3><p>Native forms support two HTTP verbs: <code>GET</code> and <code>POST</code>. Remix uses these verbs to understand your intent. If it's a get, Remix will figure out what parts of the page are changing and only fetch the data for the changing layouts, and use the cached data for the layouts that don't change. When it's a POST, Remix will reload all data to ensure it captures the update from the server. Let's take a look at both.</p><h3 id="html-form-get"><a href="data-writes.html#html-form-get" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>HTML Form GET</h3><p>A <code>GET</code> is just a normal navigation where the form data is passed in the URL search params. You use it for normal navigation, just like <code>&#x3C;a></code> excpect the user gets to provide the data in the search params through the form. Aside from search pages, it's use with <code>&#x3C;form></code> is pretty rare.</p><p>Consider this form:</p><div><pre data-line-numbers="true" data-lang="html" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0A)">method</span>="<span style="color: var(--base0B)">get</span>" <span style="color: var(--base0A)">action</span>="<span style="color: var(--base0B)">/search</span>">
</span><span class="codeblock-line" data-line-number="2">  &#x3C;<span style="color: var(--base08)">label</span>>Search &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">term</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">text</span>" />&#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="3">  &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">submit</span>">Search&#x3C;/<span style="color: var(--base08)">button</span>>
</span><span class="codeblock-line" data-line-number="4">&#x3C;/<span style="color: var(--base08)">form</span>>
</span></code></pre></div><p>When the user fills it out and clicks submit, the browser automatically serializes the form values into a URL search param string and navigates to the form's <code>action</code> with the query string appended. Let's say the user typed in "remix". The browser would navigate to <code>/search?term=remix</code>. If we changed the input to <code>&#x3C;input name="q"/></code> then the form would navigate to <code>/search?q=remix</code>.</p><p>It's the same behavior as if we had created this link:</p><div><pre data-line-numbers="true" data-lang="html" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">a</span> <span style="color: var(--base0A)">href</span>="<span style="color: var(--base0B)">/search?term=remix</span>">Search for "remix"&#x3C;/<span style="color: var(--base08)">a</span>>
</span></code></pre></div><p>With the unique difference that the <strong>user</strong> got to supply the information.</p><p>If you have more fields, the browser will add them:</p><div><pre data-line-numbers="true" data-lang="html" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0A)">method</span>="<span style="color: var(--base0B)">get</span>" <span style="color: var(--base0A)">action</span>="<span style="color: var(--base0B)">/search</span>">
</span><span class="codeblock-line" data-line-number="2">  &#x3C;<span style="color: var(--base08)">fieldset</span>>
</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base08)">legend</span>>Brand&#x3C;/<span style="color: var(--base08)">legend</span>>
</span><span class="codeblock-line" data-line-number="4">    &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="5">      &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">brand</span>" <span style="color: var(--base0A)">value</span>="<span style="color: var(--base0B)">nike</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">checkbox</span>" />
</span><span class="codeblock-line" data-line-number="6">      Nike
</span><span class="codeblock-line" data-line-number="7">    &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="8">    &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="9">      &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">brand</span>" <span style="color: var(--base0A)">value</span>="<span style="color: var(--base0B)">reebok</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">checkbox</span>" />
</span><span class="codeblock-line" data-line-number="10">      Reebok
</span><span class="codeblock-line" data-line-number="11">    &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="12">    &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="13">      &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">color</span>" <span style="color: var(--base0A)">value</span>="<span style="color: var(--base0B)">white</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">checkbox</span>" />
</span><span class="codeblock-line" data-line-number="14">      White
</span><span class="codeblock-line" data-line-number="15">    &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="16">    &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="17">      &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">color</span>" <span style="color: var(--base0A)">value</span>="<span style="color: var(--base0B)">black</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">checkbox</span>" />
</span><span class="codeblock-line" data-line-number="18">      White
</span><span class="codeblock-line" data-line-number="19">    &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="20">    &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">submit</span>">Search&#x3C;/<span style="color: var(--base08)">button</span>>
</span><span class="codeblock-line" data-line-number="21">  &#x3C;/<span style="color: var(--base08)">fieldset</span>>
</span><span class="codeblock-line" data-line-number="22">&#x3C;/<span style="color: var(--base08)">form</span>>
</span></code></pre></div><p>Depending on which checkboxes the uses clicks, the browser will navigate to URLs like:</p><pre><code>/search?brand=nike&#x26;color=black
/search?brand=nike&#x26;brand=reebok&#x26;color=white
</code></pre><h3 id="html-form-post"><a href="data-writes.html#html-form-post" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>HTML Form POST</h3><p>When you want to create, delete, or update data on your website, a form post is the way to go. And we don't just mean big forms like a user profile edit page. Even "Like" buttons can be handled with a form.</p><p>Let's consider a "new project" form.</p><div><pre data-line-numbers="true" data-lang="html" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0A)">method</span>="<span style="color: var(--base0B)">post</span>" <span style="color: var(--base0A)">action</span>="<span style="color: var(--base0B)">/projects</span>">
</span><span class="codeblock-line" data-line-number="2">  &#x3C;<span style="color: var(--base08)">label</span>>&#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">name</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">text</span>" />&#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="3">  &#x3C;<span style="color: var(--base08)">label</span>>&#x3C;<span style="color: var(--base08)">textarea</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">description</span>">&#x3C;/<span style="color: var(--base08)">textarea</span>>&#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="4">  &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">submit</span>">Create&#x3C;/<span style="color: var(--base08)">button</span>>
</span><span class="codeblock-line" data-line-number="5">&#x3C;/<span style="color: var(--base08)">form</span>>
</span></code></pre></div><p>When the user submits this form, the browser will serialize the fields into a request "body" (instead of URL search params) and "POST" it to the server. This is still a normal navigation as if the user clicked a link. The difference is twofold: the user provided the data for the server and the browser sent the request as a "POST" instead of a "GET".</p><p>The data is made available to the server's request handler so you can create the record. After that, you return a response. In this case, you'd probably redirect to the newly created project. A remix action would look something like this:</p><div><pre data-filename="app/routes/projects" data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">action</span>({ <span style="color: var(--base08)">request</span> }) {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">body</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">formData</span>();
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">project</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">createProject</span>(<span style="color: var(--base08)">body</span>);
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0D)">redirect</span>(`<span style="color: var(--base0B)">/projects/</span>${<span style="color: var(--base08)">project</span>.<span style="color: var(--base08)">id</span>}`);
</span><span class="codeblock-line" data-line-number="5">}
</span></code></pre></div><p>The browser started at <code>/projects/new</code>, then posted to <code>/projects</code> with the form data in the request, then the server redirected the browser to <code>/projects/123</code>. While this is all happening, the browser goes into it's normal "loading" state: the address progress bar fills up, the favicon turns into a spinner, etc. It's actually a decent user experience.</p><p>If you're newer to web development, you may not have ever used a form this way. Lots of folks have always done:</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">form</span>
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0D)">onSubmit</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">event</span> <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="3">    <span style="color: var(--base08)">event</span>.<span style="color: var(--base0D)">preventDefault</span>();
</span><span class="codeblock-line" data-line-number="4">    <span style="color: var(--base03)">// good luck!</span>
</span><span class="codeblock-line" data-line-number="5">  }<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="6">/>
</span></code></pre></div><p>If this is you, you're going to be delighted when you see just how easy mutations can be when you just use what browsers (and Remix) have built in!</p><h2 id="remix-mutation-start-to-finish"><a href="data-writes.html#remix-mutation-start-to-finish" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Remix Mutation, Start to Finish</h2><p>We're going to build a mutation from start to finish with:</p><ol>
<li>JavaScript optional</li>
<li>Validation</li>
<li>Error handling</li>
<li>Progressively enhanced loading indicators</li>
<li>Progressively enhanced error display</li>
</ol><p>You use the Remix <code>&#x3C;Form></code> component for data mutations the same way you use HTML forms. The difference is now you get access to pending form state to build a nicer user experience: like contextual loading indicators and "optimistic UI".</p><p>Whether you use <code>&#x3C;form></code> or <code>&#x3C;Form></code> though, you write the very same code. You can start with a <code>&#x3C;form></code> and then graduate it to <code>&#x3C;Form></code> without changing anything. After that, add in the special loading indicators and optimistic UI. However, if you're not feeling up to it, or deadlines are tight, just us a <code>&#x3C;form></code> and let the browser handle the user feedback! Remix <code>&#x3C;Form></code> is the realization of "progressive enhancement" for mutations.</p><h3 id="building-the-form"><a href="data-writes.html#building-the-form" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Building the form</h3><p>Let's start with our project form from earlier but make it usable:</p><p>Let's say you've got the route <code>app/routes/projects/new.js</code> with this form in it:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>" <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">/projects/new</span>">
</span><span class="codeblock-line" data-line-number="4">      &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="5">        &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="6">          Name: &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">name</span>" <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>" />
</span><span class="codeblock-line" data-line-number="7">        &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="8">      &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="9">      &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="10">        &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="11">          Description:
</span><span class="codeblock-line" data-line-number="12">          &#x3C;<span style="color: var(--base08)">br</span> />
</span><span class="codeblock-line" data-line-number="13">          &#x3C;<span style="color: var(--base08)">textarea</span> <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">description</span>" />
</span><span class="codeblock-line" data-line-number="14">        &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="15">      &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="16">      &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="17">        &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">Create&#x3C;/<span style="color: var(--base08)">button</span>>
</span><span class="codeblock-line" data-line-number="18">      &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="19">    &#x3C;/<span style="color: var(--base08)">form</span>>
</span><span class="codeblock-line" data-line-number="20">  );
</span><span class="codeblock-line" data-line-number="21">}
</span></code></pre></div><p>Now add the route action. Any form submissions that are "post" will call your data "action". Any "get" submissions (<code>&#x3C;Form method="get"></code>) will be handled by your "loader".</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">ActionFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="3">
</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base03)">// Note the "action" export name, this will handle our form POST</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="5"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">ActionFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">request</span> }) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-highlight="true" data-line-number="6">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">formData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">formData</span>();
</span><span class="codeblock-line" data-highlight="true" data-line-number="7">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">project</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">createProject</span>(<span style="color: var(--base08)">formData</span>);
</span><span class="codeblock-line" data-highlight="true" data-line-number="8">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">redirect</span>(`<span style="color: var(--base0B)">/projects/</span>${<span style="color: var(--base08)">project</span>.<span style="color: var(--base08)">id</span>}`);
</span><span class="codeblock-line" data-highlight="true" data-line-number="9">};
</span><span class="codeblock-line" data-line-number="10">
</span><span class="codeblock-line" data-line-number="11"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {
</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base03)">// ... same as before</span>
</span><span class="codeblock-line" data-line-number="13">}
</span></code></pre></div><p>And that's it! Assuming <code>createProject</code> does what we want it to, that's all you have to do. Note that no matter what kind of SPA you may have built in the past, you always need a server side action and a form to get data from the user. The difference with Remix is <strong>that's all you need</strong> (and that's how the web used to be, too.)</p><p>Of course, we started complicating things to try to create better user experiences than the default browser behavior. Keep going, we'll get there, but we won’t have to change any of the code we've already written to get the core functionality.</p><h3 id="form-validation"><a href="data-writes.html#form-validation" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Form Validation</h3><p>It's common to validate forms both clientside and serverside. It's also (unfortunately) common to only validate clientside, which leads to various issues with your data that we don't have time to get into right now. Point is, if your validating in only one place, do it on the server. You find with Remix that's the only place you care to anymore (the less you send to the browser the better!).</p><p>We know, we know, you want to animate in nice validation errors and stuff. We'll get to that. But right now we're just building a basic HTML form and user flow. We'll keep it simple first, then make it fancy.</p><p>Back in our action, maybe we have an API that returns validation errors like this.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0A)">let</span> [<span style="color: var(--base08)">errors</span>, <span style="color: var(--base08)">project</span>] <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">createProject</span>(<span style="color: var(--base08)">newProject</span>);
</span></code></pre></div><p>If there are validation errors, we want to go back to the form and display them.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">ActionFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">request</span> }) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">formData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">formData</span>();
</span><span class="codeblock-line" data-highlight="true" data-line-number="3">  <span style="color: var(--base0A)">let</span> [<span style="color: var(--base08)">errors</span>, <span style="color: var(--base08)">project</span>] <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">createProject</span>(<span style="color: var(--base08)">formData</span>);
</span><span class="codeblock-line" data-line-number="4">
</span><span class="codeblock-line" data-highlight="true" data-line-number="5">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base08)">errors</span>) {
</span><span class="codeblock-line" data-highlight="true" data-line-number="6">    <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">values</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0A)">Object</span>.<span style="color: var(--base0D)">fromEntries</span>(<span style="color: var(--base08)">newProject</span>);
</span><span class="codeblock-line" data-highlight="true" data-line-number="7">    <span style="color: var(--base0E)">return</span> { <span style="color: var(--base08)">errors</span>, <span style="color: var(--base08)">values</span> };
</span><span class="codeblock-line" data-highlight="true" data-line-number="8">  }
</span><span class="codeblock-line" data-line-number="9">
</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">redirect</span>(`<span style="color: var(--base0B)">/projects/</span>${<span style="color: var(--base08)">project</span>.<span style="color: var(--base08)">id</span>}`);
</span><span class="codeblock-line" data-line-number="11">};
</span></code></pre></div><p>Just like <code>useLoaderData</code> returns the values from the <code>loader</code>, <code>useActionData</code> will return the data from the action. It will only be there if the navigation was a form submission, so you always have to check if you've got it or not.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-highlight="true" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span>, <span style="color: var(--base08)">useActionData</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">ActionFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">request</span> }) <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base03)">// ...</span>
</span><span class="codeblock-line" data-line-number="5">};
</span><span class="codeblock-line" data-line-number="6">
</span><span class="codeblock-line" data-line-number="7"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {
</span><span class="codeblock-line" data-highlight="true" data-line-number="8">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useActionData</span>();
</span><span class="codeblock-line" data-line-number="9">
</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="11">    &#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>" <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">/projects/new</span>">
</span><span class="codeblock-line" data-line-number="12">      &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="13">        &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="14">          Name:<span style="color: var(--base0F)">{</span>"<span style="color: var(--base0B)"> </span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="15">          &#x3C;<span style="color: var(--base08)">input</span>
</span><span class="codeblock-line" data-line-number="16">            <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">name</span>"
</span><span class="codeblock-line" data-line-number="17">            <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>"
</span><span class="codeblock-line" data-highlight="true" data-line-number="18">            <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="19">          />
</span><span class="codeblock-line" data-line-number="20">        &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="21">      &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="22">
</span><span class="codeblock-line" data-highlight="true" data-line-number="23">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (
</span><span class="codeblock-line" data-highlight="true" data-line-number="24">        &#x3C;<span style="color: var(--base08)">p</span> <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{ color: "<span style="color: var(--base0B)">red</span>" }<span style="color: var(--base0F)">}</span>>
</span><span class="codeblock-line" data-highlight="true" data-line-number="25">          <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="26">        &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-highlight="true" data-line-number="27">      )<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="28">
</span><span class="codeblock-line" data-line-number="29">      &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="30">        &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="31">          Description:
</span><span class="codeblock-line" data-line-number="32">          &#x3C;<span style="color: var(--base08)">br</span> />
</span><span class="codeblock-line" data-line-number="33">          &#x3C;<span style="color: var(--base08)">textarea</span>
</span><span class="codeblock-line" data-line-number="34">            <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">description</span>"
</span><span class="codeblock-line" data-highlight="true" data-line-number="35">            <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="36">          />
</span><span class="codeblock-line" data-line-number="37">        &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="38">      &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="39">
</span><span class="codeblock-line" data-highlight="true" data-line-number="40">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (
</span><span class="codeblock-line" data-highlight="true" data-line-number="41">        &#x3C;<span style="color: var(--base08)">p</span> <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{ color: "<span style="color: var(--base0B)">red</span>" }<span style="color: var(--base0F)">}</span>>
</span><span class="codeblock-line" data-highlight="true" data-line-number="42">          <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="43">        &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-highlight="true" data-line-number="44">      )<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="45">
</span><span class="codeblock-line" data-line-number="46">      &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="47">        &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">Create&#x3C;/<span style="color: var(--base08)">button</span>>
</span><span class="codeblock-line" data-line-number="48">      &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="49">    &#x3C;/<span style="color: var(--base08)">form</span>>
</span><span class="codeblock-line" data-line-number="50">  );
</span><span class="codeblock-line" data-line-number="51">}
</span></code></pre></div><p>Notice how we add <code>defaultValue</code> to all of our inputs. Remember, this is regular HTML <code>&#x3C;form></code>, so it's just normal browser/server stuff happening. We're getting the values back from the server so the user doesn't have to re-type what they had.</p><p>You can ship this code as-is. The browser will handle the pending UI and interruptions for you. Enjoy your weekend and make it fancy on Monday.</p><h3 id="graduate-to-form-and-add-pending-ui"><a href="data-writes.html#graduate-to-form-and-add-pending-ui" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Graduate to <code>&#x3C;Form></code> and add pending UI</h3><p>Let's use progressive enhancement to make this UX a bit more fancy. By changing it from <code>&#x3C;Form reloadDocument></code> to <code>&#x3C;Form></code>, Remix will emulate the browser behavior with <code>fetch</code>. It will also give you access to the pending form data so you can build pending UI.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-highlight="true" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span>, <span style="color: var(--base08)">useActionData</span>, <span style="color: var(--base08)">Form</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="2">
</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base03)">// ...</span>
</span><span class="codeblock-line" data-line-number="4">
</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {
</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useActionData</span>();
</span><span class="codeblock-line" data-line-number="7">
</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base03)">// note the capital "F" &#x3C;Form> now</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="10">    &#x3C;<span style="color: var(--base0A)">Form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>"><span style="color: var(--base0F)">{</span><span style="color: var(--base03)">/* ... */</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base0A)">Form</span>>
</span><span class="codeblock-line" data-line-number="11">  );
</span><span class="codeblock-line" data-line-number="12">}
</span></code></pre></div><p><docs-error>HOLD UP! If all you do is change your form to Form, you made the UX a little worse!</docs-error></p><p>If you don't have the time or drive to do the rest of the job here, use <code>&#x3C;Form reloadDocument></code>. This lets the browser continue to handle the pending UI state (spinner in the favicon of the tab, progress bar in the address bar, etc.) If you simply use <code>&#x3C;Form></code> without implementing pending UI, the user will have no idea anything is happening when they submit a form.</p><p><docs-info>We recommend always using capital-F Form, and if you want to let the browser handle the pending UI, use the <code>&#x3C;Form reloadDocument></code> prop.</docs-info></p><p>Now let's add some pending UI so the user has a clue something happened when they submit. There's a hook called <code>useTransition</code>. When there is a pending form submission, Remix will give you the serialized version of the form as a <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData"><code>FormData</code></a> object. You'll be most interested in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData/get"><code>formData.get()</code></a> method..</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base08)">redirect</span>,
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base08)">useActionData</span>,
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base08)">Form</span>,
</span><span class="codeblock-line" data-highlight="true" data-line-number="5">  <span style="color: var(--base08)">useTransition</span>
</span><span class="codeblock-line" data-line-number="6">} <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";
</span><span class="codeblock-line" data-line-number="7">
</span><span class="codeblock-line" data-line-number="8"><span style="color: var(--base03)">// ...</span>
</span><span class="codeblock-line" data-line-number="9">
</span><span class="codeblock-line" data-line-number="10"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {
</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base03)">// when the form is being processed on the server, this returns different</span>
</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base03)">// transition states to help us build pending and optimistic UI.</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="13">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">transition</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useTransition</span>();
</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useActionData</span>();
</span><span class="codeblock-line" data-line-number="15">
</span><span class="codeblock-line" data-line-number="16">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="17">    &#x3C;<span style="color: var(--base0A)">Form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>">
</span><span class="codeblock-line" data-line-number="18">      &#x3C;<span style="color: var(--base08)">fieldset</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="19">        <span style="color: var(--base0D)">disabled</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="20">      >
</span><span class="codeblock-line" data-line-number="21">        &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="22">          &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="23">            Name:<span style="color: var(--base0F)">{</span>"<span style="color: var(--base0B)"> </span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="24">            &#x3C;<span style="color: var(--base08)">input</span>
</span><span class="codeblock-line" data-line-number="25">              <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">name</span>"
</span><span class="codeblock-line" data-line-number="26">              <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>"
</span><span class="codeblock-line" data-line-number="27">              <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>
</span><span class="codeblock-line" data-line-number="28">                <span style="color: var(--base08)">actionData</span>
</span><span class="codeblock-line" data-line-number="29">                  <span style="color: var(--base0E)">?</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">name</span>
</span><span class="codeblock-line" data-line-number="30">                  <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">undefined</span>
</span><span class="codeblock-line" data-line-number="31">              <span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="32">            />
</span><span class="codeblock-line" data-line-number="33">          &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="34">        &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="35">
</span><span class="codeblock-line" data-line-number="36">        <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (
</span><span class="codeblock-line" data-line-number="37">          &#x3C;<span style="color: var(--base08)">p</span> <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{ color: "<span style="color: var(--base0B)">red</span>" }<span style="color: var(--base0F)">}</span>>
</span><span class="codeblock-line" data-line-number="38">            <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="39">          &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="40">        )<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="41">
</span><span class="codeblock-line" data-line-number="42">        &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="43">          &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="44">            Description:
</span><span class="codeblock-line" data-line-number="45">            &#x3C;<span style="color: var(--base08)">br</span> />
</span><span class="codeblock-line" data-line-number="46">            &#x3C;<span style="color: var(--base08)">textarea</span>
</span><span class="codeblock-line" data-line-number="47">              <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">description</span>"
</span><span class="codeblock-line" data-line-number="48">              <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>
</span><span class="codeblock-line" data-line-number="49">                <span style="color: var(--base08)">actionData</span>
</span><span class="codeblock-line" data-line-number="50">                  <span style="color: var(--base0E)">?</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">description</span>
</span><span class="codeblock-line" data-line-number="51">                  <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">undefined</span>
</span><span class="codeblock-line" data-line-number="52">              <span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="53">            />
</span><span class="codeblock-line" data-line-number="54">          &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="55">        &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="56">
</span><span class="codeblock-line" data-line-number="57">        <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (
</span><span class="codeblock-line" data-line-number="58">          &#x3C;<span style="color: var(--base08)">p</span> <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{ color: "<span style="color: var(--base0B)">red</span>" }<span style="color: var(--base0F)">}</span>>
</span><span class="codeblock-line" data-line-number="59">            <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="60">          &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="61">        )<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="62">
</span><span class="codeblock-line" data-line-number="63">        &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="64">          &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">
</span><span class="codeblock-line" data-highlight="true" data-line-number="65">            <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"
</span><span class="codeblock-line" data-highlight="true" data-line-number="66">              <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">Creating...</span>"
</span><span class="codeblock-line" data-highlight="true" data-line-number="67">              <span style="color: var(--base0E)">:</span> "<span style="color: var(--base0B)">Create</span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="68">          &#x3C;/<span style="color: var(--base08)">button</span>>
</span><span class="codeblock-line" data-line-number="69">        &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="70">      &#x3C;/<span style="color: var(--base08)">fieldset</span>>
</span><span class="codeblock-line" data-line-number="71">    &#x3C;/<span style="color: var(--base0A)">Form</span>>
</span><span class="codeblock-line" data-line-number="72">  );
</span><span class="codeblock-line" data-line-number="73">}
</span></code></pre></div><p>Pretty slick! Now when the user clicks "Create", the inputs go disabled, and the submit button's text changes. The whole operation should be faster now too since there's just one network request happening instead of a full page reload (which involves potentially more network requests, reading assets from the browser cache, parsing JavaScript, parsing CSS, etc.).</p><p>We didn't do much with <code>transition</code> on this page, but it's got all the information about the submission on <code>transition.submission</code>, including all of the values being processed on the server on <code>submission.formData</code>.</p><h3 id="animating-in-the-validation-errors"><a href="data-writes.html#animating-in-the-validation-errors" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Animating in the Validation Errors</h3><p>Now that we're using JavaScript to submit this page, our validation errors can be animated in because the page is stateful. First we'll make a fancy component that animates height and opacity:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">ValidationMessage</span>({ <span style="color: var(--base08)">error</span>, <span style="color: var(--base08)">isSubmitting</span> }) {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> [<span style="color: var(--base08)">show</span>, <span style="color: var(--base08)">setShow</span>] <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useState</span>(<span style="color: var(--base0E)">!!</span><span style="color: var(--base08)">error</span>);
</span><span class="codeblock-line" data-line-number="3">
</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0D)">useEffect</span>(() <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="5">    <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">id</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">setTimeout</span>(() <span style="color: var(--base0D)">=></span> {
</span><span class="codeblock-line" data-line-number="6">      <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">hasError</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">!!</span><span style="color: var(--base08)">error</span>;
</span><span class="codeblock-line" data-line-number="7">      <span style="color: var(--base0D)">setShow</span>(<span style="color: var(--base08)">hasError</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> <span style="color: var(--base0E)">!</span><span style="color: var(--base08)">isSubmitting</span>);
</span><span class="codeblock-line" data-line-number="8">    });
</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base0E)">return</span> () <span style="color: var(--base0D)">=></span> <span style="color: var(--base0D)">clearTimeout</span>(<span style="color: var(--base08)">id</span>);
</span><span class="codeblock-line" data-line-number="10">  }, [<span style="color: var(--base08)">error</span>, <span style="color: var(--base08)">isSubmitting</span>]);
</span><span class="codeblock-line" data-line-number="11">
</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="13">    &#x3C;<span style="color: var(--base08)">div</span>
</span><span class="codeblock-line" data-line-number="14">      <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{
</span><span class="codeblock-line" data-line-number="15">        opacity: <span style="color: var(--base08)">show</span> <span style="color: var(--base0E)">?</span> <span style="color: var(--base09)">1</span> <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">0</span>,
</span><span class="codeblock-line" data-line-number="16">        height: <span style="color: var(--base08)">show</span> <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">1em</span>" <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">0</span>,
</span><span class="codeblock-line" data-line-number="17">        color: "<span style="color: var(--base0B)">red</span>",
</span><span class="codeblock-line" data-line-number="18">        transition: "<span style="color: var(--base0B)">all 300ms ease-in-out</span>"
</span><span class="codeblock-line" data-line-number="19">      }<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="20">    >
</span><span class="codeblock-line" data-line-number="21">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">error</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="22">    &#x3C;/<span style="color: var(--base08)">div</span>>
</span><span class="codeblock-line" data-line-number="23">  );
</span><span class="codeblock-line" data-line-number="24">}
</span></code></pre></div><p>Now we can wrap our old error messages in this new fancy component, and even turn the borders of our fields red that have errors:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {
</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">transition</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useTransition</span>();
</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useActionData</span>();
</span><span class="codeblock-line" data-line-number="4">
</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> (
</span><span class="codeblock-line" data-line-number="6">    &#x3C;<span style="color: var(--base0A)">Form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>">
</span><span class="codeblock-line" data-line-number="7">      &#x3C;<span style="color: var(--base08)">fieldset</span>
</span><span class="codeblock-line" data-line-number="8">        <span style="color: var(--base0D)">disabled</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="9">      >
</span><span class="codeblock-line" data-line-number="10">        &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="11">          &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="12">            Name:<span style="color: var(--base0F)">{</span>"<span style="color: var(--base0B)"> </span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="13">            &#x3C;<span style="color: var(--base08)">input</span>
</span><span class="codeblock-line" data-line-number="14">              <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">name</span>"
</span><span class="codeblock-line" data-line-number="15">              <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>"
</span><span class="codeblock-line" data-line-number="16">              <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>
</span><span class="codeblock-line" data-line-number="17">                <span style="color: var(--base08)">actionData</span>
</span><span class="codeblock-line" data-line-number="18">                  <span style="color: var(--base0E)">?</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">name</span>
</span><span class="codeblock-line" data-line-number="19">                  <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">undefined</span>
</span><span class="codeblock-line" data-line-number="20">              <span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="21">              <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{
</span><span class="codeblock-line" data-highlight="true" data-line-number="22">                borderColor: <span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="23">                  <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">red</span>"
</span><span class="codeblock-line" data-highlight="true" data-line-number="24">                  <span style="color: var(--base0E)">:</span> ""
</span><span class="codeblock-line" data-line-number="25">              }<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="26">            />
</span><span class="codeblock-line" data-line-number="27">          &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="28">        &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="29">
</span><span class="codeblock-line" data-line-number="30">        <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (
</span><span class="codeblock-line" data-highlight="true" data-line-number="31">          &#x3C;<span style="color: var(--base0A)">ValidationMessage</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="32">            <span style="color: var(--base0D)">isSubmitting</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="33">            <span style="color: var(--base0D)">error</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>?.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="34">          />
</span><span class="codeblock-line" data-line-number="35">        )<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="36">
</span><span class="codeblock-line" data-line-number="37">        &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="38">          &#x3C;<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-line-number="39">            Description:
</span><span class="codeblock-line" data-line-number="40">            &#x3C;<span style="color: var(--base08)">br</span> />
</span><span class="codeblock-line" data-line-number="41">            &#x3C;<span style="color: var(--base08)">textarea</span>
</span><span class="codeblock-line" data-line-number="42">              <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">description</span>"
</span><span class="codeblock-line" data-line-number="43">              <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="44">              <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{
</span><span class="codeblock-line" data-line-number="45">                borderColor: <span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span>
</span><span class="codeblock-line" data-line-number="46">                  <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">red</span>"
</span><span class="codeblock-line" data-line-number="47">                  <span style="color: var(--base0E)">:</span> ""
</span><span class="codeblock-line" data-highlight="true" data-line-number="48">              }<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-highlight="true" data-line-number="49">            />
</span><span class="codeblock-line" data-highlight="true" data-line-number="50">          &#x3C;/<span style="color: var(--base08)">label</span>>
</span><span class="codeblock-line" data-highlight="true" data-line-number="51">        &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="52">
</span><span class="codeblock-line" data-line-number="53">        &#x3C;<span style="color: var(--base0A)">ValidationMessage</span>
</span><span class="codeblock-line" data-line-number="54">          <span style="color: var(--base0D)">isSubmitting</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="55">          <span style="color: var(--base0D)">error</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="56">        />
</span><span class="codeblock-line" data-highlight="true" data-line-number="57">
</span><span class="codeblock-line" data-highlight="true" data-line-number="58">        &#x3C;<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-highlight="true" data-line-number="59">          &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">
</span><span class="codeblock-line" data-highlight="true" data-line-number="60">            <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"
</span><span class="codeblock-line" data-line-number="61">              <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">Creating...</span>"
</span><span class="codeblock-line" data-line-number="62">              <span style="color: var(--base0E)">:</span> "<span style="color: var(--base0B)">Create</span>"<span style="color: var(--base0F)">}</span>
</span><span class="codeblock-line" data-line-number="63">          &#x3C;/<span style="color: var(--base08)">button</span>>
</span><span class="codeblock-line" data-line-number="64">        &#x3C;/<span style="color: var(--base08)">p</span>>
</span><span class="codeblock-line" data-line-number="65">      &#x3C;/<span style="color: var(--base08)">fieldset</span>>
</span><span class="codeblock-line" data-line-number="66">    &#x3C;/<span style="color: var(--base0A)">Form</span>>
</span><span class="codeblock-line" data-line-number="67">  );
</span><span class="codeblock-line" data-line-number="68">}
</span></code></pre></div><p>Boom! Fancy UI without having to change anything about how we communicate with the server. It's also resilient to network conditions that prevent JS from loading.</p><h3 id="review"><a href="data-writes.html#review" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Review</h3><ul>
<li>
<p>First we built the project form without JavaScript in mind. A simple form, posting to a server side action. Welcome to 1998.</p>
</li>
<li>
<p>Once that worked, we used JavaScript to submit the form by changing <code>&#x3C;form></code> to <code>&#x3C;Form></code>, but we didnt' have to do anything else!</p>
</li>
<li>
<p>Now that there was a stateful page with React, we added loading indicators and animation for the validation errors by simply asking Remix for the state of the transition.</p>
</li>
</ul><p>From your components perspective, all that happend was the <code>useTransition</code> hook caused a state update when the form was submitted, and then another state update when the data came back. Of course, a lot more happened inside of Remix, but as far as your component is concerned, that's it. Just a couple state updates. This makes it really easy to dress up any user flow.</p><h2 id="see-also"><a href="data-writes.html#see-also" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>See also</h2><ul>
<li><a href="../../v1.0.5/api/remix.html#form">Form</a></li>
<li><a href="../../v1.0.5/api/remix.html#usetransition">useTransition</a></li>
<li><a href="../../v1.0.5/api/conventions.html#action">Actions</a></li>
<li><a href="../../v1.0.5/api/conventions.html#loader">Loaders</a></li>
<li><a href="../../v1.0.5/api/remix.html#usesubmit"><code>useSubmit()</code></a></li>
<li><a href="../../v1.0.5/api/remix.html#usefetcher"><code>useFetcher()</code></a></li>
</ul></div></div>
</div><div class="h-[90vh]"></div></div></div></div></div><script>
          if (!window.history.state || !window.history.state.key) {
            window.history.replaceState({ key: Math.random().toString(32).slice(2) }, null);
          }
          let STORAGE_KEY = "positions";
          try {
            let positions = JSON.parse(sessionStorage.getItem("positions") ?? '{}')
            let storedY = positions[window.history.state.key];
            if (typeof storedY === 'number') {
              window.scrollTo(0, storedY)
            }
          } catch(error) {
            console.error(error)
            sessionStorage.removeItem(STORAGE_KEY)
          }
        </script><link rel="modulepreload" href="../../../../build/_shared/chunk-N3KPM2EV.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-YTGA4KPU.js"/><link rel="modulepreload" href="../../../../build/root-63J2OI5O.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-GWT4HVMK.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-WV7HFGSM.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-43DMIVRF.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-AYAFUZYC.js"/><link rel="modulepreload" href="../../../../build/routes/docs/$lang.$version-WDGSSTHQ.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-CXMLCDHV.js"/><link rel="modulepreload" href="../../../../build/_shared/chunk-TEGZ72RU.js"/><link rel="modulepreload" href="../../../../build/routes/docs/$lang.$version/$-XTVJBAXD.js"/><script>window.__remixContext = {'matches':[{'params':{'lang':'en','version':'v1','*':'guides/data-writes'},'pathname':'/','route':{'id':'root','path':'','module':'/build/root-63J2OI5O.js','hasAction':false,'hasLoader':true,'hasCatchBoundary':true,'hasErrorBoundary':true}},{'params':{'lang':'en','version':'v1','*':'guides/data-writes'},'pathname':'/docs/en/v1','route':{'id':'routes/docs/$lang.$version','parentId':'root','path':'docs/:lang/:version','module':'/build/routes/docs/$lang.$version-WDGSSTHQ.js','imports':['/build/_shared/chunk-GWT4HVMK.js','/build/_shared/chunk-WV7HFGSM.js','/build/_shared/chunk-43DMIVRF.js','/build/_shared/chunk-AYAFUZYC.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false}},{'params':{'lang':'en','version':'v1','*':'guides/data-writes'},'pathname':'/docs/en/v1/guides/data-writes','route':{'id':'routes/docs/$lang.$version/$','parentId':'routes/docs/$lang.$version','path':'*','module':'/build/routes/docs/$lang.$version/$-XTVJBAXD.js','imports':['/build/_shared/chunk-CXMLCDHV.js','/build/_shared/chunk-TEGZ72RU.js'],'hasAction':false,'hasLoader':true,'hasCatchBoundary':false,'hasErrorBoundary':false}}],'componentDidCatchEmulator':{'trackBoundaries':true,'trackCatchBoundaries':true,'catchBoundaryRouteId':'root','renderBoundaryRouteId':null,'loaderBoundaryRouteId':'root','error':undefined,'catch':undefined},'routeData':{'root':{'noIndex':false},'routes/docs/$lang.$version':[{'slug':'/api','title':'API','hasContent':false,'order':3,'disabled':false,'children':[{'slug':'/api/conventions','title':'Conventions','hasContent':true,'order':1,'disabled':false,'children':[]},{'slug':'/api/remix','title':'Remix Package','hasContent':true,'order':2,'disabled':false,'children':[]}]},{'slug':'/contributing','title':'Contributing','hasContent':true,'order':6,'disabled':false,'children':[]},{'slug':'/guides','title':'Guides','hasContent':false,'order':5,'disabled':false,'children':[{'slug':'/guides/accessibility','title':'Accessibility','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/api-routes','title':'API Routes','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/data-writes','title':'Data Writes','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/deployment','title':'Deployment','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/disabling-javascript','title':'Disabling JavaScript','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/envvars','title':'Environment Variables','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/errors','title':'Error Handling','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/mdx','title':'MDX','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/not-found','title':'Not Found Handling','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/optimistic-ui','title':'Optimistic UI','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/performance','title':'Performance','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/philosophy','title':'Philosophy','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/resource-routes','title':'Resource Routes','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/routing','title':'Routing','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/guides/styling','title':'Styling','hasContent':true,'order':null,'disabled':false,'children':[]}]},{'slug':'/other-api','title':'Other API','hasContent':false,'order':4,'disabled':false,'children':[{'slug':'/other-api/adapter','title':'@remix-run/{adapter}','hasContent':true,'order':2,'disabled':false,'children':[]},{'slug':'/other-api/constraints','title':'Module Constraints','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/other-api/dev','title':'@remix-run/dev (CLI)','hasContent':true,'order':1,'disabled':false,'children':[]},{'slug':'/other-api/fetch','title':'Web Fetch API','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/other-api/node','title':'@remix-run/node','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/other-api/react-router','title':'React Router v6','hasContent':true,'order':null,'disabled':false,'children':[]},{'slug':'/other-api/serve','title':'@remix-run/serve','hasContent':true,'order':null,'disabled':false,'children':[]}]},{'slug':'/tutorials','title':'Tutorials','hasContent':false,'order':2,'disabled':false,'children':[{'slug':'/tutorials/blog','title':'Developer Blog','hasContent':true,'order':1,'disabled':false,'children':[]},{'slug':'/tutorials/jokes','title':'Jokes App','hasContent':true,'order':2,'disabled':false,'children':[]}]}],'routes/docs/$lang.$version/$':{'id':'ckwdubmmy0169f0ji4g2jzfwf','filePath':'/guides/data-writes.md','md':'\n# Data Writes\n\nData writes (some people call these mutations) in Remix are built on top of two fundamental web APIs: `<form>` and HTTP. We then use progressive enhancement to enable optimistic UI, loading indicators, and validation feedback--but the programming model is still built on HTML forms.\n\nWhen the user submits a form, Remix will:\n\n1. Call the action for the form\n2. Reload all of the data for all of the routes on the page\n\nMany times people reach for global state management libraries in React like redux, data libs like apollo, and fetch wrappers like React Query in order to help manage getting server state into your components and keeping the UI in sync with it when the user changes it. Remix\'s HTML based API replaces the majority of use cases for these tools. Remix knows how to load the data as well as how to revalidate it after it changes when you use standard HTML APIs.\n\nThere are a few ways to call an action and get the routes to revalidate:\n\n- [`<Form>`](../api/remix#form)\n- [`useSubmit()`](../api/remix#usesubmit)\n- [`useFetcher()`](../api/remix#usefetcher)\n\nThis guide only covers `<Form>`. We suggest you read the docs for the other two after this guide to get a sense of how to use them. Most of this guide applies to `useSubmit` but `useFetcher` is a bit different.\n\n## Plain HTML Forms\n\nAfter teaching workshops with our company <a href="https://reacttraining.com">React Training</a> for years, we\'ve learned that a lot of newer web developers (through no fault of their own) don\'t actually know how `<form>` works!\n\nSince Remix `<Form>` works identically to `<form>` (with a couple extra goodies for optimistic UI etc.), we\'re going to brush up on plain ol\' HTML forms, so you can learn both HTML and Remix at the same time.\n\n### HTML Form HTTP Verbs\n\nNative forms support two HTTP verbs: `GET` and `POST`. Remix uses these verbs to understand your intent. If it\'s a get, Remix will figure out what parts of the page are changing and only fetch the data for the changing layouts, and use the cached data for the layouts that don\'t change. When it\'s a POST, Remix will reload all data to ensure it captures the update from the server. Let\'s take a look at both.\n\n### HTML Form GET\n\nA `GET` is just a normal navigation where the form data is passed in the URL search params. You use it for normal navigation, just like `<a>` excpect the user gets to provide the data in the search params through the form. Aside from search pages, it\'s use with `<form>` is pretty rare.\n\nConsider this form:\n\n```html\n<form method="get" action="https://remix.run/search">\n  <label>Search <input name="term" type="text" /></label>\n  <button type="submit">Search</button>\n</form>\n```\n\nWhen the user fills it out and clicks submit, the browser automatically serializes the form values into a URL search param string and navigates to the form\'s `action` with the query string appended. Let\'s say the user typed in "remix". The browser would navigate to `/search?term=remix`. If we changed the input to `<input name="q"/>` then the form would navigate to `/search?q=remix`.\n\nIt\'s the same behavior as if we had created this link:\n\n```html\n<a href="https://remix.run/search?term=remix">Search for "remix"</a>\n```\n\nWith the unique difference that the **user** got to supply the information.\n\nIf you have more fields, the browser will add them:\n\n```html\n<form method="get" action="https://remix.run/search">\n  <fieldset>\n    <legend>Brand</legend>\n    <label>\n      <input name="brand" value="nike" type="checkbox" />\n      Nike\n    </label>\n    <label>\n      <input name="brand" value="reebok" type="checkbox" />\n      Reebok\n    </label>\n    <label>\n      <input name="color" value="white" type="checkbox" />\n      White\n    </label>\n    <label>\n      <input name="color" value="black" type="checkbox" />\n      White\n    </label>\n    <button type="submit">Search</button>\n  </fieldset>\n</form>\n```\n\nDepending on which checkboxes the uses clicks, the browser will navigate to URLs like:\n\n```\n/search?brand=nike&color=black\n/search?brand=nike&brand=reebok&color=white\n```\n\n### HTML Form POST\n\nWhen you want to create, delete, or update data on your website, a form post is the way to go. And we don\'t just mean big forms like a user profile edit page. Even "Like" buttons can be handled with a form.\n\nLet\'s consider a "new project" form.\n\n```html\n<form method="post" action="https://remix.run/projects">\n  <label><input name="name" type="text" /></label>\n  <label><textarea name="description"></textarea></label>\n  <button type="submit">Create</button>\n</form>\n```\n\nWhen the user submits this form, the browser will serialize the fields into a request "body" (instead of URL search params) and "POST" it to the server. This is still a normal navigation as if the user clicked a link. The difference is twofold: the user provided the data for the server and the browser sent the request as a "POST" instead of a "GET".\n\nThe data is made available to the server\'s request handler so you can create the record. After that, you return a response. In this case, you\'d probably redirect to the newly created project. A remix action would look something like this:\n\n```js filename=app/routes/projects\nexport function action({ request }) {\n  let body = await request.formData();\n  let project = await createProject(body);\n  redirect(`/projects/${project.id}`);\n}\n```\n\nThe browser started at `/projects/new`, then posted to `/projects` with the form data in the request, then the server redirected the browser to `/projects/123`. While this is all happening, the browser goes into it\'s normal "loading" state: the address progress bar fills up, the favicon turns into a spinner, etc. It\'s actually a decent user experience.\n\nIf you\'re newer to web development, you may not have ever used a form this way. Lots of folks have always done:\n\n```js\n<form\n  onSubmit={event => {\n    event.preventDefault();\n    // good luck!\n  }}\n/>\n```\n\nIf this is you, you\'re going to be delighted when you see just how easy mutations can be when you just use what browsers (and Remix) have built in!\n\n## Remix Mutation, Start to Finish\n\nWe\'re going to build a mutation from start to finish with:\n\n1. JavaScript optional\n2. Validation\n3. Error handling\n4. Progressively enhanced loading indicators\n5. Progressively enhanced error display\n\nYou use the Remix `<Form>` component for data mutations the same way you use HTML forms. The difference is now you get access to pending form state to build a nicer user experience: like contextual loading indicators and "optimistic UI".\n\nWhether you use `<form>` or `<Form>` though, you write the very same code. You can start with a `<form>` and then graduate it to `<Form>` without changing anything. After that, add in the special loading indicators and optimistic UI. However, if you\'re not feeling up to it, or deadlines are tight, just us a `<form>` and let the browser handle the user feedback! Remix `<Form>` is the realization of "progressive enhancement" for mutations.\n\n### Building the form\n\nLet\'s start with our project form from earlier but make it usable:\n\nLet\'s say you\'ve got the route `app/routes/projects/new.js` with this form in it:\n\n```tsx\nexport default function NewProject() {\n  return (\n    <form method="post" action="https://remix.run/projects/new">\n      <p>\n        <label>\n          Name: <input name="name" type="text" />\n        </label>\n      </p>\n      <p>\n        <label>\n          Description:\n          <br />\n          <textarea name="description" />\n        </label>\n      </p>\n      <p>\n        <button type="submit">Create</button>\n      </p>\n    </form>\n  );\n}\n```\n\nNow add the route action. Any form submissions that are "post" will call your data "action". Any "get" submissions (`<Form method="get">`) will be handled by your "loader".\n\n```tsx [5-9]\nimport type { ActionFunction } from "remix";\nimport { redirect } from "remix";\n\n// Note the "action" export name, this will handle our form POST\nexport let action: ActionFunction = async ({ request }) => {\n  let formData = await request.formData();\n  let project = await createProject(formData);\n  return redirect(`/projects/${project.id}`);\n};\n\nexport default function NewProject() {\n  // ... same as before\n}\n```\n\nAnd that\'s it! Assuming `createProject` does what we want it to, that\'s all you have to do. Note that no matter what kind of SPA you may have built in the past, you always need a server side action and a form to get data from the user. The difference with Remix is **that\'s all you need** (and that\'s how the web used to be, too.)\n\nOf course, we started complicating things to try to create better user experiences than the default browser behavior. Keep going, we\'ll get there, but we won\u2019t have to change any of the code we\'ve already written to get the core functionality.\n\n### Form Validation\n\nIt\'s common to validate forms both clientside and serverside. It\'s also (unfortunately) common to only validate clientside, which leads to various issues with your data that we don\'t have time to get into right now. Point is, if your validating in only one place, do it on the server. You find with Remix that\'s the only place you care to anymore (the less you send to the browser the better!).\n\nWe know, we know, you want to animate in nice validation errors and stuff. We\'ll get to that. But right now we\'re just building a basic HTML form and user flow. We\'ll keep it simple first, then make it fancy.\n\nBack in our action, maybe we have an API that returns validation errors like this.\n\n```tsx\nlet [errors, project] = await createProject(newProject);\n```\n\nIf there are validation errors, we want to go back to the form and display them.\n\n```tsx [3,5-8]\nexport let action: ActionFunction = async ({ request }) => {\n  let formData = await request.formData();\n  let [errors, project] = await createProject(formData);\n\n  if (errors) {\n    let values = Object.fromEntries(newProject);\n    return { errors, values };\n  }\n\n  return redirect(`/projects/${project.id}`);\n};\n```\n\nJust like `useLoaderData` returns the values from the `loader`, `useActionData` will return the data from the action. It will only be there if the navigation was a form submission, so you always have to check if you\'ve got it or not.\n\n```tsx [1,8,18,23-27,35,40-44]\nimport { redirect, useActionData } from "remix";\n\nexport let action: ActionFunction = async ({ request }) => {\n  // ...\n};\n\nexport default function NewProject() {\n  let actionData = useActionData();\n\n  return (\n    <form method="post" action="https://remix.run/projects/new">\n      <p>\n        <label>\n          Name:{" "}\n          <input\n            name="name"\n            type="text"\n            defaultValue={actionData?.values.name}\n          />\n        </label>\n      </p>\n\n      {actionData?.errors.name && (\n        <p style={{ color: "red" }}>\n          {actionData.errors.name}\n        </p>\n      )}\n\n      <p>\n        <label>\n          Description:\n          <br />\n          <textarea\n            name="description"\n            defaultValue={actionData?.values.description}\n          />\n        </label>\n      </p>\n\n      {actionData?.errors.description && (\n        <p style={{ color: "red" }}>\n          {actionData.errors.description}\n        </p>\n      )}\n\n      <p>\n        <button type="submit">Create</button>\n      </p>\n    </form>\n  );\n}\n```\n\nNotice how we add `defaultValue` to all of our inputs. Remember, this is regular HTML `<form>`, so it\'s just normal browser/server stuff happening. We\'re getting the values back from the server so the user doesn\'t have to re-type what they had.\n\nYou can ship this code as-is. The browser will handle the pending UI and interruptions for you. Enjoy your weekend and make it fancy on Monday.\n\n### Graduate to `<Form>` and add pending UI\n\nLet\'s use progressive enhancement to make this UX a bit more fancy. By changing it from `<Form reloadDocument>` to `<Form>`, Remix will emulate the browser behavior with `fetch`. It will also give you access to the pending form data so you can build pending UI.\n\n```tsx [1, 10]\nimport { redirect, useActionData, Form } from "remix";\n\n// ...\n\nexport default function NewProject() {\n  let actionData = useActionData();\n\n  return (\n    // note the capital "F" <Form> now\n    <Form method="post">{/* ... */}</Form>\n  );\n}\n```\n\n<docs-error>HOLD UP! If all you do is change your form to Form, you made the UX a little worse!</docs-error>\n\nIf you don\'t have the time or drive to do the rest of the job here, use `<Form reloadDocument>`. This lets the browser continue to handle the pending UI state (spinner in the favicon of the tab, progress bar in the address bar, etc.) If you simply use `<Form>` without implementing pending UI, the user will have no idea anything is happening when they submit a form.\n\n<docs-info>We recommend always using capital-F Form, and if you want to let the browser handle the pending UI, use the <code>&lt;Form reloadDocument&gt;</code> prop.</docs-info>\n\nNow let\'s add some pending UI so the user has a clue something happened when they submit. There\'s a hook called `useTransition`. When there is a pending form submission, Remix will give you the serialized version of the form as a <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData">`FormData`</a> object. You\'ll be most interested in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData/get">`formData.get()`</a> method..\n\n```tsx [5, 13, 19, 65-67]\nimport {\n  redirect,\n  useActionData,\n  Form,\n  useTransition\n} from "remix";\n\n// ...\n\nexport default function NewProject() {\n  // when the form is being processed on the server, this returns different\n  // transition states to help us build pending and optimistic UI.\n  let transition = useTransition();\n  let actionData = useActionData();\n\n  return (\n    <Form method="post">\n      <fieldset\n        disabled={transition.state === "submitting"}\n      >\n        <p>\n          <label>\n            Name:{" "}\n            <input\n              name="name"\n              type="text"\n              defaultValue={\n                actionData\n                  ? actionData.values.name\n                  : undefined\n              }\n            />\n          </label>\n        </p>\n\n        {actionData && actionData.errors.name && (\n          <p style={{ color: "red" }}>\n            {actionData.errors.name}\n          </p>\n        )}\n\n        <p>\n          <label>\n            Description:\n            <br />\n            <textarea\n              name="description"\n              defaultValue={\n                actionData\n                  ? actionData.values.description\n                  : undefined\n              }\n            />\n          </label>\n        </p>\n\n        {actionData && actionData.errors.description && (\n          <p style={{ color: "red" }}>\n            {actionData.errors.description}\n          </p>\n        )}\n\n        <p>\n          <button type="submit">\n            {transition.state === "submitting"\n              ? "Creating..."\n              : "Create"}\n          </button>\n        </p>\n      </fieldset>\n    </Form>\n  );\n}\n```\n\nPretty slick! Now when the user clicks "Create", the inputs go disabled, and the submit button\'s text changes. The whole operation should be faster now too since there\'s just one network request happening instead of a full page reload (which involves potentially more network requests, reading assets from the browser cache, parsing JavaScript, parsing CSS, etc.).\n\nWe didn\'t do much with `transition` on this page, but it\'s got all the information about the submission on `transition.submission`, including all of the values being processed on the server on `submission.formData`.\n\n### Animating in the Validation Errors\n\nNow that we\'re using JavaScript to submit this page, our validation errors can be animated in because the page is stateful. First we\'ll make a fancy component that animates height and opacity:\n\n```tsx\nfunction ValidationMessage({ error, isSubmitting }) {\n  let [show, setShow] = useState(!!error);\n\n  useEffect(() => {\n    let id = setTimeout(() => {\n      let hasError = !!error;\n      setShow(hasError && !isSubmitting);\n    });\n    return () => clearTimeout(id);\n  }, [error, isSubmitting]);\n\n  return (\n    <div\n      style={{\n        opacity: show ? 1 : 0,\n        height: show ? "1em" : 0,\n        color: "red",\n        transition: "all 300ms ease-in-out"\n      }}\n    >\n      {error}\n    </div>\n  );\n}\n```\n\nNow we can wrap our old error messages in this new fancy component, and even turn the borders of our fields red that have errors:\n\n```tsx [21-24, 31-34, 48-51, 57-60]\nexport default function NewProject() {\n  let transition = useTransition();\n  let actionData = useActionData();\n\n  return (\n    <Form method="post">\n      <fieldset\n        disabled={transition.state === "submitting"}\n      >\n        <p>\n          <label>\n            Name:{" "}\n            <input\n              name="name"\n              type="text"\n              defaultValue={\n                actionData\n                  ? actionData.values.name\n                  : undefined\n              }\n              style={{\n                borderColor: actionData?.errors.name\n                  ? "red"\n                  : ""\n              }}\n            />\n          </label>\n        </p>\n\n        {actionData?.errors.name && (\n          <ValidationMessage\n            isSubmitting={transition.state === "submitting"}\n            error={actionData?.errors?.name}\n          />\n        )}\n\n        <p>\n          <label>\n            Description:\n            <br />\n            <textarea\n              name="description"\n              defaultValue={actionData?.values.description}\n              style={{\n                borderColor: actionData?.errors.description\n                  ? "red"\n                  : ""\n              }}\n            />\n          </label>\n        </p>\n\n        <ValidationMessage\n          isSubmitting={transition.state === "submitting"}\n          error={actionData?.errors.description}\n        />\n\n        <p>\n          <button type="submit">\n            {transition.state === "submitting"\n              ? "Creating..."\n              : "Create"}\n          </button>\n        </p>\n      </fieldset>\n    </Form>\n  );\n}\n```\n\nBoom! Fancy UI without having to change anything about how we communicate with the server. It\'s also resilient to network conditions that prevent JS from loading.\n\n### Review\n\n- First we built the project form without JavaScript in mind. A simple form, posting to a server side action. Welcome to 1998.\n\n- Once that worked, we used JavaScript to submit the form by changing `<form>` to `<Form>`, but we didnt\' have to do anything else!\n\n- Now that there was a stateful page with React, we added loading indicators and animation for the validation errors by simply asking Remix for the state of the transition.\n\nFrom your components perspective, all that happend was the `useTransition` hook caused a state update when the form was submitted, and then another state update when the data came back. Of course, a lot more happened inside of Remix, but as far as your component is concerned, that\'s it. Just a couple state updates. This makes it really easy to dress up any user flow.\n\n## See also\n\n- [Form](../api/remix#form)\n- [useTransition](../api/remix#usetransition)\n- [Actions](../api/conventions#action)\n- [Loaders](../api/conventions#loader)\n- [`useSubmit()`](../api/remix#usesubmit)\n- [`useFetcher()`](../api/remix#usefetcher)\n','html':'<div class="md-toc-container"><div class="md-toc-nav" role="navigation"><ul class="toc">\n<li>\n<p><a href="data-writes.html#data-writes">Data Writes</a></p>\n<ul>\n<li>\n<p><a href="data-writes.html#plain-html-forms">Plain HTML Forms</a></p>\n<ul>\n<li><a href="data-writes.html#html-form-http-verbs">HTML Form HTTP Verbs</a></li>\n<li><a href="data-writes.html#html-form-get">HTML Form GET</a></li>\n<li><a href="data-writes.html#html-form-post">HTML Form POST</a></li>\n</ul>\n</li>\n<li>\n<p><a href="data-writes.html#remix-mutation-start-to-finish">Remix Mutation, Start to Finish</a></p>\n<ul>\n<li><a href="data-writes.html#building-the-form">Building the form</a></li>\n<li><a href="data-writes.html#form-validation">Form Validation</a></li>\n<li><a href="data-writes.html#graduate-to-form-and-add-pending-ui">Graduate to <code>&#x3C;Form></code> and add pending UI</a></li>\n<li><a href="data-writes.html#animating-in-the-validation-errors">Animating in the Validation Errors</a></li>\n<li><a href="data-writes.html#review">Review</a></li>\n</ul>\n</li>\n<li>\n<p><a href="data-writes.html#see-also">See also</a></p>\n</li>\n</ul>\n</li>\n</ul></div><div class="md-prose"><h1 id="data-writes"><a href="data-writes.html#data-writes" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Data Writes</h1><p>Data writes (some people call these mutations) in Remix are built on top of two fundamental web APIs: <code>&#x3C;form></code> and HTTP. We then use progressive enhancement to enable optimistic UI, loading indicators, and validation feedback--but the programming model is still built on HTML forms.</p><p>When the user submits a form, Remix will:</p><ol>\n<li>Call the action for the form</li>\n<li>Reload all of the data for all of the routes on the page</li>\n</ol><p>Many times people reach for global state management libraries in React like redux, data libs like apollo, and fetch wrappers like React Query in order to help manage getting server state into your components and keeping the UI in sync with it when the user changes it. Remix\'s HTML based API replaces the majority of use cases for these tools. Remix knows how to load the data as well as how to revalidate it after it changes when you use standard HTML APIs.</p><p>There are a few ways to call an action and get the routes to revalidate:</p><ul>\n<li><a href="../../v1.0.5/api/remix.html#form"><code>&#x3C;Form></code></a></li>\n<li><a href="../../v1.0.5/api/remix.html#usesubmit"><code>useSubmit()</code></a></li>\n<li><a href="../../v1.0.5/api/remix.html#usefetcher"><code>useFetcher()</code></a></li>\n</ul><p>This guide only covers <code>&#x3C;Form></code>. We suggest you read the docs for the other two after this guide to get a sense of how to use them. Most of this guide applies to <code>useSubmit</code> but <code>useFetcher</code> is a bit different.</p><h2 id="plain-html-forms"><a href="data-writes.html#plain-html-forms" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Plain HTML Forms</h2><p>After teaching workshops with our company <a href="https://reacttraining.com">React Training</a> for years, we\'ve learned that a lot of newer web developers (through no fault of their own) don\'t actually know how <code>&#x3C;form></code> works!</p><p>Since Remix <code>&#x3C;Form></code> works identically to <code>&#x3C;form></code> (with a couple extra goodies for optimistic UI etc.), we\'re going to brush up on plain ol\' HTML forms, so you can learn both HTML and Remix at the same time.</p><h3 id="html-form-http-verbs"><a href="data-writes.html#html-form-http-verbs" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>HTML Form HTTP Verbs</h3><p>Native forms support two HTTP verbs: <code>GET</code> and <code>POST</code>. Remix uses these verbs to understand your intent. If it\'s a get, Remix will figure out what parts of the page are changing and only fetch the data for the changing layouts, and use the cached data for the layouts that don\'t change. When it\'s a POST, Remix will reload all data to ensure it captures the update from the server. Let\'s take a look at both.</p><h3 id="html-form-get"><a href="data-writes.html#html-form-get" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>HTML Form GET</h3><p>A <code>GET</code> is just a normal navigation where the form data is passed in the URL search params. You use it for normal navigation, just like <code>&#x3C;a></code> excpect the user gets to provide the data in the search params through the form. Aside from search pages, it\'s use with <code>&#x3C;form></code> is pretty rare.</p><p>Consider this form:</p><div><pre data-line-numbers="true" data-lang="html" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0A)">method</span>="<span style="color: var(--base0B)">get</span>" <span style="color: var(--base0A)">action</span>="<span style="color: var(--base0B)">/search</span>">\n</span><span class="codeblock-line" data-line-number="2">  &#x3C;<span style="color: var(--base08)">label</span>>Search &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">term</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">text</span>" />&#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="3">  &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">submit</span>">Search&#x3C;/<span style="color: var(--base08)">button</span>>\n</span><span class="codeblock-line" data-line-number="4">&#x3C;/<span style="color: var(--base08)">form</span>>\n</span></code></pre></div><p>When the user fills it out and clicks submit, the browser automatically serializes the form values into a URL search param string and navigates to the form\'s <code>action</code> with the query string appended. Let\'s say the user typed in "remix". The browser would navigate to <code>/search?term=remix</code>. If we changed the input to <code>&#x3C;input name="q"/></code> then the form would navigate to <code>/search?q=remix</code>.</p><p>It\'s the same behavior as if we had created this link:</p><div><pre data-line-numbers="true" data-lang="html" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">a</span> <span style="color: var(--base0A)">href</span>="<span style="color: var(--base0B)">/search?term=remix</span>">Search for "remix"&#x3C;/<span style="color: var(--base08)">a</span>>\n</span></code></pre></div><p>With the unique difference that the <strong>user</strong> got to supply the information.</p><p>If you have more fields, the browser will add them:</p><div><pre data-line-numbers="true" data-lang="html" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0A)">method</span>="<span style="color: var(--base0B)">get</span>" <span style="color: var(--base0A)">action</span>="<span style="color: var(--base0B)">/search</span>">\n</span><span class="codeblock-line" data-line-number="2">  &#x3C;<span style="color: var(--base08)">fieldset</span>>\n</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base08)">legend</span>>Brand&#x3C;/<span style="color: var(--base08)">legend</span>>\n</span><span class="codeblock-line" data-line-number="4">    &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="5">      &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">brand</span>" <span style="color: var(--base0A)">value</span>="<span style="color: var(--base0B)">nike</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">checkbox</span>" />\n</span><span class="codeblock-line" data-line-number="6">      Nike\n</span><span class="codeblock-line" data-line-number="7">    &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="8">    &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="9">      &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">brand</span>" <span style="color: var(--base0A)">value</span>="<span style="color: var(--base0B)">reebok</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">checkbox</span>" />\n</span><span class="codeblock-line" data-line-number="10">      Reebok\n</span><span class="codeblock-line" data-line-number="11">    &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="12">    &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="13">      &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">color</span>" <span style="color: var(--base0A)">value</span>="<span style="color: var(--base0B)">white</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">checkbox</span>" />\n</span><span class="codeblock-line" data-line-number="14">      White\n</span><span class="codeblock-line" data-line-number="15">    &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="16">    &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="17">      &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">color</span>" <span style="color: var(--base0A)">value</span>="<span style="color: var(--base0B)">black</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">checkbox</span>" />\n</span><span class="codeblock-line" data-line-number="18">      White\n</span><span class="codeblock-line" data-line-number="19">    &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="20">    &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">submit</span>">Search&#x3C;/<span style="color: var(--base08)">button</span>>\n</span><span class="codeblock-line" data-line-number="21">  &#x3C;/<span style="color: var(--base08)">fieldset</span>>\n</span><span class="codeblock-line" data-line-number="22">&#x3C;/<span style="color: var(--base08)">form</span>>\n</span></code></pre></div><p>Depending on which checkboxes the uses clicks, the browser will navigate to URLs like:</p><pre><code>/search?brand=nike&#x26;color=black\n/search?brand=nike&#x26;brand=reebok&#x26;color=white\n</code></pre><h3 id="html-form-post"><a href="data-writes.html#html-form-post" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>HTML Form POST</h3><p>When you want to create, delete, or update data on your website, a form post is the way to go. And we don\'t just mean big forms like a user profile edit page. Even "Like" buttons can be handled with a form.</p><p>Let\'s consider a "new project" form.</p><div><pre data-line-numbers="true" data-lang="html" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0A)">method</span>="<span style="color: var(--base0B)">post</span>" <span style="color: var(--base0A)">action</span>="<span style="color: var(--base0B)">/projects</span>">\n</span><span class="codeblock-line" data-line-number="2">  &#x3C;<span style="color: var(--base08)">label</span>>&#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">name</span>" <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">text</span>" />&#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="3">  &#x3C;<span style="color: var(--base08)">label</span>>&#x3C;<span style="color: var(--base08)">textarea</span> <span style="color: var(--base0A)">name</span>="<span style="color: var(--base0B)">description</span>">&#x3C;/<span style="color: var(--base08)">textarea</span>>&#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="4">  &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0A)">type</span>="<span style="color: var(--base0B)">submit</span>">Create&#x3C;/<span style="color: var(--base08)">button</span>>\n</span><span class="codeblock-line" data-line-number="5">&#x3C;/<span style="color: var(--base08)">form</span>>\n</span></code></pre></div><p>When the user submits this form, the browser will serialize the fields into a request "body" (instead of URL search params) and "POST" it to the server. This is still a normal navigation as if the user clicked a link. The difference is twofold: the user provided the data for the server and the browser sent the request as a "POST" instead of a "GET".</p><p>The data is made available to the server\'s request handler so you can create the record. After that, you return a response. In this case, you\'d probably redirect to the newly created project. A remix action would look something like this:</p><div><pre data-filename="app/routes/projects" data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">action</span>({ <span style="color: var(--base08)">request</span> }) {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">body</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">formData</span>();\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">project</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">createProject</span>(<span style="color: var(--base08)">body</span>);\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0D)">redirect</span>(`<span style="color: var(--base0B)">/projects/</span>${<span style="color: var(--base08)">project</span>.<span style="color: var(--base08)">id</span>}`);\n</span><span class="codeblock-line" data-line-number="5">}\n</span></code></pre></div><p>The browser started at <code>/projects/new</code>, then posted to <code>/projects</code> with the form data in the request, then the server redirected the browser to <code>/projects/123</code>. While this is all happening, the browser goes into it\'s normal "loading" state: the address progress bar fills up, the favicon turns into a spinner, etc. It\'s actually a decent user experience.</p><p>If you\'re newer to web development, you may not have ever used a form this way. Lots of folks have always done:</p><div><pre data-line-numbers="true" data-lang="js" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1">&#x3C;<span style="color: var(--base08)">form</span>\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0D)">onSubmit</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">event</span> <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="3">    <span style="color: var(--base08)">event</span>.<span style="color: var(--base0D)">preventDefault</span>();\n</span><span class="codeblock-line" data-line-number="4">    <span style="color: var(--base03)">// good luck!</span>\n</span><span class="codeblock-line" data-line-number="5">  }<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="6">/>\n</span></code></pre></div><p>If this is you, you\'re going to be delighted when you see just how easy mutations can be when you just use what browsers (and Remix) have built in!</p><h2 id="remix-mutation-start-to-finish"><a href="data-writes.html#remix-mutation-start-to-finish" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Remix Mutation, Start to Finish</h2><p>We\'re going to build a mutation from start to finish with:</p><ol>\n<li>JavaScript optional</li>\n<li>Validation</li>\n<li>Error handling</li>\n<li>Progressively enhanced loading indicators</li>\n<li>Progressively enhanced error display</li>\n</ol><p>You use the Remix <code>&#x3C;Form></code> component for data mutations the same way you use HTML forms. The difference is now you get access to pending form state to build a nicer user experience: like contextual loading indicators and "optimistic UI".</p><p>Whether you use <code>&#x3C;form></code> or <code>&#x3C;Form></code> though, you write the very same code. You can start with a <code>&#x3C;form></code> and then graduate it to <code>&#x3C;Form></code> without changing anything. After that, add in the special loading indicators and optimistic UI. However, if you\'re not feeling up to it, or deadlines are tight, just us a <code>&#x3C;form></code> and let the browser handle the user feedback! Remix <code>&#x3C;Form></code> is the realization of "progressive enhancement" for mutations.</p><h3 id="building-the-form"><a href="data-writes.html#building-the-form" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Building the form</h3><p>Let\'s start with our project form from earlier but make it usable:</p><p>Let\'s say you\'ve got the route <code>app/routes/projects/new.js</code> with this form in it:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="3">    &#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>" <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">/projects/new</span>">\n</span><span class="codeblock-line" data-line-number="4">      &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="5">        &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="6">          Name: &#x3C;<span style="color: var(--base08)">input</span> <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">name</span>" <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>" />\n</span><span class="codeblock-line" data-line-number="7">        &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="8">      &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="9">      &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="10">        &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="11">          Description:\n</span><span class="codeblock-line" data-line-number="12">          &#x3C;<span style="color: var(--base08)">br</span> />\n</span><span class="codeblock-line" data-line-number="13">          &#x3C;<span style="color: var(--base08)">textarea</span> <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">description</span>" />\n</span><span class="codeblock-line" data-line-number="14">        &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="15">      &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="16">      &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="17">        &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">Create&#x3C;/<span style="color: var(--base08)">button</span>>\n</span><span class="codeblock-line" data-line-number="18">      &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="19">    &#x3C;/<span style="color: var(--base08)">form</span>>\n</span><span class="codeblock-line" data-line-number="20">  );\n</span><span class="codeblock-line" data-line-number="21">}\n</span></code></pre></div><p>Now add the route action. Any form submissions that are "post" will call your data "action". Any "get" submissions (<code>&#x3C;Form method="get"></code>) will be handled by your "loader".</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> <span style="color: var(--base0E)">type</span> { <span style="color: var(--base08)">ActionFunction</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="3">\n</span><span class="codeblock-line" data-line-number="4"><span style="color: var(--base03)">// Note the "action" export name, this will handle our form POST</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="5"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">ActionFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">request</span> }) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-highlight="true" data-line-number="6">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">formData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">formData</span>();\n</span><span class="codeblock-line" data-highlight="true" data-line-number="7">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">project</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">createProject</span>(<span style="color: var(--base08)">formData</span>);\n</span><span class="codeblock-line" data-highlight="true" data-line-number="8">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">redirect</span>(`<span style="color: var(--base0B)">/projects/</span>${<span style="color: var(--base08)">project</span>.<span style="color: var(--base08)">id</span>}`);\n</span><span class="codeblock-line" data-highlight="true" data-line-number="9">};\n</span><span class="codeblock-line" data-line-number="10">\n</span><span class="codeblock-line" data-line-number="11"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {\n</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base03)">// ... same as before</span>\n</span><span class="codeblock-line" data-line-number="13">}\n</span></code></pre></div><p>And that\'s it! Assuming <code>createProject</code> does what we want it to, that\'s all you have to do. Note that no matter what kind of SPA you may have built in the past, you always need a server side action and a form to get data from the user. The difference with Remix is <strong>that\'s all you need</strong> (and that\'s how the web used to be, too.)</p><p>Of course, we started complicating things to try to create better user experiences than the default browser behavior. Keep going, we\'ll get there, but we won\u2019t have to change any of the code we\'ve already written to get the core functionality.</p><h3 id="form-validation"><a href="data-writes.html#form-validation" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Form Validation</h3><p>It\'s common to validate forms both clientside and serverside. It\'s also (unfortunately) common to only validate clientside, which leads to various issues with your data that we don\'t have time to get into right now. Point is, if your validating in only one place, do it on the server. You find with Remix that\'s the only place you care to anymore (the less you send to the browser the better!).</p><p>We know, we know, you want to animate in nice validation errors and stuff. We\'ll get to that. But right now we\'re just building a basic HTML form and user flow. We\'ll keep it simple first, then make it fancy.</p><p>Back in our action, maybe we have an API that returns validation errors like this.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0A)">let</span> [<span style="color: var(--base08)">errors</span>, <span style="color: var(--base08)">project</span>] <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">createProject</span>(<span style="color: var(--base08)">newProject</span>);\n</span></code></pre></div><p>If there are validation errors, we want to go back to the form and display them.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">ActionFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">request</span> }) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">formData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base08)">request</span>.<span style="color: var(--base0D)">formData</span>();\n</span><span class="codeblock-line" data-highlight="true" data-line-number="3">  <span style="color: var(--base0A)">let</span> [<span style="color: var(--base08)">errors</span>, <span style="color: var(--base08)">project</span>] <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">await</span> <span style="color: var(--base0D)">createProject</span>(<span style="color: var(--base08)">formData</span>);\n</span><span class="codeblock-line" data-line-number="4">\n</span><span class="codeblock-line" data-highlight="true" data-line-number="5">  <span style="color: var(--base0E)">if</span> (<span style="color: var(--base08)">errors</span>) {\n</span><span class="codeblock-line" data-highlight="true" data-line-number="6">    <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">values</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0A)">Object</span>.<span style="color: var(--base0D)">fromEntries</span>(<span style="color: var(--base08)">newProject</span>);\n</span><span class="codeblock-line" data-highlight="true" data-line-number="7">    <span style="color: var(--base0E)">return</span> { <span style="color: var(--base08)">errors</span>, <span style="color: var(--base08)">values</span> };\n</span><span class="codeblock-line" data-highlight="true" data-line-number="8">  }\n</span><span class="codeblock-line" data-line-number="9">\n</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0E)">return</span> <span style="color: var(--base0D)">redirect</span>(`<span style="color: var(--base0B)">/projects/</span>${<span style="color: var(--base08)">project</span>.<span style="color: var(--base08)">id</span>}`);\n</span><span class="codeblock-line" data-line-number="11">};\n</span></code></pre></div><p>Just like <code>useLoaderData</code> returns the values from the <code>loader</code>, <code>useActionData</code> will return the data from the action. It will only be there if the navigation was a form submission, so you always have to check if you\'ve got it or not.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-highlight="true" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span>, <span style="color: var(--base08)">useActionData</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0A)">let</span> <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">:</span> <span style="color: var(--base0A)">ActionFunction</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">async</span> ({ <span style="color: var(--base08)">request</span> }) <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base03)">// ...</span>\n</span><span class="codeblock-line" data-line-number="5">};\n</span><span class="codeblock-line" data-line-number="6">\n</span><span class="codeblock-line" data-line-number="7"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {\n</span><span class="codeblock-line" data-highlight="true" data-line-number="8">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useActionData</span>();\n</span><span class="codeblock-line" data-line-number="9">\n</span><span class="codeblock-line" data-line-number="10">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="11">    &#x3C;<span style="color: var(--base08)">form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>" <span style="color: var(--base0D)">action</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">/projects/new</span>">\n</span><span class="codeblock-line" data-line-number="12">      &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="13">        &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="14">          Name:<span style="color: var(--base0F)">{</span>"<span style="color: var(--base0B)"> </span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="15">          &#x3C;<span style="color: var(--base08)">input</span>\n</span><span class="codeblock-line" data-line-number="16">            <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">name</span>"\n</span><span class="codeblock-line" data-line-number="17">            <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>"\n</span><span class="codeblock-line" data-highlight="true" data-line-number="18">            <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="19">          />\n</span><span class="codeblock-line" data-line-number="20">        &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="21">      &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="22">\n</span><span class="codeblock-line" data-highlight="true" data-line-number="23">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (\n</span><span class="codeblock-line" data-highlight="true" data-line-number="24">        &#x3C;<span style="color: var(--base08)">p</span> <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{ color: "<span style="color: var(--base0B)">red</span>" }<span style="color: var(--base0F)">}</span>>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="25">          <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="26">        &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="27">      )<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="28">\n</span><span class="codeblock-line" data-line-number="29">      &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="30">        &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="31">          Description:\n</span><span class="codeblock-line" data-line-number="32">          &#x3C;<span style="color: var(--base08)">br</span> />\n</span><span class="codeblock-line" data-line-number="33">          &#x3C;<span style="color: var(--base08)">textarea</span>\n</span><span class="codeblock-line" data-line-number="34">            <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">description</span>"\n</span><span class="codeblock-line" data-highlight="true" data-line-number="35">            <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="36">          />\n</span><span class="codeblock-line" data-line-number="37">        &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="38">      &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="39">\n</span><span class="codeblock-line" data-highlight="true" data-line-number="40">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (\n</span><span class="codeblock-line" data-highlight="true" data-line-number="41">        &#x3C;<span style="color: var(--base08)">p</span> <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{ color: "<span style="color: var(--base0B)">red</span>" }<span style="color: var(--base0F)">}</span>>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="42">          <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="43">        &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="44">      )<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="45">\n</span><span class="codeblock-line" data-line-number="46">      &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="47">        &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">Create&#x3C;/<span style="color: var(--base08)">button</span>>\n</span><span class="codeblock-line" data-line-number="48">      &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="49">    &#x3C;/<span style="color: var(--base08)">form</span>>\n</span><span class="codeblock-line" data-line-number="50">  );\n</span><span class="codeblock-line" data-line-number="51">}\n</span></code></pre></div><p>Notice how we add <code>defaultValue</code> to all of our inputs. Remember, this is regular HTML <code>&#x3C;form></code>, so it\'s just normal browser/server stuff happening. We\'re getting the values back from the server so the user doesn\'t have to re-type what they had.</p><p>You can ship this code as-is. The browser will handle the pending UI and interruptions for you. Enjoy your weekend and make it fancy on Monday.</p><h3 id="graduate-to-form-and-add-pending-ui"><a href="data-writes.html#graduate-to-form-and-add-pending-ui" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Graduate to <code>&#x3C;Form></code> and add pending UI</h3><p>Let\'s use progressive enhancement to make this UX a bit more fancy. By changing it from <code>&#x3C;Form reloadDocument></code> to <code>&#x3C;Form></code>, Remix will emulate the browser behavior with <code>fetch</code>. It will also give you access to the pending form data so you can build pending UI.</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-highlight="true" data-line-number="1"><span style="color: var(--base0E)">import</span> { <span style="color: var(--base08)">redirect</span>, <span style="color: var(--base08)">useActionData</span>, <span style="color: var(--base08)">Form</span> } <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="2">\n</span><span class="codeblock-line" data-line-number="3"><span style="color: var(--base03)">// ...</span>\n</span><span class="codeblock-line" data-line-number="4">\n</span><span class="codeblock-line" data-line-number="5"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {\n</span><span class="codeblock-line" data-line-number="6">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useActionData</span>();\n</span><span class="codeblock-line" data-line-number="7">\n</span><span class="codeblock-line" data-line-number="8">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base03)">// note the capital "F" &#x3C;Form> now</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="10">    &#x3C;<span style="color: var(--base0A)">Form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>"><span style="color: var(--base0F)">{</span><span style="color: var(--base03)">/* ... */</span><span style="color: var(--base0F)">}</span>&#x3C;/<span style="color: var(--base0A)">Form</span>>\n</span><span class="codeblock-line" data-line-number="11">  );\n</span><span class="codeblock-line" data-line-number="12">}\n</span></code></pre></div><p><docs-error>HOLD UP! If all you do is change your form to Form, you made the UX a little worse!</docs-error></p><p>If you don\'t have the time or drive to do the rest of the job here, use <code>&#x3C;Form reloadDocument></code>. This lets the browser continue to handle the pending UI state (spinner in the favicon of the tab, progress bar in the address bar, etc.) If you simply use <code>&#x3C;Form></code> without implementing pending UI, the user will have no idea anything is happening when they submit a form.</p><p><docs-info>We recommend always using capital-F Form, and if you want to let the browser handle the pending UI, use the <code>&#x3C;Form reloadDocument></code> prop.</docs-info></p><p>Now let\'s add some pending UI so the user has a clue something happened when they submit. There\'s a hook called <code>useTransition</code>. When there is a pending form submission, Remix will give you the serialized version of the form as a <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData"><code>FormData</code></a> object. You\'ll be most interested in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData/get"><code>formData.get()</code></a> method..</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">import</span> {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base08)">redirect</span>,\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base08)">useActionData</span>,\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base08)">Form</span>,\n</span><span class="codeblock-line" data-highlight="true" data-line-number="5">  <span style="color: var(--base08)">useTransition</span>\n</span><span class="codeblock-line" data-line-number="6">} <span style="color: var(--base0E)">from</span> "<span style="color: var(--base0B)">remix</span>";\n</span><span class="codeblock-line" data-line-number="7">\n</span><span class="codeblock-line" data-line-number="8"><span style="color: var(--base03)">// ...</span>\n</span><span class="codeblock-line" data-line-number="9">\n</span><span class="codeblock-line" data-line-number="10"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {\n</span><span class="codeblock-line" data-line-number="11">  <span style="color: var(--base03)">// when the form is being processed on the server, this returns different</span>\n</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base03)">// transition states to help us build pending and optimistic UI.</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="13">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">transition</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useTransition</span>();\n</span><span class="codeblock-line" data-line-number="14">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useActionData</span>();\n</span><span class="codeblock-line" data-line-number="15">\n</span><span class="codeblock-line" data-line-number="16">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="17">    &#x3C;<span style="color: var(--base0A)">Form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>">\n</span><span class="codeblock-line" data-line-number="18">      &#x3C;<span style="color: var(--base08)">fieldset</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="19">        <span style="color: var(--base0D)">disabled</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="20">      >\n</span><span class="codeblock-line" data-line-number="21">        &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="22">          &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="23">            Name:<span style="color: var(--base0F)">{</span>"<span style="color: var(--base0B)"> </span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="24">            &#x3C;<span style="color: var(--base08)">input</span>\n</span><span class="codeblock-line" data-line-number="25">              <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">name</span>"\n</span><span class="codeblock-line" data-line-number="26">              <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>"\n</span><span class="codeblock-line" data-line-number="27">              <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>\n</span><span class="codeblock-line" data-line-number="28">                <span style="color: var(--base08)">actionData</span>\n</span><span class="codeblock-line" data-line-number="29">                  <span style="color: var(--base0E)">?</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">name</span>\n</span><span class="codeblock-line" data-line-number="30">                  <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">undefined</span>\n</span><span class="codeblock-line" data-line-number="31">              <span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="32">            />\n</span><span class="codeblock-line" data-line-number="33">          &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="34">        &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="35">\n</span><span class="codeblock-line" data-line-number="36">        <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (\n</span><span class="codeblock-line" data-line-number="37">          &#x3C;<span style="color: var(--base08)">p</span> <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{ color: "<span style="color: var(--base0B)">red</span>" }<span style="color: var(--base0F)">}</span>>\n</span><span class="codeblock-line" data-line-number="38">            <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="39">          &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="40">        )<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="41">\n</span><span class="codeblock-line" data-line-number="42">        &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="43">          &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="44">            Description:\n</span><span class="codeblock-line" data-line-number="45">            &#x3C;<span style="color: var(--base08)">br</span> />\n</span><span class="codeblock-line" data-line-number="46">            &#x3C;<span style="color: var(--base08)">textarea</span>\n</span><span class="codeblock-line" data-line-number="47">              <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">description</span>"\n</span><span class="codeblock-line" data-line-number="48">              <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>\n</span><span class="codeblock-line" data-line-number="49">                <span style="color: var(--base08)">actionData</span>\n</span><span class="codeblock-line" data-line-number="50">                  <span style="color: var(--base0E)">?</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">description</span>\n</span><span class="codeblock-line" data-line-number="51">                  <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">undefined</span>\n</span><span class="codeblock-line" data-line-number="52">              <span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="53">            />\n</span><span class="codeblock-line" data-line-number="54">          &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="55">        &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="56">\n</span><span class="codeblock-line" data-line-number="57">        <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (\n</span><span class="codeblock-line" data-line-number="58">          &#x3C;<span style="color: var(--base08)">p</span> <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{ color: "<span style="color: var(--base0B)">red</span>" }<span style="color: var(--base0F)">}</span>>\n</span><span class="codeblock-line" data-line-number="59">            <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="60">          &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="61">        )<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="62">\n</span><span class="codeblock-line" data-line-number="63">        &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="64">          &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">\n</span><span class="codeblock-line" data-highlight="true" data-line-number="65">            <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"\n</span><span class="codeblock-line" data-highlight="true" data-line-number="66">              <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">Creating...</span>"\n</span><span class="codeblock-line" data-highlight="true" data-line-number="67">              <span style="color: var(--base0E)">:</span> "<span style="color: var(--base0B)">Create</span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="68">          &#x3C;/<span style="color: var(--base08)">button</span>>\n</span><span class="codeblock-line" data-line-number="69">        &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="70">      &#x3C;/<span style="color: var(--base08)">fieldset</span>>\n</span><span class="codeblock-line" data-line-number="71">    &#x3C;/<span style="color: var(--base0A)">Form</span>>\n</span><span class="codeblock-line" data-line-number="72">  );\n</span><span class="codeblock-line" data-line-number="73">}\n</span></code></pre></div><p>Pretty slick! Now when the user clicks "Create", the inputs go disabled, and the submit button\'s text changes. The whole operation should be faster now too since there\'s just one network request happening instead of a full page reload (which involves potentially more network requests, reading assets from the browser cache, parsing JavaScript, parsing CSS, etc.).</p><p>We didn\'t do much with <code>transition</code> on this page, but it\'s got all the information about the submission on <code>transition.submission</code>, including all of the values being processed on the server on <code>submission.formData</code>.</p><h3 id="animating-in-the-validation-errors"><a href="data-writes.html#animating-in-the-validation-errors" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Animating in the Validation Errors</h3><p>Now that we\'re using JavaScript to submit this page, our validation errors can be animated in because the page is stateful. First we\'ll make a fancy component that animates height and opacity:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">ValidationMessage</span>({ <span style="color: var(--base08)">error</span>, <span style="color: var(--base08)">isSubmitting</span> }) {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> [<span style="color: var(--base08)">show</span>, <span style="color: var(--base08)">setShow</span>] <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useState</span>(<span style="color: var(--base0E)">!!</span><span style="color: var(--base08)">error</span>);\n</span><span class="codeblock-line" data-line-number="3">\n</span><span class="codeblock-line" data-line-number="4">  <span style="color: var(--base0D)">useEffect</span>(() <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="5">    <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">id</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">setTimeout</span>(() <span style="color: var(--base0D)">=></span> {\n</span><span class="codeblock-line" data-line-number="6">      <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">hasError</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0E)">!!</span><span style="color: var(--base08)">error</span>;\n</span><span class="codeblock-line" data-line-number="7">      <span style="color: var(--base0D)">setShow</span>(<span style="color: var(--base08)">hasError</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> <span style="color: var(--base0E)">!</span><span style="color: var(--base08)">isSubmitting</span>);\n</span><span class="codeblock-line" data-line-number="8">    });\n</span><span class="codeblock-line" data-line-number="9">    <span style="color: var(--base0E)">return</span> () <span style="color: var(--base0D)">=></span> <span style="color: var(--base0D)">clearTimeout</span>(<span style="color: var(--base08)">id</span>);\n</span><span class="codeblock-line" data-line-number="10">  }, [<span style="color: var(--base08)">error</span>, <span style="color: var(--base08)">isSubmitting</span>]);\n</span><span class="codeblock-line" data-line-number="11">\n</span><span class="codeblock-line" data-line-number="12">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="13">    &#x3C;<span style="color: var(--base08)">div</span>\n</span><span class="codeblock-line" data-line-number="14">      <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{\n</span><span class="codeblock-line" data-line-number="15">        opacity: <span style="color: var(--base08)">show</span> <span style="color: var(--base0E)">?</span> <span style="color: var(--base09)">1</span> <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">0</span>,\n</span><span class="codeblock-line" data-line-number="16">        height: <span style="color: var(--base08)">show</span> <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">1em</span>" <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">0</span>,\n</span><span class="codeblock-line" data-line-number="17">        color: "<span style="color: var(--base0B)">red</span>",\n</span><span class="codeblock-line" data-line-number="18">        transition: "<span style="color: var(--base0B)">all 300ms ease-in-out</span>"\n</span><span class="codeblock-line" data-line-number="19">      }<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="20">    >\n</span><span class="codeblock-line" data-line-number="21">      <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">error</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="22">    &#x3C;/<span style="color: var(--base08)">div</span>>\n</span><span class="codeblock-line" data-line-number="23">  );\n</span><span class="codeblock-line" data-line-number="24">}\n</span></code></pre></div><p>Now we can wrap our old error messages in this new fancy component, and even turn the borders of our fields red that have errors:</p><div><pre data-line-numbers="true" data-lang="tsx" style="color: var(--base05);background-color: var(--base00)"><code><span class="codeblock-line" data-line-number="1"><span style="color: var(--base0E)">export</span> <span style="color: var(--base0E)">default</span> <span style="color: var(--base0D)">function</span> <span style="color: var(--base0D)">NewProject</span>() {\n</span><span class="codeblock-line" data-line-number="2">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">transition</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useTransition</span>();\n</span><span class="codeblock-line" data-line-number="3">  <span style="color: var(--base0A)">let</span> <span style="color: var(--base08)">actionData</span> <span style="color: var(--base0E)">=</span> <span style="color: var(--base0D)">useActionData</span>();\n</span><span class="codeblock-line" data-line-number="4">\n</span><span class="codeblock-line" data-line-number="5">  <span style="color: var(--base0E)">return</span> (\n</span><span class="codeblock-line" data-line-number="6">    &#x3C;<span style="color: var(--base0A)">Form</span> <span style="color: var(--base0D)">method</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">post</span>">\n</span><span class="codeblock-line" data-line-number="7">      &#x3C;<span style="color: var(--base08)">fieldset</span>\n</span><span class="codeblock-line" data-line-number="8">        <span style="color: var(--base0D)">disabled</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="9">      >\n</span><span class="codeblock-line" data-line-number="10">        &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="11">          &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="12">            Name:<span style="color: var(--base0F)">{</span>"<span style="color: var(--base0B)"> </span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="13">            &#x3C;<span style="color: var(--base08)">input</span>\n</span><span class="codeblock-line" data-line-number="14">              <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">name</span>"\n</span><span class="codeblock-line" data-line-number="15">              <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">text</span>"\n</span><span class="codeblock-line" data-line-number="16">              <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>\n</span><span class="codeblock-line" data-line-number="17">                <span style="color: var(--base08)">actionData</span>\n</span><span class="codeblock-line" data-line-number="18">                  <span style="color: var(--base0E)">?</span> <span style="color: var(--base08)">actionData</span>.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">name</span>\n</span><span class="codeblock-line" data-line-number="19">                  <span style="color: var(--base0E)">:</span> <span style="color: var(--base09)">undefined</span>\n</span><span class="codeblock-line" data-line-number="20">              <span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="21">              <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{\n</span><span class="codeblock-line" data-highlight="true" data-line-number="22">                borderColor: <span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="23">                  <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">red</span>"\n</span><span class="codeblock-line" data-highlight="true" data-line-number="24">                  <span style="color: var(--base0E)">:</span> ""\n</span><span class="codeblock-line" data-line-number="25">              }<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="26">            />\n</span><span class="codeblock-line" data-line-number="27">          &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="28">        &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="29">\n</span><span class="codeblock-line" data-line-number="30">        <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">name</span> <span style="color: var(--base0E)">&#x26;&#x26;</span> (\n</span><span class="codeblock-line" data-highlight="true" data-line-number="31">          &#x3C;<span style="color: var(--base0A)">ValidationMessage</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="32">            <span style="color: var(--base0D)">isSubmitting</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="33">            <span style="color: var(--base0D)">error</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>?.<span style="color: var(--base08)">name</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="34">          />\n</span><span class="codeblock-line" data-line-number="35">        )<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="36">\n</span><span class="codeblock-line" data-line-number="37">        &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="38">          &#x3C;<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-line-number="39">            Description:\n</span><span class="codeblock-line" data-line-number="40">            &#x3C;<span style="color: var(--base08)">br</span> />\n</span><span class="codeblock-line" data-line-number="41">            &#x3C;<span style="color: var(--base08)">textarea</span>\n</span><span class="codeblock-line" data-line-number="42">              <span style="color: var(--base0D)">name</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">description</span>"\n</span><span class="codeblock-line" data-line-number="43">              <span style="color: var(--base0D)">defaultValue</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">values</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="44">              <span style="color: var(--base0D)">style</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span>{\n</span><span class="codeblock-line" data-line-number="45">                borderColor: <span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span>\n</span><span class="codeblock-line" data-line-number="46">                  <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">red</span>"\n</span><span class="codeblock-line" data-line-number="47">                  <span style="color: var(--base0E)">:</span> ""\n</span><span class="codeblock-line" data-highlight="true" data-line-number="48">              }<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="49">            />\n</span><span class="codeblock-line" data-highlight="true" data-line-number="50">          &#x3C;/<span style="color: var(--base08)">label</span>>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="51">        &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="52">\n</span><span class="codeblock-line" data-line-number="53">        &#x3C;<span style="color: var(--base0A)">ValidationMessage</span>\n</span><span class="codeblock-line" data-line-number="54">          <span style="color: var(--base0D)">isSubmitting</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="55">          <span style="color: var(--base0D)">error</span><span style="color: var(--base0E)">=</span><span style="color: var(--base0F)">{</span><span style="color: var(--base08)">actionData</span>?.<span style="color: var(--base0D)">errors</span>.<span style="color: var(--base08)">description</span><span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="56">        />\n</span><span class="codeblock-line" data-highlight="true" data-line-number="57">\n</span><span class="codeblock-line" data-highlight="true" data-line-number="58">        &#x3C;<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-highlight="true" data-line-number="59">          &#x3C;<span style="color: var(--base08)">button</span> <span style="color: var(--base0D)">type</span><span style="color: var(--base0E)">=</span>"<span style="color: var(--base0B)">submit</span>">\n</span><span class="codeblock-line" data-highlight="true" data-line-number="60">            <span style="color: var(--base0F)">{</span><span style="color: var(--base08)">transition</span>.<span style="color: var(--base08)">state</span> <span style="color: var(--base0E)">===</span> "<span style="color: var(--base0B)">submitting</span>"\n</span><span class="codeblock-line" data-line-number="61">              <span style="color: var(--base0E)">?</span> "<span style="color: var(--base0B)">Creating...</span>"\n</span><span class="codeblock-line" data-line-number="62">              <span style="color: var(--base0E)">:</span> "<span style="color: var(--base0B)">Create</span>"<span style="color: var(--base0F)">}</span>\n</span><span class="codeblock-line" data-line-number="63">          &#x3C;/<span style="color: var(--base08)">button</span>>\n</span><span class="codeblock-line" data-line-number="64">        &#x3C;/<span style="color: var(--base08)">p</span>>\n</span><span class="codeblock-line" data-line-number="65">      &#x3C;/<span style="color: var(--base08)">fieldset</span>>\n</span><span class="codeblock-line" data-line-number="66">    &#x3C;/<span style="color: var(--base0A)">Form</span>>\n</span><span class="codeblock-line" data-line-number="67">  );\n</span><span class="codeblock-line" data-line-number="68">}\n</span></code></pre></div><p>Boom! Fancy UI without having to change anything about how we communicate with the server. It\'s also resilient to network conditions that prevent JS from loading.</p><h3 id="review"><a href="data-writes.html#review" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Review</h3><ul>\n<li>\n<p>First we built the project form without JavaScript in mind. A simple form, posting to a server side action. Welcome to 1998.</p>\n</li>\n<li>\n<p>Once that worked, we used JavaScript to submit the form by changing <code>&#x3C;form></code> to <code>&#x3C;Form></code>, but we didnt\' have to do anything else!</p>\n</li>\n<li>\n<p>Now that there was a stateful page with React, we added loading indicators and animation for the validation errors by simply asking Remix for the state of the transition.</p>\n</li>\n</ul><p>From your components perspective, all that happend was the <code>useTransition</code> hook caused a state update when the form was submitted, and then another state update when the data came back. Of course, a lot more happened inside of Remix, but as far as your component is concerned, that\'s it. Just a couple state updates. This makes it really easy to dress up any user flow.</p><h2 id="see-also"><a href="data-writes.html#see-also" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>See also</h2><ul>\n<li><a href="../../v1.0.5/api/remix.html#form">Form</a></li>\n<li><a href="../../v1.0.5/api/remix.html#usetransition">useTransition</a></li>\n<li><a href="../../v1.0.5/api/conventions.html#action">Actions</a></li>\n<li><a href="../../v1.0.5/api/conventions.html#loader">Loaders</a></li>\n<li><a href="../../v1.0.5/api/remix.html#usesubmit"><code>useSubmit()</code></a></li>\n<li><a href="../../v1.0.5/api/remix.html#usefetcher"><code>useFetcher()</code></a></li>\n</ul></div></div>\n','lang':'en','hasContent':true,'createdAt':'2021-11-24T18:08:27.994Z','updatedAt':'2021-11-24T22:37:56.596Z','title':'Data Writes','order':null,'disabled':false,'siblingLinks':false,'published':null,'description':null,'hidden':false,'toc':true,'githubRefId':'refs/heads/main'}},'actionData':undefined};</script><script src="../../../../build/manifest-10D43C8B.js"></script><script type="module">import * as route0 from "/build/root-63J2OI5O.js";
import * as route1 from "/build/routes/docs/$lang.$version-WDGSSTHQ.js";
import * as route2 from "/build/routes/docs/$lang.$version/$-XTVJBAXD.js";
window.__remixRouteModules = {"root":route0,"routes/docs/$lang.$version":route1,"routes/docs/$lang.$version/$":route2};</script><script src="../../../../build/entry.client-42KZW6ZZ.js" type="module"></script></body></html>